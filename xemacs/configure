#! /bin/sh

#### Configuration script for XEmacs.  Largely divergent from FSF.
#### Guess values for system-dependent variables and create Makefiles.
#### Generated automatically using autoconf version 2.13 
#### Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000 Free Software Foundation, Inc.
#### Copyright (C) 1993-1995 Board of Trustees, University of Illinois.
#### Copyright (C) 1996, 1997 Sun Microsystems, Inc.
#### Copyright (C) 1995, 1996, 2005 Ben Wing.
#### Copyright (C) 2000, 2001 Martin Buchholz.
#### Copyright (C) 1998, 1999 J. Kean Johnston.

### Don't edit this script!
### This script was automatically generated by the `autoconf' program
### from the file `./configure.in'.
### To rebuild it, execute the command
###	autoconf
### in the this directory.  You must have autoconf version 2.13 or later.
### Note: this script has not yet been ported to autoconf version 2.5x.

### This file is part of XEmacs.

### XEmacs is free software; you can redistribute it and/or modify it
### under the terms of the GNU General Public License as published by
### the Free Software Foundation; either version 2, or (at your
### option) any later version.

### XEmacs is distributed in the hope that it will be useful, but
### WITHOUT ANY WARRANTY; without even the implied warranty of
### MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
### General Public License for more details.

### You should have received a copy of the GNU General Public License
### along with XEmacs; see the file COPYING.  If not, write to the Free
### Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
### 02111-1307, USA.

### For usage, run `./configure --help'
### For more detailed information on building and installing XEmacs,
### read the file `INSTALL'.
###
### If configure succeeds, it leaves its status in config.status.
### A log of configuration tests can be found in config.log.
### If configure fails after disturbing the status quo,
### 	config.status is removed.

ac_help="$ac_help
  --with-x                use the X Window System"



if test -n "$ZSH_VERSION"; then
    setopt NO_BAD_PATTERN NO_BANG_HIST NO_BG_NICE NO_EQUALS NO_FUNCTION_ARGZERO
  setopt GLOB_SUBST NO_HUP INTERACTIVE_COMMENTS KSH_ARRAYS NO_MULTIOS NO_NOMATCH
  setopt RM_STAR_SILENT POSIX_BUILTINS SH_FILE_EXPANSION SH_GLOB SH_OPTION_LETTERS
  setopt SH_WORD_SPLIT BSD_ECHO IGNORE_BRACES
      if test -n "$CDPATH"; then CDPATH="."; export CDPATH; fi
elif test -n "$BASH_VERSION"; then
    set -o posix
  unset CDPATH
else
  if test -n "$CDPATH"; then CDPATH="."; export CDPATH; fi
fi

exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE

subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
ac_max_here_lines=12

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=src/lisp.h

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done


ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


progname="`echo $0 | sed 's:^\./\./:\./:'`"


MAKE_SUBDIR="$MAKE_SUBDIR lib-src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lib-src\" to \$MAKE_SUBDIR"; fi
INSTALL_ARCH_DEP_SUBDIR="$INSTALL_ARCH_DEP_SUBDIR lib-src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lib-src\" to \$INSTALL_ARCH_DEP_SUBDIR"; fi

prefix='/usr/local'
exec_prefix='${prefix}'
bindir='${exec_prefix}/bin'
datadir='${prefix}/lib'
statedir='${prefix}/lib'
libdir='${exec_prefix}/lib'
mandir='${prefix}/man/man1'
inststaticdir='${PROGNAME}'
instvardir='${PROGNAME}-${version}'
infodir='${datadir}/${instvardir}/info'
infopath=''
install_pp=''
lispdir='${datadir}/${instvardir}/lisp'
moduledir='${libdir}/${instvardir}/${configuration}/modules'
sitelispdir='${datadir}/${inststaticdir}/site-lisp'
sitemoduledir='${libdir}/${inststaticdir}/site-modules'
pkgdir='${datadir}/${instvardir}/lisp'
package_path=''
etcdir='${datadir}/${instvardir}/etc'
archlibdir='${libdir}/${instvardir}/${configuration}'
docdir='${archlibdir}'
with_netinstall="no"
with_prefix='yes'
with_site_lisp='no'
with_site_modules='yes'
with_menubars=''
with_scrollbars=''
with_widgets=''
with_dialogs=''
with_file_coding=''
cpp='' cppflags='' libs='' ldflags=''
extra_includes=''
dynamic=''
with_x11=''
with_msw=''
rel_alloc='default'
with_system_malloc='default'
with_dlmalloc='default'
use_regex_malloc='yes'
with_esd_sound='no'
native_sound_lib=''
with_gtk='no'
with_gnome='no'
use_assertions="yes"
with_toolbars=""
with_tty=""
use_union_type="no"
with_dnet=""
pdump=''
with_dragndrop="no"
with_ipv6_cname="no"




arguments="$@"

quoted_sed_magic=s/"'"/"'"'"'"'"'"'"'"/g
quoted_arguments=
for i in "$@"; do
   case "$i" in
   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
   | --no-cr | --no-c) ;;
   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
   *)
   quoted_i="`echo '' $i | sed -e 's:^ ::' -e $quoted_sed_magic`"
   quoted_arguments="$quoted_arguments '$quoted_i'" ;;
   esac
done

while test $# != 0; do
  arg="$1"; shift
  case "$arg" in
    --no-create|--no-recursion) ;;
        -* )
            case "$arg" in
        -*=*)
	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\([^=]*\)=.*$:\1:'`
	  val=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*[^=]*=\(.*\)$:\1:'`
	  valomitted=no
	;;
                                                                          -*)
                                 	  opt=`echo '' $arg | sed -e 's:^ ::' -e 's:^-*\(.*\)$:\1:'`
          val="yes" valomitted=yes
        ;;
      esac

            optname="$opt"
      opt="`echo '' $opt | sed -e 's:^ ::' | tr - _`"

            case "${valomitted}-${opt}" in yes-without_* )
	opt=`echo $opt | sed 's/without/with/'`
	valomitted="no" val="no" ;;
      esac

            case "$opt" in

      	with_site_lisp	| \
	with_prefix	| \
	with_site_modules | \
	with_x		| \
	with_x11	| \
	with_gtk	| \
	with_gnome	| \
	with_msw	| \
	with_gcc	| \
	dynamic		| \
	with_ncurses	| \
	with_dnet	| \
	with_socks	| \
	with_dragndrop	| \
	with_cde	| \
	with_offix	| \
	with_gpm	| \
	with_xpm	| \
	with_xface	| \
	with_gif	| \
	with_jpeg	| \
	with_png	| \
	with_tiff	| \
	with_wmcommand	| \
	with_xmu	| \
	with_purify	| \
	with_quantify	| \
	with_toolbars	| \
	with_tty	| \
	with_xfs	| \
	with_i18n3	| \
	with_mule	| \
	with_utf_2000	| \
	with_chise	| \
	with_text_coding| \
	with_file_coding| \
	with_canna	| \
	with_wnn	| \
	with_wnn6	| \
	with_workshop	| \
	with_sparcworks | \
	with_tooltalk	| \
	with_concord	| \
	with_ldap	| \
	with_postgresql	| \
	with_pop	| \
	with_kerberos	| \
	with_hesiod	| \
	with_dnet	| \
	with_infodock	| \
	with_netinstall | \
	with_ipv6_cname | \
	external_widget | \
	verbose		| \
	extra_verbose	| \
	usage_tracking	| \
	use_union_type	| \
	pdump		| \
	debug		| \
	use_assertions	| \
	use_regex_malloc | \
	memory_usage_stats | \
	with_clash_detection | \
	with_modules    | \
	quick_build )
	  	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no	;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a boolean value: \`yes' or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  eval "$opt=\"$val\"" ;;


			srcdir		| \
	compiler	| \
	cflags		| \
	cpp		| \
	cppflags	| \
	libs		| \
	ldflags		| \
	cache_file	| \
	native_sound_lib| \
	site_lisp	| \
	x_includes	| \
	x_libraries	| \
	site_includes	| \
	site_libraries	| \
	site_prefixes   | \
	site_runtime_libraries )
	  	  if test "$valomitted" = "yes" ; then
	    	    if test "$#" = 0 ; then
	      (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	    fi
	    val="$1"; shift
	  fi
          eval "$opt=\"$val\""
	;;

		rel_alloc | \
	with_dlmalloc | \
	with_debug_malloc  | use_debug_malloc | \
	with_system_malloc | use_system_malloc )
	  case "$val" in
	    y | ye | yes )	val=yes ;;
	    n | no )		val=no  ;;
	    d | de | def | defa | defau | defaul | default ) val=default ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires one of these values:
  \`yes', \`no', or \`default'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  case "$opt" in use_* ) opt="`echo $opt | sed s/use/with/`" ;; esac
          eval "$opt=\"$val\""
        ;;

                "with_database" )
	  with_database_berkdb=no
	  with_database_dbm=no
	  with_database_gdbm=no
	  for x in `echo "$val" | sed -e 's/,/ /g'` ; do
	    case "$x" in
	      no ) ;;
	      b | be | ber | berk | berkd | berkdb )       with_database_berkdb=yes ;;
	      d | db | dbm )				   with_database_dbm=yes    ;;
	      g | gn | gnu | gnud | gnudb | gnudbm | gdbm) with_database_gdbm=yes   ;;
	      * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option value
  must be either \`no' or a comma-separated list
  of one or more of \`berkdb' and either \`dbm' or \`gnudbm'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
            esac
	  done
	  if test "$with_database_dbm"  = "yes" -a \
	          "$with_database_gdbm" = "yes"; then
	  (echo "$progname: Usage error:"
echo " " "Only one of \`dbm' and \`gnudbm' may be specified
  with the \`--$optname' option."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	  fi
        ;;

        	"with_sound" )
	        	  for x in `echo "$val" | sed -e 's/,/ /g'` ; do
	    case "$x" in
	      	      n | no | non | none ) new_sdefault=no ;;
	      a | al | all | both ) new_sdefault=yes ;;

	      native )       with_native_sound=yes ;;
	      nonative )     with_native_sound=no ;;

	      nas )          with_nas_sound=yes ;;
	      nonas )        with_nas_sound=no ;;

	      esd )	     with_esd_sound=yes ;;
	      noesd )        with_esd_sound=no ;;

	      * ) bogus_sound=yes ;;
	    esac
	    if test "$bogus_sound" -o \
	         \( -n "$new_sdefault" -a -n "$sound_notfirst" \) ; then
		types="\`all', \`none', \`(no)native', \`no(nas)', \`(no)esd'."
		(echo "$progname: Usage error:"
echo " " "Valid types for the \`--$optname' option are:
  $types.
Option \`all' or \`none' must be first in the list.
The default is to autodetect native and NAS sound support."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	    elif test -n "$new_sdefault" ; then
		with_native_sound=$new_sdefault
		with_nas_sound=$new_sdefault
		with_esd_sound=$new_sdefault
		new_sdefault=	# reset this
	    fi
	    sound_notfirst=true
	  done
        ;;

                        "with_athena" )
	  case "$val" in
            xa | xaw )			  val=xaw    ;;
            3 | 3d | xaw3d )              val=3d     ;;
                        ne | nex | next | naxtaw)     val=next   ;;
                        9 | 95 | xaw95 )              val=95     ;;
            xp | xpm | xawxpm )           val=xpm    ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`xaw', \`3d', \`next', \`95', or \`xpm'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"with_xim" )
	  case "$val" in
	    y | ye | yes )		  val=yes   ;;
	    n | no | non | none )	  val=no    ;;
	    x | xl | xli | xlib )	  val=xlib  ;;
	    m | mo | mot | moti | motif ) val=motif ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`motif', \`xlib', \`yes', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"mail_locking" )
	  case "$val" in
	    lockf )	val=lockf ;;
	    flock )	val=flock ;;
	    file | dot ) val=file  ;;
	    locking )	val=locking  ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`lockf', \`flock', \`file', \`locking', or \`mmdf'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
          eval "$opt=\"$val\""
        ;;

        	"error_checking" )
	  	  	  
	  for x in `echo "$val" | sed -e 's/,/ /g'` ; do
	    case "$x" in
	      	      n | no | non | none ) new_default=no ;;
	      a | al | all )	    new_default=yes ;;

	      extents )       error_check_extents=yes ;;
	      noextents )     error_check_extents=no ;;

	      typecheck )     error_check_typecheck=yes ;;
	      notypecheck )   error_check_typecheck=no ;;

	      bufpos )	      error_check_bufpos=yes ;;
	      nobufpos )      error_check_bufpos=no ;;

	      gc )	      error_check_gc=yes ;;
	      nogc )          error_check_gc=no ;;

	      malloc )	      error_check_malloc=yes ;;
	      nomalloc )      error_check_malloc=no ;;

	      byte_code )     error_check_byte_code=yes ;;
	      nobyte_code )   error_check_byte_code=no ;;

	      glyphs )     error_check_glyphs=yes ;;
	      noglyphs )   error_check_glyphs=no ;;

	      * ) bogus_error_check=yes ;;
	    esac
	    if test "$bogus_error_check" -o \
	         \( -n "$new_default" -a -n "$echeck_notfirst" \) ; then
		if test "$error_check_default" = yes ; then
		  types="\`all' (default), \`none', \`noextents', \`notypecheck', \`nobufpos', \`nogc', \`nomalloc', \`noglyphs' and \`nobyte-code'."
		else
		  types="\`all', \`none' (default), \`extents', \`typecheck', \`bufpos', \`gc', \`malloc', \`glyphs' and \`byte-code'."
		fi
		(echo "$progname: Usage error:"
echo " " "Valid types for the \`--$optname' option are:
  $types."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
	    elif test -n "$new_default" ; then
		error_check_extents=$new_default
		error_check_typecheck=$new_default
		error_check_bufpos=$new_default
		error_check_gc=$new_default
		error_check_malloc=$new_default
		error_check_byte_code=$new_default
		error_check_glyphs=$new_default
		new_default=	# reset this
	    fi
	    echeck_notfirst=true
	  done
	;;

				
		prefix | exec_prefix | bindir | datadir | statedir | libdir | \
	mandir | infodir | infopath | lispdir | etcdir | pkgdir | \
	archlibdir | docdir | package_path | moduledir )
	   	   if test "$valomitted" = "yes"; then
	     if test "$#" = 0; then
		 (echo "$progname: Usage error:"
echo " " "The \`--$optname' option requires a value."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1;
	     fi
	     val="$1"; shift
	   fi
	   eval "$opt=\"$val\""

                      	   case "$opt" in
	     	     exec_prefix ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining EXEC_PREFIX_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define EXEC_PREFIX_USER_DEFINED 1
EOF
}
 ;;
             lispdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define LISPDIR_USER_DEFINED 1
EOF
}
 ;;
             sitelispdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SITELISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define SITELISPDIR_USER_DEFINED 1
EOF
}
 ;;
             moduledir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MODULEDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define MODULEDIR_USER_DEFINED 1
EOF
}
 ;;
             etcdir  )  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ETCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ETCDIR_USER_DEFINED 1
EOF
}
 ;;
             infodir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFODIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFODIR_USER_DEFINED 1
EOF
}
 ;;
             infopath ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFOPATH_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFOPATH_USER_DEFINED 1
EOF
}
 ;;
             package_path ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PACKAGE_PATH_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define PACKAGE_PATH_USER_DEFINED 1
EOF
}
 ;;
             datadir )
	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INFODIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define INFODIR_USER_DEFINED 1
EOF
}

	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISPDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define LISPDIR_USER_DEFINED 1
EOF
}

	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MODULEDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define MODULEDIR_USER_DEFINED 1
EOF
}

	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ETCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ETCDIR_USER_DEFINED 1
EOF
}

	        { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DOCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define DOCDIR_USER_DEFINED 1
EOF
}

                { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ARCHLIBDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ARCHLIBDIR_USER_DEFINED 1
EOF
}
 ;;
	     docdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DOCDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define DOCDIR_USER_DEFINED 1
EOF
}
 ;;
             exec_prefix | libdir | archlibdir ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ARCHLIBDIR_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define ARCHLIBDIR_USER_DEFINED 1
EOF
}
 ;;
           esac
	;;

		"no_create" ) ;;

		"usage" | "help" ) ${PAGER-more} ${srcdir}/configure.usage; exit 0 ;;

		"with_menubars"   | \
	"with_scrollbars" | \
	"with_dialogs"    | \
	"with_widgets" )
	  case "$val" in
	    l | lu | luc | luci | lucid )		val=lucid  ;;
	    mo | mot | moti | motif )			val=motif  ;;
	    a | at | ath | athe | athen | athena )	val=athena ;;
	    n | no | non | none )			val=no     ;;
	    y | ye | yes )				val=yes    ;;
	                "")						val=yes    ;;
	    g | gt | gtk )				val=gtk    ;;
	    ms | msw )					val=msw    ;;
	    * ) (echo "$progname: Usage error:"
echo " " "The \`--$optname' option must have one of these values:
  \`gtk', \`lucid', \`motif', \`athena', \`yes', or \`no'."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;
	  esac
	  eval "$opt=\"$val\""
	;;

		"use_minimal_tagbits" | \
	"use_indexed_lrecord_implementation" | \
	"run_in_place"	| \
	"const_is_losing" | \
	"with_gnu_make" )
	  echo "configure: warning: Obsolete option \`--$optname' ignored." 1>&2
	;;

        	* ) (echo "$progname: Usage error:"
echo " " "Unrecognized option: $arg"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;

      esac
    ;;

        *-*-*) configuration="$arg" ;;

        *) (echo "$progname: Usage error:"
echo " " "Unrecognized argument: $arg"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1 ;;

  esac
done


test -n "$cpp"      && CPP="$cpp"
test -n "$cppflags" && CPPFLAGS="$cppflags"
test -n "$libs"     && LIBS="$libs"
test -n "$ldflags"  && LDFLAGS="$ldflags"

eval set x "$quoted_arguments"; shift

test "$extra_verbose" = "yes" && verbose=yes

test -n "$with_x" && with_x11="$with_x"

if test "$with_purify" = "yes" -o "$with_quantify" = "yes"; then
  test "$with_system_malloc" = "default" && with_system_malloc=yes
fi



if test "$with_cde $with_tooltalk" = "yes no"; then
  (echo "$progname: Usage error:"
echo " " "--with-cde requires --with-tooltalk"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
elif test "$with_tooltalk" = "no" ; then with_cde=no
elif test "$with_cde" = "yes"; then with_tooltalk=yes
fi


case "$srcdir" in

    "" )
    for dir in "`echo $0 | sed 's|//|/|' | sed 's|/[^/]*$||'`" "." ".." ; do
      if test -f "$dir/src/lisp.h" -a \
	      -f "$dir/lisp/version.el" ; then
        srcdir="$dir"
        break
      fi
    done
    if test -z "$srcdir" ; then
      (echo "$progname: Usage error:"
echo " " "Neither the current directory nor its parent seem to
  contain the XEmacs sources.  If you do not want to build XEmacs in its
  source tree, you should run \`$progname' in the directory in which
  you wish to build XEmacs, using the \`--srcdir' option to say where the
  sources may be found."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;

    * )
    if test ! -f "$srcdir/src/lisp.h" -o \
	    ! -f "$srcdir/lisp/version.el" ; then
      (echo "$progname: Usage error:"
echo " " "The directory specified with the \`--srcdir' option,
  \`$srcdir', doesn't seem to contain the XEmacs sources.  You should
  either run the \`$progname' script at the top of the XEmacs source
  tree, or use the \`--srcdir' option to specify the XEmacs source directory."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
  ;;
esac

if test -z "$configuration"; then
    configuration=`${CONFIG_SHELL-/bin/sh} $srcdir/config.guess`
  if test -z "$configuration"; then
    (echo "$progname: Usage error:"
echo " " "XEmacs has not been ported to this host type.
Try explicitly specifying the CONFIGURATION when rerunning configure."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
  fi
fi

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:859: checking whether ln -s works" >&5

rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


for dir in lisp etc man info tests; do
  if test ! -d "$dir" ; then
    echo Making symbolic link to "$srcdir/$dir"
    ${LN_S} "$srcdir/$dir" "$dir"
  fi
done


absolute_pwd="`pwd`";
if test -n "$PWD" -a "`cd $PWD && pwd`" = "$absolute_pwd"
then blddir="$PWD"
else blddir="$absolute_pwd"; if test -d "/net"; then
  if test -d "/tmp_mnt/net"; then tdir="tmp_mnt/net"; else tdir="tmp_mnt"; fi
  blddir=`echo "$blddir" | \
   sed -e "s|^${tdir}/|/net/|" -e "s|^/a/|/net/|" -e "s|^/amd/|/net/|"`
fi
fi


case "$srcdir" in
  /* ) ;;
  .  ) srcdir="$blddir" ;;
  *  ) srcdir="`cd $srcdir && pwd`"; if test -d "/net"; then
  if test -d "/tmp_mnt/net"; then tdir="tmp_mnt/net"; else tdir="tmp_mnt"; fi
  srcdir=`echo "$srcdir" | \
   sed -e "s|^${tdir}/|/net/|" -e "s|^/a/|/net/|" -e "s|^/amd/|/net/|"`
fi ;;
esac

if test `pwd` != `sh -c cd $srcdir && pwd`  \
   && test -f "$srcdir/src/config.h"; then
  (echo "$progname: WARNING: The directory tree \`$srcdir' is being used"
   echo "   as a build directory right now; it has been configured in its own"
   echo "   right.  To configure in another directory as well, you MUST"
   echo "   use GNU make.  If you do not have GNU make, then you must"
   echo "   now do \`make distclean' in $srcdir,"
   echo "   and then run $progname again.") >&2
  extrasub='/^VPATH[	 ]*=/c\
vpath %.c $(srcdir)\
vpath %.h $(srcdir)\
vpath %.y $(srcdir)\
vpath %.l $(srcdir)\
vpath %.s $(srcdir)\
vpath %.in $(srcdir)'
fi

. "$srcdir/version.sh" || exit 1;
if test -n "$emacs_is_beta"; then beta=yes; else beta=no; fi
: "${extra_verbose=$beta}"
version="${emacs_major_version}.${emacs_minor_version}"
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_MAJOR_VERSION = $emacs_major_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_MAJOR_VERSION $emacs_major_version
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_MINOR_VERSION = $emacs_minor_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_MINOR_VERSION $emacs_minor_version
EOF
}

if test -n "$emacs_beta_version" ; then
  if test "$beta" = "yes"; then
  	version="${version}-b${emacs_beta_version}"
  	{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_BETA_VERSION = $emacs_beta_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_BETA_VERSION $emacs_beta_version
EOF
}

  else
	version="${version}.${emacs_beta_version}"
	{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_PATCH_LEVEL = $emacs_beta_version
EOF
cat >> confdefs.h <<EOF
#define EMACS_PATCH_LEVEL $emacs_beta_version
EOF
}

  fi
fi
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining XEMACS_CODENAME = "$xemacs_codename"
EOF
cat >> confdefs.h <<EOF
#define XEMACS_CODENAME "$xemacs_codename"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_VERSION = "$version"
EOF
cat >> confdefs.h <<EOF
#define EMACS_VERSION "$version"
EOF
}


if test "$with_infodock" = "yes"; then
  if test ! -f ../../ID-INSTALL; then
    echo "Cannot build InfoDock without InfoDock sources"
    with_infodock=no
  fi
fi

if test "$with_infodock" = "yes"; then
      { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_MAJOR_VERSION = $infodock_major_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_MAJOR_VERSION $infodock_major_version
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_MINOR_VERSION = $infodock_minor_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_MINOR_VERSION $infodock_minor_version
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining INFODOCK_BUILD_VERSION = $infodock_build_version
EOF
cat >> confdefs.h <<EOF
#define INFODOCK_BUILD_VERSION $infodock_build_version
EOF
}

  version=${infodock_major_version}.${infodock_minor_version}.${infodock_build_version}
  PROGNAME=infodock
  CPPFLAGS="$CPPFLAGS -DINFODOCK"
else
  PROGNAME=xemacs
fi

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_PROGNAME = "$PROGNAME"
EOF
cat >> confdefs.h <<EOF
#define EMACS_PROGNAME "$PROGNAME"
EOF
}


if test -n "$emacs_is_beta"; then beta=yes; else beta=no; fi
test "${error_check_extents=$beta}"   = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_EXTENTS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_EXTENTS 1
EOF
}

test "${error_check_typecheck=$beta}" = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_TYPECHECK
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_TYPECHECK 1
EOF
}

test "${error_check_bufpos=$beta}"    = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_BUFPOS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_BUFPOS 1
EOF
}

test "${error_check_gc=$beta}"        = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_GC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_GC 1
EOF
}

test "${error_check_malloc=$beta}"    = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_MALLOC 1
EOF
}

test "${error_check_byte_code=$beta}" = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_BYTE_CODE
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_BYTE_CODE 1
EOF
}

test "${error_check_glyphs=$beta}" = yes && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ERROR_CHECK_GLYPHS
EOF
cat >> confdefs.h <<\EOF
#define ERROR_CHECK_GLYPHS 1
EOF
}

if test "${debug:=$beta}" = "yes"; then
  use_assertions=yes memory_usage_stats=yes
  extra_objs="$extra_objs debug.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"debug.o\""
 fi
  extra_objs="$extra_objs tests.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tests.o\""
 fi
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DEBUG_XEMACS
EOF
cat >> confdefs.h <<\EOF
#define DEBUG_XEMACS 1
EOF
}

fi
test "$use_assertions"     = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_ASSERTIONS
EOF
cat >> confdefs.h <<\EOF
#define USE_ASSERTIONS 1
EOF
}

test "$memory_usage_stats" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MEMORY_USAGE_STATS
EOF
cat >> confdefs.h <<\EOF
#define MEMORY_USAGE_STATS 1
EOF
}



echo $ac_n "checking "host system type"""... $ac_c" 1>&6
echo "configure:1124: checking "host system type"" >&5
internal_configuration=`echo $configuration | sed 's/-\(workshop\)//'`
canonical=`${CONFIG_SHELL-/bin/sh} $srcdir/config.sub "$internal_configuration"`
configuration=`echo "$configuration" | sed 's/^\([^-][^-]*-[^-][^-]*-[^-][^-]*\)-.*$/\1/'`
canonical=`echo "$canonical" | sed 's/^\([^-][^-]*-[^-][^-]*-[^-][^-]*\)-.*$/\1/'`
echo "$ac_t""$configuration" 1>&6





machine='' opsys=''

case "$canonical" in
  sparc-*-*        ) machine=sparc ;;
  alpha*-*-*       ) machine=alpha ;;
  vax-*-*          ) machine=vax ;;
  mips-dec-*       ) machine=pmax ;;
  mips-sgi-irix6*  ) machine=iris6d ;;
  mips-sgi-*       ) machine=iris4d ;;
  mips*-linux      ) machine=mips ;;
  romp-ibm-*       ) machine=ibmrt ;;
  rs6000-ibm-aix*  ) machine=ibmrs6000 ;;
  powerpc-ibm-aix* ) machine=ibmrs6000 ;;
  powerpc*-*       ) machine=powerpc ;;
  hppa-*-*         ) machine=hp800 ;;
  m88k-dg-*        ) machine=aviion ;;
  m68*-sony-*      ) machine=news ;;
  mips-sony-*      ) machine=news-risc ;;
  clipper-*        ) machine=clipper ;;
  arm*             ) machine=arm ;;
  ns32k-*          ) machine=ns32000 ;;
esac

case "$canonical" in
  *-*-linux*    ) opsys=linux ;;
  *-*-netbsd*   ) opsys=netbsd ;;
  *-*-openbsd*	) opsys=openbsd ;;
  *-*-nextstep* ) opsys=nextstep ;;
  *-*-vms       ) opsys=vms ;;

    *-dec-osf1.3 | *-dec-osf2* ) opsys=decosf1-3 ;;
  *-dec-osf1.2 | *-dec-osf1* ) opsys=decosf1-2 ;;
  *-dec-osf3.[2-9]         ) opsys=decosf3-2 ;;
  *-dec-osf3*                ) opsys=decosf3-1 ;;
  *-dec-osf[4-9]*          ) opsys=decosf4-0 ;;

    *-*-ultrix[0-3].* | *-*-ultrix4.0* ) opsys=bsd4-2 ;;
  *-*-ultrix4.[12]* ) opsys=bsd4-3 ;;
  *-*-ultrix* )         opsys=ultrix4-3 ;;

    *-*-aix3.1*     ) opsys=aix3-1   ;;
  *-*-aix3.2.5    ) opsys=aix3-2-5 ;;
  *-*-aix3*       ) opsys=aix3-2   ;;
  *-*-aix4.0*     ) opsys=aix4	   ;;
  *-*-aix4.1*     ) opsys=aix4-1   ;;
  *-*-aix[4-9]* ) opsys=aix4-2   ;;

    *-gnu* )			opsys=gnu    ;;
  *-*-bsd4.[01] )		opsys=bsd4-1 ;;
  *-*-bsd4.2 )			opsys=bsd4-2 ;;
  *-*-bsd4.3 )			opsys=bsd4-3 ;;
  *-*-aos4.2 )			opsys=bsd4-2 ;;
  *-*-aos*   )			opsys=bsd4-3 ;;
  *-*-sysv0    | *-*-sysvr0 )	opsys=usg5-0 ;;
  *-*-sysv2    | *-*-sysvr2 )	opsys=usg5-2 ;;
  *-*-sysv2.2  | *-*-sysvr2.2 )	opsys=usg5-2-2 ;;
  *-*-sysv3*   | *-*-sysvr3* )	opsys=usg5-3 ;;
  *-*-sysv4.1* | *-*-sysvr4.1* )opsys=usg5-4 NON_GNU_CPP=/usr/lib/cpp ;;
  *-*-sysv4.[2-9]* | *-sysvr4.[2-9]* )
	if test -z "$NON_GNU_CPP" ; then
	  for prog in "/usr/ccs/lib/cpp" "/lib/cpp"; do
	    if test -f "$prog"; then NON_GNU_CPP="$prog"; break; fi
	  done
	fi
	opsys=usg5-4-2 ;;
    *-sysv4* | *-sysvr4* )	opsys=usg5-4 ;;
    *-*-mach_bsd4.3* )          opsys=mach-bsd4-3 ;;
esac

case "$canonical" in

    *-*-netbsd* )
    case "$canonical" in
      i[3-9]86-*-netbsd*) machine=intel386 ;;
      hp300-*-netbsd* | amiga-*-netbsd* | sun3-*-netbsd* | mac68k-*-netbsd* | da30-*-netbsd* | m68k-*-netbsd* )
                                            machine=hp9000s300 ;;
      pc532-*-netbsd* | ns32k-*-netbsd* )  machine=ns32000 ;;
      pmax-*-netbsd*  | mips-*-netbsd*  )  machine=pmax ;;
    esac
  ;;

    *-*-openbsd* )
    case "${canonical}" in
      i386-*-openbsd*)		machine=intel386 ;;
      m68k-*-openbsd*)		machine=hp9000s300 ;;
      mipsel-*-openbsd*)	machine=pmax ;;
     esac
   ;;

    arm-acorn-riscix1.1* ) machine=acorn opsys=riscix1-1 ;;
  arm-acorn-riscix1.2* | arm-acorn-riscix ) machine=acorn opsys=riscix1-2 ;;

    fx80-alliant-* ) machine=alliant4     opsys=bsd4-2 ;;
  i860-alliant-* ) machine=alliant-2800 opsys=bsd4-3 ;;

    m68*-altos-sysv* ) machine=altos opsys=usg5-2 ;;

    580-amdahl-sysv* ) machine=amdahl opsys=usg5-2-2 ;;

    m68*-apollo-* ) machine=apollo opsys=bsd4-3 ;;

    we32k-att-sysv* ) machine=att3b opsys=usg5-2-2 ;;

    m68*-att-sysv* ) machine=7300 opsys=usg5-2-2 ;;

    rs6000-bull-bosx* ) machine=ibmrs6000 opsys=aix3-2 ;; # dpx20
  m68*-bull-sysv3*  ) machine=dpx2      opsys=usg5-3 ;; # dpx2
  m68*-bull-sysv2*  ) machine=sps7      opsys=usg5-2 ;; # sps7

  
    celerity-celerity-bsd* ) machine=celerity opsys=bsd4-2 ;;

    *-convex-bsd* | *-convex-convexos* )
    machine=convex opsys=bsd4-3
    NON_GNU_CPP="cc -E -P"
  ;;

    i[3-9]86-cubix-sysv* ) machine=intel386 opsys=usg5-3 ;;

    *-*-darwin*)
    opsys=darwin
    RANLIB="ranlib -c"     ;;

    i586-dg-dgux*R4*   | i586-dg-dgux5.4.4* ) machine=aviion opsys=dgux5-4r4 ;;
  m88k-dg-dgux5.4R3* | m88k-dg-dgux5.4.3* ) opsys=dgux5-4r3 ;;
  m88k-dg-dgux5.4R2* | m88k-dg-dgux5.4.2* ) opsys=dgux5-4r2 ;;
  m88k-dg-dgux* 			  ) opsys=dgux	   ;;

    m68k-motorola-sysv* | m68000-motorola-sysv* ) machine=delta opsys=usg5-3 ;;
  m88k-motorola-sysv4* )
                    machine=delta88k opsys=usg5-4-2
  ;;
  m88k-motorola-sysv* | m88k-motorola-m88kbcs* ) machine=delta88k opsys=usg5-3 ;;

    m68*-dual-sysv*    ) machine=dual opsys=usg5-2   ;;
  m68*-dual-uniplus* ) machine=dual opsys=unipl5-2 ;;

    ns16k-encore-bsd* ) machine=ns16000 opsys=umax ;;

    pn-gould-bsd4.2* ) machine=gould     opsys=bsd4-2 ;;
  pn-gould-bsd4.3* ) machine=gould     opsys=bsd4-3 ;;
  np1-gould-bsd* )   machine=gould-np1 opsys=bsd4-3 ;;

      m88k-harris-cxux* )
        case "`uname -r`" in
       [56].[0-9] ) machine=nh4000 opsys=cxux  ;;
       [7].[0-9]  ) machine=nh4000 opsys=cxux7 ;;
    esac
    NON_GNU_CPP="/lib/cpp"
  ;;
    m68k-harris-cxux* ) machine=nh3000 opsys=cxux ;;
    powerpc-harris-powerunix ) machine=nh6000 opsys=powerunix NON_GNU_CPP="cc -Xo -E -P" ;;

    xps*-honeywell-sysv* ) machine=xps100 opsys=usg5-2 ;;

    m68*-hp-bsd* ) machine=hp9000s300 opsys=bsd4-3 ;;

    *-hp-hpux* )
        case "$canonical" in
      m68*  ) machine=hp9000s300 ;;
      hppa* ) machine=hp800      ;;
    esac

    case "$canonical" in
      *-hp-hpux7*  )  opsys=hpux   ;;
      *-hp-hpux8*  )  opsys=hpux8  ;;
      *-hp-hpux9*  )  opsys=hpux9  ;;
      *-hp-hpux10* )  opsys=hpux10 ;;
      *-hp-hpux11* )  opsys=hpux11 ;;
      *            )  opsys=hpux   ;;
    esac

        case "$opsys" in hpux9 | hpux10 ) extra_objs="$extra_objs strcat.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"strcat.o\""
 fi ;; esac

    if test "$opsys" = "hpux10" -o "$opsys" = "hpux11"; then \
	ansi_flag="-Ae"; else ansi_flag="-Aa"; fi
    NON_GNU_CC="cc $ansi_flag" NON_GNU_CPP="cc $ansi_flag -E"

    case "$canonical" in *-hp-hpux*shr* ) opsys="${opsys}-shr" ;; esac
  ;;

    orion-orion-bsd*   ) machine=orion    opsys=bsd4-2 ;;
  clipper-orion-bsd* ) machine=orion105 opsys=bsd4-2 ;;

    i[3-9]86-ibm-aix1.1* ) machine=ibmps2-aix opsys=usg5-2-2 ;;
  i[3-9]86-ibm-aix1.[23]* | i[3-9]86-ibm-aix* ) machine=ibmps2-aix opsys=usg5-3 ;;
  i370-ibm-aix*) machine=ibm370aix opsys=usg5-3 ;;
  romp-ibm-aos*    ) opsys=bsd4-3 ;;
  romp-ibm-bsd*    ) opsys=bsd4-3 ;;
  romp-ibm-mach*   ) opsys=mach-bsd4-3 ;;

    m68*-isi-bsd4.2* ) machine=isi-ov opsys=bsd4-2 ;;
  m68*-isi-bsd4.3* ) machine=isi-ov opsys=bsd4-3 ;;

    i[3-9]86-intsys-sysv* ) machine=is386 opsys=usg5-2-2 ;;

    i[3-9]86-prime-sysv* ) machine=i386 opsys=usg5-3 ;;

    i[3-9]86-sequent-bsd* ) machine=symmetry opsys=bsd4-3 ;;

    i[3-9]86-sequent-ptx* ) machine=sequent-ptx opsys=ptx NON_GNU_CPP="/lib/cpp" ;;

      i[3-9]86-ncr-sysv* ) machine=ncr386 opsys=usg5-4-2 ;;

    i860-intel-osf1* ) machine=paragon opsys=osf1 NON_GNU_CPP=/usr/mach/lib/cpp ;;

    i860-*-sysv4* ) machine=i860 opsys=usg5-4 NON_GNU_CC="/bin/cc" NON_GNU_CPP="/usr/ccs/lib/cpp" ;;

    m68*-masscomp-rtu* ) machine=masscomp opsys=rtu ;;

    m68*-megatest-bsd* ) machine=mega68 opsys=bsd4-2 ;;

        mips-mips-usg* ) machine=mips4 ;;
  mips-mips-riscos4 )
    machine=mips4
    NON_GNU_CC="cc -systype bsd43"
    NON_GNU_CPP="cc -systype bsd43 -E"
    case "$canonical" in
      mips-mips-riscos4* ) opsys=bsd4-3  ;;
      mips-mips-riscos5* ) opsys=riscos5 ;;
    esac
  ;;
  mips-mips-bsd* ) machine=mips opsys=bsd4-3 ;;
  mips-mips-*    ) machine=mips opsys=usg5-2-2 ;;

    m68*-next-* | m68k-*-nextstep* ) machine=m68k opsys=nextstep ;;

    ns32k-ns-genix* ) machine=ns32000 opsys=usg5-2 ;;

    m68*-ncr-sysv2* | m68*-ncr-sysvr2* ) machine=tower32   opsys=usg5-2-2 ;;
  m68*-ncr-sysv3* | m68*-ncr-sysvr3* ) machine=tower32v3 opsys=usg5-3 ;;

    m68*-nixdorf-sysv* ) machine=targon31 opsys=usg5-2-2 ;;

    m68*-nu-sysv* ) machine=nu opsys=usg5-2 ;;

    m68*-plexus-sysv* ) machine=plexus opsys=usg5-2 ;;

    pyramid-pyramid-bsd* ) machine=pyramid opsys=bsd4-2 ;;

    ns32k-sequent-bsd4.2* ) machine=sequent opsys=bsd4-2 ;;
  ns32k-sequent-bsd4.3* ) machine=sequent opsys=bsd4-3 ;;

    mips-siemens-sysv* | mips-sni-sysv*)
    machine=mips-siemens opsys=usg5-4
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/lib/cpp
  ;;

    mips-nec-sysv*)
    machine=mips-nec
    NON_GNU_CC=/usr/ccs/bin/cc
    NON_GNU_CPP=/usr/ccs/lib/cpp
  ;;

      m68*-sgi-iris3.5* ) machine=irist opsys=iris3-5 ;;
  m68*-sgi-iris3.6* | m68*-sgi-iris*) machine=irist opsys=iris3-6 ;;
    mips-sgi-irix3.*    ) opsys=irix3-3 ;;
  mips-sgi-irix4.*    ) opsys=irix4-0 ;;
  mips-sgi-irix6*     ) opsys=irix6-0 ;;
  mips-sgi-irix5.1*   ) opsys=irix5-1 ;;
  mips-sgi-irix5.2*   ) opsys=irix5-2 ;;
  mips-sgi-irix5.*    ) opsys=irix5-3 ;;
  mips-sgi-irix*      ) opsys=irix5-0 ;;

    *-sony-newsos[34]* | *-sony-news[34]* ) opsys=bsd4-3 ;;
  *-sony-news* ) opsys=newsos5 ;;

    m68*-stride-sysv* ) machine=stride opsys=usg5-2 ;;

    *-*-solaris* | *-*-sunos* | *-sun-mach* | *-sun-bsd* )
        case "$canonical" in
      m68*-sunos1* )	         machine=sun1     ;;
      m68*-sunos2* )	         machine=sun2     ;;
      m68* )		         machine=sun3     ;;
      i*86*-sun-sunos[34]* )   machine=sun386   ;;
      i*86-*-* )	         machine=intel386 ;;
      rs6000* )                  machine=rs6000   ;;
    esac

        case "$canonical" in *-sunos5*)
      canonical=`echo $canonical | sed -e s/sunos5/solaris2/`;;
    esac

                    case "$canonical" in
      *-sunos4* )
	#test -f /usr/lib/cpp     && NON_GNU_CPP=/usr/lib/cpp ;;
	: ;;
      *-solaris2* )
	#test -f /usr/ccs/lib/cpp && NON_GNU_CPP=/usr/ccs/lib/cpp
	RANLIB=':' ;;
    esac

    case "$canonical" in
      *-solaris* )
	opsys=sol2
	os_release_major=`uname -r | sed -e 's/^\([0-9]\{1,\}\)\.\([0-9]\{1,\}\).*/\1/'`
	os_release_minor=`uname -r | sed -e 's/^\([0-9]\{1,\}\)\.\([0-9]\{1,\}\).*/\2/'`
	case "$os_release_minor" in [0-9])
	  os_release_minor="0${os_release_minor}";;
	esac
	os_release="${os_release_major}${os_release_minor}"
	{ test "$extra_verbose" = "yes" && cat << EOF
    Defining OS_RELEASE = $os_release
EOF
cat >> confdefs.h <<EOF
#define OS_RELEASE $os_release
EOF
}
 ;;

            i*86-*-sunos4*      ) opsys=sunos4-0	;;
      *-sunos4.0*	  ) opsys=sunos4-0	;;
      *-sunos4.1.2*	  ) opsys=sunos4-1-2	;;
      *-sunos4.1.3*	  ) opsys=sunos4-1-3	;;
      *-sunos4.1.[4-9]* ) opsys=sunos4-1-4	;;
      *-sunos4* | *-sunos ) opsys=sunos4-1	;;
      *-mach*		  ) opsys=mach-bsd4-3	;;
      *			  ) opsys=bsd4-2	;;
    esac

    case "$canonical" in *-sunos4*shr* ) opsys="${opsys}-shr" ;; esac

        test "$opsys $CC" = "sol2 /usr/ucb/cc" && CC=""
  ;;

    m68*-tadpole-sysv* ) machine=tad68k opsys=usg5-3 ;;

    tahoe-tahoe-bsd4.2* ) machine=tahoe opsys=bsd4-2 ;;
  tahoe-tahoe-bsd4.3* ) machine=tahoe opsys=bsd4-3 ;;

    mips-tandem-sysv* ) machine=tandem-s2 opsys=usg5-3 ;;

    m88k-tektronix-sysv3* ) machine=tekxd88 opsys=usg5-3 ;;

    ns16k-tektronix-bsd* ) machine=ns16000 opsys=bsd4-2 ;;
      m68*-tektronix-bsd* ) machine=tek4300 opsys=bsd4-3 ;;

    titan-titan-sysv* ) machine=titan opsys=usg5-3 ;;

    m68*-unisys-uniplus* ) machine=ustation opsystem=unipl5-2 ;;

    vax-dec-* )
    case "$canonical" in
      *-sysv[01]* | *-sysvr[01]* ) 	opsys=usg5-0 ;;
      *-sysv2* | *-sysvr2* )		opsys=usg5-2 ;;
      *-mach* )				opsys=mach-bsd4-3 ;;
    esac
  ;;

    ns16k-whitechapel-* ) machine=mg1 ;;

    m68*-wicat-sysv* ) machine=wicat opsys=usg5-2 ;;

    i[3-9]86-*-* )
    machine=intel386
    case "$canonical" in
      *-isc1.* | *-isc2.[01]* ) opsys=386-ix ;;
      *-isc2.2* )		opsys=isc2-2 ;;
      *-isc4.0* )		opsys=isc4-0 ;;
      *-isc4.* )		opsys=isc4-1
				GCC_TEST_OPTIONS=-posix
				NON_GCC_TEST_OPTIONS=-Xp
				;;
      *-isc* )			opsys=isc3-0 ;;
      *-esix5* )		opsys=esix5r4 NON_GNU_CPP=/usr/lib/cpp ;;
      *-esix* )			opsys=esix ;;
      *-mach* )			opsys=mach-bsd4-3 ;;
      *-xenix* )		opsys=xenix ;;
      *-sco3.2v4* )		opsys=sco4 NON_GNU_CPP=/lib/cpp  ;;
      *-bsd386* | *-bsdi1* )	opsys=bsd386 ;;
      *-bsdi4* )		opsys=bsdos4 ;;
      *-bsdi3* )		opsys=bsdos3 ;;
      *-bsdi2.1* )		opsys=bsdos2-1 ;;
      *-bsdi2* )		opsys=bsdos2 ;;
      *-sco3.2v5* )		opsys=sco5 ;;
      *-sysv5* )		opsys=sco7 ;;
      *-386bsd* )	        opsys=386bsd ;;
      *-freebsd* )		opsys=freebsd ;;
      *-nextstep* )		opsys=nextstep ;;
      *-pc-cygwin* )		opsys=cygwin32 ;;
      *-pc-mingw* )		opsys=mingw32 ;
				test -z "$with_tty" && with_tty="no";;
          esac
  ;;

    m68k-*-linux* ) machine=m68k opsys=linux ;;

esac

test -z "$machine" && machine=`echo $canonical | sed 's/-.*$//'`

test -z "$opsys"   && opsys=`uname -s | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`

if test -r "${srcdir}/src/m/${machine}.h"; then
  machfile="m/${machine}.h"
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining config_machfile = "$machfile"
EOF
cat >> confdefs.h <<EOF
#define config_machfile "$machfile"
EOF
}

else
  echo "XEmacs has no builtin knowledge of \`$machine' machines."
  echo "Using configure-time autodetection only."
fi

if test -r "${srcdir}/src/s/${opsys}.h"; then
  opsysfile="s/${opsys}.h"
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining config_opsysfile = "$opsysfile"
EOF
cat >> confdefs.h <<EOF
#define config_opsysfile "$opsysfile"
EOF
}

else
  echo "XEmacs has no builtin knowledge of \`$opsys' operating systems."
  echo "Using configure-time autodetection only."
fi


if test -z "$pdump"; then
  case "$opsys" in
    linux* )  pdump=yes ;;        darwin )  pdump=yes ;;        cygwin* ) pdump=yes ;;        *)        pdump=no ;;
  esac
fi

if test -z "$dynamic"; then
  case "$opsys" in
    hpux* | sunos4* ) dynamic=no ;;
    *) dynamic=yes ;;
  esac
fi
if test "$dynamic" = "yes"; then
  case "$opsys" in
    hpux* | sunos4* | sco5 ) opsys="${opsys}-shr" ;;
    decosf* ) ld_call_shared="-call_shared" ;;
    darwin ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DLSYM_NEEDS_UNDERSCORE
EOF
cat >> confdefs.h <<\EOF
#define DLSYM_NEEDS_UNDERSCORE 1
EOF
}
 ;;
  esac
else   case "$opsys" in
    sol2 )
      echo "Static linking is not supported on Solaris 2."
      echo "Rerun configure without specifying --dynamic=no."
      exit 1 ;;
    linux   ) ld_call_shared="-Bstatic" ;;
    decosf* ) ld_call_shared="-non_shared" ;;
  esac
fi

case "$opsys" in aix*) NON_GNU_CC=xlc ;; esac

stack_trace_eye_catcher=`echo ${PROGNAME}_${version}_${canonical} | sed 'y/.-/__/'`
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining STACK_TRACE_EYE_CATCHER = $stack_trace_eye_catcher
EOF
cat >> confdefs.h <<EOF
#define STACK_TRACE_EYE_CATCHER $stack_trace_eye_catcher
EOF
}



test "$with_sparcworks" = "yes" && with_workshop=yes # compatibility alias
if test "$with_workshop $with_tooltalk" = "yes no"; then
  (echo "$progname: Usage error:"
echo " " "--with-workshop requires --with-tooltalk"
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
elif test "$with_tooltalk" = "no" ; then with_workshop=no
elif test "$with_workshop" = "yes"; then with_tooltalk=yes
fi

if test "$with_workshop" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SUNPRO
EOF
cat >> confdefs.h <<\EOF
#define SUNPRO 1
EOF
}

  extra_objs="$extra_objs sunpro.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunpro.o\""
 fi
fi

if test "$with_clash_detection" != "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining CLASH_DETECTION
EOF
cat >> confdefs.h <<\EOF
#define CLASH_DETECTION 1
EOF
}

  extra_objs="$extra_objs filelock.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"filelock.o\""
 fi
fi

test -n "$compiler" && CC="$compiler"
if test "$with_gcc" = "no"; then   case "$CC" in "" | *gcc* ) CC="${NON_GNU_CC-cc}" ;; esac
fi

test "${cflags-unset}" != unset && CFLAGS="$cflags"
if test "${CFLAGS-unset}" != unset
  then cflags_specified=yes;
  else cflags_specified=no;
fi

xe_save_CFLAGS="$CFLAGS"

# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1662: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1689: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1737: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1766: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext << EOF

#line 1779 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1784: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1812: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1817: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1824: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1842: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi
 
if   test "$with_gcc" = "no"  -a "$GCC" = "yes"; then
  CC=${NON_GNU_CC-cc}
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1875: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1902: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1950: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1979: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext << EOF

#line 1992 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1997: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2025: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2030: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2037: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2055: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

elif test "$with_gcc" = "yes" -a "$GCC" != "yes" ; then
  CC=gcc
  # Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2088: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2115: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2163: checking for $ac_word" >&5

if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:2192: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

cat > conftest.$ac_ext << EOF

#line 2205 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:2210: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
xe_cppflags='$CPPFLAGS $c_switch_site $c_switch_machine $c_switch_system $c_switch_x_site $X_CFLAGS'
xe_ldflags='$LDFLAGS $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_x_site $ld_switch_run'
xe_libs='$ld_call_shared $xe_check_libs $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS $LIBS $libs_machine $libs_system $libs_standard'
ac_cpp='$CPP '"$xe_cppflags"
ac_compile='${CC-cc} -c $CFLAGS '"$xe_cppflags"' conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
cross_compiling=no

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:2238: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:2243: checking whether we are using GNU C" >&5

cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:2250: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:2268: checking whether ${CC-cc} accepts -g" >&5

echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

fi
CFLAGS="$xe_save_CFLAGS"


test -n "$CPP" -a -d "$CPP" && CPP=

test -n "$NON_GNU_CPP" -a "$GCC" != "yes" -a -z "$CPP" && CPP="$NON_GNU_CPP"

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:2305: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then

  # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 2318 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2324: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 2335 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2341: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 2352 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:2358: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6



echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:2384: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 2386 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _ALL_SOURCE
EOF
cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF
}

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

 

echo $ac_n "checking for GNU libc""... $ac_c" 1>&6
echo "configure:2413: checking for GNU libc" >&5
cat > conftest.$ac_ext <<EOF
#line 2415 "configure"
#include "confdefs.h"
#include <features.h>
int main() {

#if ! (defined __GLIBC__ || defined __GNU_LIBRARY__)
#error Not a GNU libc system :-(
******* ======= ******** &&&&&&&&
#endif

; return 0; }
EOF
if { (eval echo configure:2427: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  have_glibc=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  have_glibc=no
fi
rm -f conftest*
echo "$ac_t""$have_glibc" 1>&6
test "$have_glibc" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _GNU_SOURCE
EOF
cat >> confdefs.h <<\EOF
#define _GNU_SOURCE 1
EOF
}


case "$opsys" in
  sol2)
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining __EXTENSIONS__
EOF
cat >> confdefs.h <<\EOF
#define __EXTENSIONS__ 1
EOF
}

      if test "$os_release" -ge 505; then
     { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _XOPEN_SOURCE = 500
EOF
cat >> confdefs.h <<\EOF
#define _XOPEN_SOURCE 500
EOF
}

     { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _XOPEN_SOURCE_EXTENDED
EOF
cat >> confdefs.h <<\EOF
#define _XOPEN_SOURCE_EXTENDED 1
EOF
}

   fi ;;
  linux)
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _POSIX_C_SOURCE = 199506L
EOF
cat >> confdefs.h <<\EOF
#define _POSIX_C_SOURCE 199506L
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _XOPEN_SOURCE = 500
EOF
cat >> confdefs.h <<\EOF
#define _XOPEN_SOURCE 500
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _XOPEN_SOURCE_EXTENDED
EOF
cat >> confdefs.h <<\EOF
#define _XOPEN_SOURCE_EXTENDED 1
EOF
}

    ;;
esac

cat > conftest.$ac_ext <<EOF
#line 2504 "configure"
#include "confdefs.h"
int main () {
#if defined __SUNPRO_C
return 11;
#elif defined __DECC
return 12;
#elif defined __USLC__ && defined __SCO_VERSION__
return 13;
#elif defined __INTEL_COMPILER
return 14;
#else
return 0;
#endif
}
EOF
if { (eval echo configure:2520: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  case "$conftest_rc" in
  11) echo "You appear to be using the SunPro C compiler." ; __SUNPRO_C=yes ;;
  12) echo "You appear to be using the DEC C compiler."    ; __DECC=yes ;;
  13) echo "You appear to be using the SCO C compiler."    ; __USLC__=yes ;;
  14) echo "You appear to be using the Intel C++ compiler."; __ICC=yes
            GCC=no ;;
esac
fi
rm -fr conftest*




echo "Extracting information from the machine- and system-dependent headers..."

tempcname="conftest.c"



cat > $tempcname < confdefs.h
cat >> $tempcname <<EOF
#define NOT_C_CODE
#define C_SWITCH_SITE
#define C_SWITCH_X_SITE
#define LD_SWITCH_SITE
#define LD_SWITCH_X_SITE
#define LD_SWITCH_X_SITE_AUX
#define OS_RELEASE $os_release

#ifdef config_opsysfile
#include "$srcdir/src/$opsysfile"
#endif

#ifdef config_machfile
#include "$srcdir/src/$machfile"
#endif

#ifndef LIBS_MACHINE
#define LIBS_MACHINE
#endif
configure___ libs_machine=LIBS_MACHINE

#ifndef LIBS_SYSTEM
#define LIBS_SYSTEM
#endif
configure___ libs_system=LIBS_SYSTEM

#ifndef LIBS_TERMCAP
#define LIBS_TERMCAP
#endif
configure___ libs_termcap=LIBS_TERMCAP

#ifndef LIB_STANDARD
#define LIB_STANDARD
#endif
configure___ libs_standard=LIB_STANDARD


#ifndef OBJECTS_MACHINE
#define OBJECTS_MACHINE
#endif
configure___ objects_machine=OBJECTS_MACHINE

#ifndef OBJECTS_SYSTEM
#define OBJECTS_SYSTEM
#endif
configure___ objects_system=OBJECTS_SYSTEM


#ifndef C_SWITCH_MACHINE
#define C_SWITCH_MACHINE
#endif
configure___ c_switch_machine=C_SWITCH_MACHINE

#ifndef C_SWITCH_SYSTEM
#define C_SWITCH_SYSTEM
#endif
configure___ c_switch_system=C_SWITCH_SYSTEM


#ifndef LD_SWITCH_MACHINE
#define LD_SWITCH_MACHINE
#endif
configure___ ld_switch_machine=LD_SWITCH_MACHINE

#ifndef LD_SWITCH_SYSTEM
#define LD_SWITCH_SYSTEM
#endif
configure___ ld_switch_system=LD_SWITCH_SYSTEM


#ifndef UNEXEC
#define UNEXEC "unexec.o"
#endif
configure___ unexec=UNEXEC


#ifndef LD_SWITCH_SHARED
#define LD_SWITCH_SHARED "-c"
#endif
configure___ ld_switch_shared=LD_SWITCH_SHARED


#define ORDINARY_LD "\$(CC) \$(CFLAGS)"
configure___ ordinary_ld=ORDINARY_LD

#ifdef ORDINARY_LINK
#define LD ORDINARY_LD
#else /* no ORDINARY LINK */
#ifdef COFF_ENCAPSULATE
#define LD "\$(CC) -nostdlib"
#else /* not COFF_ENCAPSULATE */
#ifdef LINKER
#define LD LINKER
#else /* ! defined (LINKER) */
#define LD "ld"
#endif /* ! defined (LINKER) */
#endif /* ! defined (COFF_ENCAPSULATE) */
#endif /* not ORDINARY_LINK */
configure___ ld=LD

#ifndef LIB_GCC
#define LIB_GCC
#endif
configure___ lib_gcc=LIB_GCC

#ifndef LD_TEXT_START_ADDR
#define LD_TEXT_START_ADDR
#endif
configure___ ld_text_start_addr=LD_TEXT_START_ADDR


#if ! defined (ORDINARY_LINK) && !defined (START_FILES)
#ifdef NO_REMAP
#ifdef COFF_ENCAPSULATE
#define START_FILES "pre-crt0.o /usr/local/lib/gcc-crt0.o"
#else /* ! defined (COFF_ENCAPSULATE) */
#define START_FILES "pre-crt0.o /lib/crt0.o"
#endif /* ! defined (COFF_ENCAPSULATE) */
#else /* ! defined (NO_REMAP) */
#define START_FILES "ecrt0.o"
#endif /* ! defined (NO_REMAP) */
#endif /* no ORDINARY_LINK */
#ifndef START_FILES
#define START_FILES
#endif
configure___ start_files=START_FILES

#ifdef ORDINARY_LINK
configure___ ordinary_link=yes
#else
configure___ ordinary_link=no
#endif

#ifdef SYSTEM_MALLOC
configure___ system_malloc=yes
#else
configure___ system_malloc=no
#endif

#ifdef TERMINFO
configure___ have_terminfo=yes
#else
configure___ have_terminfo=no
#endif

#ifdef MAIL_USE_FLOCK
configure___ mail_use_flock=yes
#else
configure___ mail_use_flock=no
#endif

#ifdef MAIL_USE_LOCKF
configure___ mail_use_lockf=yes
#else
configure___ mail_use_lockf=no
#endif

#ifdef MAIL_USE_LOCKING
configure___ mail_use_locking=yes
#else
configure___ mail_use_locking=no
#endif

#ifdef HAVE_WIN32_PROCESSES
configure___ win32_processes=yes
#else
configure___ win32_processes=no
#endif

EOF

CPP=`eval "echo $CPP $CPPFLAGS"`
eval `$CPP -Isrc $tempcname \
	| sed -n -e "s/[ 	]*=[ 	\"]*/='/" -e "s/[ 	\"]*\$/'/" -e "s/^configure___//p"`

rm $tempcname

if test "$pdump" = "yes"; then
  ordinary_link="yes"
  ld="${ordinary_ld}"
  start_files=
  libs_standard=
  unexec=
  lib_gcc=
fi

test "$extra_verbose" = "yes" && \
  for var in libs_machine libs_system libs_termcap libs_standard   objects_machine objects_system c_switch_machine c_switch_system   ld_switch_machine ld_switch_system unexec ld_switch_shared   ld lib_gcc ld_text_start_addr start_files ordinary_link   have_terminfo mail_use_flock mail_use_lockf; do eval "echo \"$var = '\$$var'\""; done && echo ""

case "$opsys" in mingw* | cygwin*)
  cygwin_include=`eval gcc -print-search-dirs | sed -ne s'/install: //p'`
  cygwin_include=`eval "cd $cygwin_include/../../../..; pwd"`
  cygwin_include="-I$cygwin_include/include" ;
  extra_includes="$cygwin_include/mingw $cygwin_include" ;
  case "$opsys" in mingw*)
    c_switch_system="$c_switch_system $extra_includes" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$extra_includes\" to \$c_switch_system"; fi ;;
  esac
  ;;
esac

test "$ordinary_link" = "no" -a -z "$libs_standard" && libs_standard="-lc"


test "$__DECC" = "yes" && c_switch_site="$c_switch_site -std1" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-std1\" to \$c_switch_site"; fi

if test "$__USLC__" = yes; then
  echo $ac_n "checking for whether the -Kalloca compiler flag is needed""... $ac_c" 1>&6
echo "configure:2756: checking for whether the -Kalloca compiler flag is needed" >&5
  need_kalloca=no
  cat > conftest.$ac_ext <<EOF
#line 2759 "configure"
#include "confdefs.h"

int main() {
void *x = alloca(4);
; return 0; }
EOF
if { (eval echo configure:2766: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    xe_save_c_switch_system="$c_switch_system"
    c_switch_system="$c_switch_system -Kalloca"
    cat > conftest.$ac_ext <<EOF
#line 2777 "configure"
#include "confdefs.h"

int main() {
void *x = alloca(4);
; return 0; }
EOF
if { (eval echo configure:2784: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
   need_kalloca=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
    c_switch_system="$xe_save_c_switch_system"
fi
rm -f conftest*
  echo "$ac_t""$need_kalloca" 1>&6
  test "$need_kalloca" = "yes" && c_switch_system="$c_switch_system -Kalloca" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-Kalloca\" to \$c_switch_system"; fi
fi

if test "$cflags_specified" = "no"; then
      if   test "$GCC" = "yes"; then
    CFLAGS="-g -O3 -Wall -Wno-switch -Winline -Wmissing-prototypes"
        CFLAGS="$CFLAGS -Wsign-compare"
        case "`gcc -v --help 2>&1`" in
      *-fstrict-aliasing* ) CFLAGS="$CFLAGS -fno-strict-aliasing" ;;
    esac
                if test "$xemacs_compiler" != "g++"; then
      CFLAGS="$CFLAGS -Wshadow"
    fi
            test "$have_glibc" != "yes" && CFLAGS="$CFLAGS -Wpointer-arith"
              elif test "$__SUNPRO_C" = "yes"; then
    case "$opsys" in
      sol2    ) CFLAGS="-v -xO4" ;;
      sunos4* ) CFLAGS="-xO2";;
    esac
  elif test "$__DECC" = "yes"; then
    CFLAGS="-O3"
  elif test "$CC" = "xlc"; then
    CFLAGS="-g -O3 -qstrict -qnoansialias -qlibansi -qinfo -qro -qmaxmem=20000"
  elif test "$__ICC" = "yes"; then
    CFLAGS="-g -O3 -Ob2 -Wall -W1"
    else
    CFLAGS="-O" ;  fi
fi

if test "$GCC" = "yes"; then
echo $ac_n "checking for buggy gcc versions""... $ac_c" 1>&6
echo "configure:2827: checking for buggy gcc versions" >&5
GCC_VERSION=`$CC --version`
case `uname -s`:`uname -m`:$GCC_VERSION in
		    *:sun4*:2.8.1|*:sun4*:egcs-2.90.*)
                        case "$CFLAGS" in
            *-O2*|*-O3*)
                case "$CFLAGS" in
                    *-fno-schedule-insns*) ;;
                    *)
                        echo "$ac_t""yes" 1>&6
                        echo "configure: warning: Don't use -O2 with gcc 2.8.1 and egcs 1.0 under SPARC architectures" 1>&2
                        echo "configure: warning: without also using -fno-schedule-insns." 1>&2
                        { echo "configure: error: Aborting due to known problem" 1>&2; exit 1; }
                        ;;
                esac
                ;;
        esac
        ;;
		    Linux:alpha:egcs-2.91.*)
        echo "$ac_t""yes" 1>&6
        echo "configure: warning: There have been reports of egcs-1.1 not compiling XEmacs correctly on" 1>&2
        echo "configure: warning: Alpha Linux.  There have also been reports that egcs-1.0.3a is O.K." 1>&2
        { echo "configure: error: Aborting due to known problem" 1>&2; exit 1; }
        ;;
    *:i*86*:2.7.2*)
	case "$CFLAGS" in
            *-O2*|*-O3*)
		case "$GCC_VERSION" in
		    2.7.2)
                	case "$CFLAGS" in
	                    *-fno-strength-reduce*) ;;
        	            *)
                                echo "$ac_t""yes" 1>&6
                      	        echo "configure: warning: Don't use -O2 with gcc 2.7.2 under Intel/XXX without also using" 1>&2
	                        echo "configure: warning: -fno-strength-reduce." 1>&2
        	                { echo "configure: error: Aborting due to known problem" 1>&2; exit 1; }
	                        ;;
	                esac
	                ;;
		esac
	        case "$CFLAGS" in
		 *-fno-caller-saves*) ;;
		 *)
	            echo "$ac_t""yes" 1>&6
		    echo "configure: warning: Don't use -O2 with gcc 2.7.2 under Intel/XXX without also using" 1>&2
		    echo "configure: warning: -fno-caller-saves." 1>&2
	            { echo "configure: error: Aborting due to known problem" 1>&2; exit 1; }
		    ;;
	        esac
		;;
	esac
	;;
esac
echo "$ac_t""no" 1>&6
fi

if test "$pdump" != "yes"; then
  echo $ac_n "checking for \"-z nocombreloc\" linker flag""... $ac_c" 1>&6
echo "configure:2885: checking for \"-z nocombreloc\" linker flag" >&5
  case "`ld --help 2>&1`" in
    *-z\ nocombreloc* ) echo "$ac_t""yes" 1>&6
      ld_switch_site="-z nocombreloc $ld_switch_site" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-z nocombreloc\" to \$ld_switch_site"; fi ;;
    *) echo "$ac_t""no" 1>&6 ;;
  esac
fi



if test "$GCC" = "yes"; then
  set x $ld_switch_system; shift; ld_switch_system=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_system="$ld_switch_system $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_system="$ld_switch_system $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_system="$ld_switch_system -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $ld_switch_machine; shift; ld_switch_machine=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_machine="$ld_switch_machine $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_machine="$ld_switch_machine $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_machine="$ld_switch_machine -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $ld_switch_site; shift; ld_switch_site=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_site="$ld_switch_site $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_site="$ld_switch_site $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_site="$ld_switch_site -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $LDFLAGS; shift; LDFLAGS=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) LDFLAGS="$LDFLAGS $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) LDFLAGS="$LDFLAGS $1" ;;
      -Xlinker* ) ;;
      * ) LDFLAGS="$LDFLAGS -Xlinker $1" ;;
    esac
    shift
  done
fi

if test "$GCC" = "yes"; then
  set x $ld_call_shared; shift; ld_call_shared=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_call_shared="$ld_call_shared $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_call_shared="$ld_call_shared $1" ;;
      -Xlinker* ) ;;
      * ) ld_call_shared="$ld_call_shared -Xlinker $1" ;;
    esac
    shift
  done
fi

test -n "$objects_machine" && extra_objs="$extra_objs $objects_machine" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$objects_machine\""
 fi
test -n "$objects_system"  && extra_objs="$extra_objs $objects_system" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$objects_system\""
 fi
test -n "$unexec"          && test ! "$pdump" = "yes" && extra_objs="$extra_objs $unexec" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$unexec\""
 fi
test "$pdump" = "yes" && extra_objs="$extra_objs dumper.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dumper.o\""
 fi

echo $ac_n "checking for dynodump""... $ac_c" 1>&6
echo "configure:2974: checking for dynodump" >&5
if test "$unexec" != "unexsol2.o"; then
  echo "$ac_t""no" 1>&6
else
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DYNODUMP
EOF
cat >> confdefs.h <<\EOF
#define DYNODUMP 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR dynodump" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dynodump\" to \$MAKE_SUBDIR"; fi
  SRC_SUBDIR_DEPS="$SRC_SUBDIR_DEPS dynodump" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dynodump\" to \$SRC_SUBDIR_DEPS"; fi
  case "$machine" in
    sparc   ) dynodump_arch=sparc ;;
    *86*    ) dynodump_arch=i386  ;;
    powerpc ) dynodump_arch=ppc   ;;
  esac
fi



if test "$unexec" = "unexaix.o"; then
  if   test "$dynamic" = "no"; then
  start_flags="-Wl,-bnso,-bnodelcsect"
  test "$GCC" = "yes" && start_flags="-B/bin/ ${start_flags}"
  for f in "/lib/syscalls.exp" "/lib/threads.exp"; do
    if test -r "$f"; then start_flags="${start_flags},-bI:${f}"; fi
  done
  for f in "/usr/lpp/X11/bin/smt.exp" "/usr/bin/X11/smt.exp"; do
    if test -r "$f"; then start_flags="${start_flags},-bI:${f}"; break; fi
  done
  
echo $ac_n "checking for terminateAndUnload in -lC""... $ac_c" 1>&6
echo "configure:3010: checking for terminateAndUnload in -lC" >&5
ac_lib_var=`echo C'_'terminateAndUnload | sed 'y%./+-%__p_%'`

xe_check_libs=" -lC "
cat > conftest.$ac_ext <<EOF
#line 3015 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char terminateAndUnload();

int main() {
terminateAndUnload()
; return 0; }
EOF
if { (eval echo configure:3026: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_system="$libs_system -lC" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lC\" to \$libs_system"; fi
else
  echo "$ac_t""no" 1>&6
fi


  fi
elif test -n "$ld_text_start_addr"; then
  start_flags="-T $ld_text_start_addr -e __start"
fi




if test "$ordinary_link" = "no" -a "$GCC" = "yes"; then
 test -z "$linker" &&  linker='$(CC) -nostdlib'
 test -z "$lib_gcc" && lib_gcc='`$(CC) -print-libgcc-file-name`'
fi
test "$GCC" != "yes" && lib_gcc=





case "$site_libraries" in *:* ) site_libraries="`echo '' $site_libraries | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_libraries"; then
  for arg in $site_libraries; do
    case "$arg" in
     -* ) ;;
     * ) test -d "$arg" || \
           { echo "Error:" "Invalid site library \`$arg': no such directory" >&2; exit 1; }
       arg="-L${arg}" ;;
    esac
    ld_switch_site="$ld_switch_site $arg" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$arg\" to \$ld_switch_site"; fi
  done
fi

case "$site_includes" in *:* ) site_includes="`echo '' $site_includes | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_includes"; then
  for arg in $site_includes; do
    case "$arg" in
      -* ) ;;
      * ) test -d "$arg" || \
           { echo "Error:" "Invalid site include \`$arg': no such directory" >&2; exit 1; }
      arg="-I${arg}" ;;
    esac
    c_switch_site="$c_switch_site $arg" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$arg\" to \$c_switch_site"; fi
  done
fi

case "$site_prefixes" in *:* ) site_prefixes="`echo '' $site_prefixes | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_prefixes"; then
  for dir in $site_prefixes; do
    lib_dir="${dir}/lib"
    inc_dir="${dir}/include"
    if test ! -d "$dir"; then
      { echo "Error:" "Invalid site prefix \`$dir': no such directory" >&2; exit 1; }
    elif test ! -d "$lib_dir"; then
      { echo "Error:" "Invalid site prefix \`$dir': no such directory \`$lib_dir'" >&2; exit 1; }
    else
      if test -d "$inc_dir"; then
	c_switch_site="$c_switch_site "-I$inc_dir"" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \""-I$inc_dir"\" to \$c_switch_site"; fi
      fi
      ld_switch_site="$ld_switch_site "-L$lib_dir"" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \""-L$lib_dir"\" to \$ld_switch_site"; fi
    fi
  done
fi


for dir in "/usr/ccs/lib"; do
  test -d "$dir" && ld_switch_system="$ld_switch_system -L${dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L${dir}\" to \$ld_switch_system"; fi
done

case "$site_runtime_libraries" in *:* ) site_runtime_libraries="`echo '' $site_runtime_libraries | sed -e 's/^ //' -e 's/:/ /g'`";; esac
if test -n "$site_runtime_libraries"; then
  LD_RUN_PATH="`echo $site_runtime_libraries | sed -e 's/  */:/g'`"
  export LD_RUN_PATH
fi





if test -n "$add_runtime_path"; then :;
elif test "$dynamic" = "no"; then add_runtime_path=no
elif test -n "$LD_RUN_PATH"; then add_runtime_path=yes
else case "$opsys" in
       sol2 | irix* | *bsd* | decosf* ) add_runtime_path=yes ;;
       * ) add_runtime_path=no ;;
     esac
fi

if test "$add_runtime_path" = "yes"; then
      echo $ac_n "checking "for runtime libraries flag"""... $ac_c" 1>&6
echo "configure:3134: checking "for runtime libraries flag"" >&5
  case "$opsys" in
    sol2 ) dash_r="-R" ;;
    decosf* | linux* | irix*) dash_r="-rpath " ;;
    *)
      dash_r=""
      for try_dash_r in "-R" "-R " "-rpath "; do
        xe_check_libs="${try_dash_r}/no/such/file-or-directory"
        
if test "$GCC" = "yes"; then
  set x $xe_check_libs; shift; xe_check_libs=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) xe_check_libs="$xe_check_libs $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) xe_check_libs="$xe_check_libs $1" ;;
      -Xlinker* ) ;;
      * ) xe_check_libs="$xe_check_libs -Xlinker $1" ;;
    esac
    shift
  done
fi
        cat > conftest.$ac_ext <<EOF
#line 3156 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:3163: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  dash_r="$try_dash_r"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
        xe_check_libs=""
        test -n "$dash_r" && break
      done ;;
  esac
  if test -n "$dash_r";
    then echo "$ac_t"""\"${dash_r}\""" 1>&6
    else echo "$ac_t""NONE" 1>&6
  fi
fi

xe_add_unique_runpath_dir='
  xe_add_p=yes
  for xe_dir in $runpath_dirs; do       test "$xe_dir" = "$xe_runpath_dir" && xe_add_p=no
  done
  if test "$xe_add_p" = "yes"; then
    test -n "$runpath" && runpath="${runpath}:"
    runpath="${runpath}${xe_runpath_dir}"
    runpath_dirs="$runpath_dirs $xe_runpath_dir"
  fi'




if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
            if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi



GNU_MALLOC=yes
if test "$with_dlmalloc" != "no"; then
	doug_lea_malloc=yes
else
	doug_lea_malloc=no
fi
after_morecore_hook_exists=yes
echo $ac_n "checking for malloc_set_state""... $ac_c" 1>&6
echo "configure:3264: checking for malloc_set_state" >&5

cat > conftest.$ac_ext <<EOF
#line 3267 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char malloc_set_state(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char malloc_set_state();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_malloc_set_state) || defined (__stub___malloc_set_state)
choke me
#else
malloc_set_state();
#endif

; return 0; }
EOF
if { (eval echo configure:3290: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_malloc_set_state=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_malloc_set_state=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'malloc_set_state`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
doug_lea_malloc=no
fi

echo $ac_n "checking whether __after_morecore_hook exists""... $ac_c" 1>&6
echo "configure:3310: checking whether __after_morecore_hook exists" >&5
cat > conftest.$ac_ext <<EOF
#line 3312 "configure"
#include "confdefs.h"
extern void (* __after_morecore_hook)();
int main() {
__after_morecore_hook = 0
; return 0; }
EOF
if { (eval echo configure:3319: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   after_morecore_hook_exists=no
fi
rm -f conftest*
if test "$system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
    - The GNU allocators don't work with this system configuration."
elif test "$with_system_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
    - User chose not to use GNU allocators."
elif test "$with_debug_malloc" = "yes" ; then
  GNU_MALLOC=no
  GNU_MALLOC_reason="
    - User chose to use Debugging Malloc."
fi

if test "$doug_lea_malloc" = "yes" -a "$GNU_MALLOC" = "yes" ; then
  GNU_MALLOC_reason="
    - Using Doug Lea's new malloc from the GNU C Library."
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining DOUG_LEA_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define DOUG_LEA_MALLOC 1
EOF
}

  if test "$after_morecore_hook_exists" = "no" ; then
    GNU_MALLOC_reason="
    - Using Doug Lea's new malloc from the Linux C Library."
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining _NO_MALLOC_WARNING_
EOF
cat >> confdefs.h <<\EOF
#define _NO_MALLOC_WARNING_ 1
EOF
}

  fi
fi




# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3375: checking for $ac_word" >&5

if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
echo "configure:3430: checking for a BSD compatible install" >&5
if test -z "$INSTALL"; then

  IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      # Don't use installbsd from OSF since it installs stuff as root
      # by default.
      for ac_prog in ginstall scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_IFS"

  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:3484: checking for $ac_word" >&5

if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"


for ac_hdr in   a.out.h   elf.h   cygwin/version.h   fcntl.h   inttypes.h   libgen.h   locale.h   mach/mach.h   sys/param.h   sys/pstat.h   sys/time.h   sys/timeb.h   sys/un.h   ulimit.h   unistd.h 
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:3516: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 3519 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3524: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
echo "configure:3554: checking for sys/wait.h that is POSIX.1 compatible" >&5

cat > conftest.$ac_ext <<EOF
#line 3557 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/wait.h>
#ifndef WEXITSTATUS
#define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
#endif
#ifndef WIFEXITED
#define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
#endif
int main() {
int s;
wait (&s);
s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
; return 0; }
EOF
if { (eval echo configure:3573: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_sys_wait_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_sys_wait_h=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
if test $ac_cv_header_sys_wait_h = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SYS_WAIT_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYS_WAIT_H 1
EOF
}

fi

echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:3597: checking for ANSI C header files" >&5

cat > conftest.$ac_ext <<EOF
#line 3600 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:3608: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3625 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 3643 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
cat > conftest.$ac_ext <<EOF
#line 3661 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:3672: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining STDC_HEADERS
EOF
cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF
}

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:3698: checking whether time.h and sys/time.h may both be included" >&5

cat > conftest.$ac_ext <<EOF
#line 3701 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:3710: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TIME_WITH_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for sys_siglist declaration in signal.h or unistd.h""... $ac_c" 1>&6
echo "configure:3734: checking for sys_siglist declaration in signal.h or unistd.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3737 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
/* NetBSD declares sys_siglist in unistd.h.  */
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
int main() {
char *msg = *(sys_siglist + 1);
; return 0; }
EOF
if { (eval echo configure:3749: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_decl_sys_siglist=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_decl_sys_siglist=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_decl_sys_siglist" 1>&6
if test $ac_cv_decl_sys_siglist = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYS_SIGLIST_DECLARED
EOF
cat >> confdefs.h <<\EOF
#define SYS_SIGLIST_DECLARED 1
EOF
}

fi



echo $ac_n "checking for utime""... $ac_c" 1>&6
echo "configure:3775: checking for utime" >&5
cat > conftest.$ac_ext <<EOF
#line 3777 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <utime.h>
int main() {
struct utimbuf x; x.actime = x.modtime = 0; utime ("/", &x);
; return 0; }
EOF
if { (eval echo configure:3785: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_UTIME
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UTIME 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
      for ac_func in utimes
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:3804: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 3807 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:3830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi
rm -f conftest*


echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:3862: checking return type of signal handlers" >&5

cat > conftest.$ac_ext <<EOF
#line 3865 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:3882: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_signal" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining RETSIGTYPE = $ac_cv_type_signal
EOF
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF
}


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:3904: checking for size_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3907 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining size_t = unsigned
EOF
cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF
}

fi

echo $ac_n "checking for pid_t""... $ac_c" 1>&6
echo "configure:3938: checking for pid_t" >&5

cat > conftest.$ac_ext <<EOF
#line 3941 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])pid_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf conftest*
  ac_cv_type_pid_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining pid_t = int
EOF
cat >> confdefs.h <<\EOF
#define pid_t int
EOF
}

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:3972: checking for uid_t in sys/types.h" >&5

cat > conftest.$ac_ext <<EOF
#line 3975 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining uid_t = int
EOF
cat >> confdefs.h <<\EOF
#define uid_t int
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining gid_t = int
EOF
cat >> confdefs.h <<\EOF
#define gid_t int
EOF
}

fi

echo $ac_n "checking for mode_t""... $ac_c" 1>&6
echo "configure:4011: checking for mode_t" >&5

cat > conftest.$ac_ext <<EOF
#line 4014 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])mode_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_mode_t=yes
else
  rm -rf conftest*
  ac_cv_type_mode_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_mode_t" 1>&6
if test $ac_cv_type_mode_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining mode_t = int
EOF
cat >> confdefs.h <<\EOF
#define mode_t int
EOF
}

fi

echo $ac_n "checking for off_t""... $ac_c" 1>&6
echo "configure:4045: checking for off_t" >&5

cat > conftest.$ac_ext <<EOF
#line 4048 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])off_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_off_t=yes
else
  rm -rf conftest*
  ac_cv_type_off_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_off_t" 1>&6
if test $ac_cv_type_off_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining off_t = long
EOF
cat >> confdefs.h <<\EOF
#define off_t long
EOF
}

fi

echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
echo "configure:4079: checking for ssize_t" >&5

cat > conftest.$ac_ext <<EOF
#line 4082 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])ssize_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_ssize_t=yes
else
  rm -rf conftest*
  ac_cv_type_ssize_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_ssize_t" 1>&6
if test $ac_cv_type_ssize_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining ssize_t = int
EOF
cat >> confdefs.h <<\EOF
#define ssize_t int
EOF
}

fi


echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
echo "configure:4114: checking for socklen_t" >&5
cat > conftest.$ac_ext <<EOF
#line 4116 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/socket.h>
socklen_t x;

int main() {

; return 0; }
EOF
if { (eval echo configure:4126: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
cat > conftest.$ac_ext <<EOF
#line 4135 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/socket.h>
int accept (int, struct sockaddr *, size_t *);

int main() {

; return 0; }
EOF
if { (eval echo configure:4145: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
echo "$ac_t""size_t" 1>&6
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining socklen_t = size_t
EOF
cat >> confdefs.h <<\EOF
#define socklen_t size_t
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
echo "$ac_t""int" 1>&6
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining socklen_t = int
EOF
cat >> confdefs.h <<\EOF
#define socklen_t int
EOF
}

fi
rm -f conftest*
fi
rm -f conftest*

echo $ac_n "checking for struct timeval""... $ac_c" 1>&6
echo "configure:4177: checking for struct timeval" >&5
cat > conftest.$ac_ext <<EOF
#line 4179 "configure"
#include "confdefs.h"
#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
int main() {
static struct timeval x; x.tv_sec = x.tv_usec;
; return 0; }
EOF
if { (eval echo configure:4195: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
  HAVE_TIMEVAL=yes
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIMEVAL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIMEVAL 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   HAVE_TIMEVAL=no
fi
rm -f conftest*

echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:4217: checking whether struct tm is in sys/time.h or time.h" >&5

cat > conftest.$ac_ext <<EOF
#line 4220 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:4228: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TM_IN_SYS_TIME
EOF
cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF
}

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:4252: checking for tm_zone in struct tm" >&5

cat > conftest.$ac_ext <<EOF
#line 4255 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:4263: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TM_ZONE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF
}

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:4286: checking for tzname" >&5

cat > conftest.$ac_ext <<EOF
#line 4289 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:4299: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TZNAME
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF
}

  fi
fi


echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:4325: checking for working const" >&5

cat > conftest.$ac_ext <<EOF
#line 4328 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:4377: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining const = 
EOF
cat >> confdefs.h <<\EOF
#define const 
EOF
}

fi


echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
echo "configure:4402: checking whether ${MAKE-make} sets \${MAKE}" >&5
set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`

cat > conftestmake <<\EOF
all:
	@echo 'ac_maketemp="${MAKE}"'
EOF
# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
if test -n "$ac_maketemp"; then
  eval ac_cv_prog_make_${ac_make}_set=yes
else
  eval ac_cv_prog_make_${ac_make}_set=no
fi
rm -f conftestmake
if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  SET_MAKE=
else
  echo "$ac_t""no" 1>&6
  SET_MAKE="MAKE=${MAKE-make}"
fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:4427: checking whether byte ordering is bigendian" >&5

ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > conftest.$ac_ext <<EOF
#line 4432 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:4443: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > conftest.$ac_ext <<EOF
#line 4447 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:4458: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_bigendian=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_bigendian=no
fi
rm -f conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $ac_cv_c_bigendian = unknown; then
cat > conftest.$ac_ext <<EOF
#line 4475 "configure"
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
if { (eval echo configure:4488: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_c_bigendian=no
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian=yes
fi
rm -fr conftest*
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining WORDS_BIGENDIAN
EOF
cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF
}

fi


echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:4515: checking size of short" >&5

cat > conftest.$ac_ext <<EOF
#line 4518 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:4529: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_short=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_SHORT = $ac_cv_sizeof_short
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF
}


if test "$ac_cv_sizeof_short" = 0; then
  echo ""
  echo "*** PANIC *** Configure tests are not working - compiler is broken."
  echo "*** PANIC *** Please examine config.log for compilation errors."
  exit 1
fi
echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:4557: checking size of int" >&5

cat > conftest.$ac_ext <<EOF
#line 4560 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:4571: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_int=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_INT = $ac_cv_sizeof_int
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF
}


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:4593: checking size of long" >&5

cat > conftest.$ac_ext <<EOF
#line 4596 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:4607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_long=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_LONG = $ac_cv_sizeof_long
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF
}


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:4629: checking size of long long" >&5

cat > conftest.$ac_ext <<EOF
#line 4632 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:4643: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_LONG_LONG = $ac_cv_sizeof_long_long
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF
}


echo $ac_n "checking size of void *""... $ac_c" 1>&6
echo "configure:4665: checking size of void *" >&5

cat > conftest.$ac_ext <<EOF
#line 4668 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(void *));
  exit(0);
}
EOF
if { (eval echo configure:4679: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_void_p=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_void_p=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_void_p" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_VOID_P = $ac_cv_sizeof_void_p
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_VOID_P $ac_cv_sizeof_void_p
EOF
}



case $opsys in
  cygwin* ) cat > conftest.$ac_ext <<EOF
#line 4703 "configure"
#include "confdefs.h"
#include <cygwin/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "typedef.*intptr_t;" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                             { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INTPTR_T_IN_CYGWIN_TYPES_H = 1
EOF
cat >> confdefs.h <<\EOF
#define INTPTR_T_IN_CYGWIN_TYPES_H 1
EOF
}

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
 ;;
esac

echo $ac_n "checking for long file names""... $ac_c" 1>&6
echo "configure:4728: checking for long file names" >&5

ac_cv_sys_long_file_names=yes
# Test for long file names in all the places we know might matter:
#      .		the current directory, where building will happen
#      $prefix/lib	where we will be installing things
#      $exec_prefix/lib	likewise
# eval it to expand exec_prefix.
#      $TMPDIR		if set, where it might want to write temporary files
# if $TMPDIR is not set:
#      /tmp		where it might want to write temporary files
#      /var/tmp		likewise
#      /usr/tmp		likewise
if test -n "$TMPDIR" && test -d "$TMPDIR" && test -w "$TMPDIR"; then
  ac_tmpdirs="$TMPDIR"
else
  ac_tmpdirs='/tmp /var/tmp /usr/tmp'
fi
for ac_dir in  . $ac_tmpdirs `eval echo $prefix/lib $exec_prefix/lib` ; do
  test -d $ac_dir || continue
  test -w $ac_dir || continue # It is less confusing to not echo anything here.
  (echo 1 > $ac_dir/conftest9012345) 2>/dev/null
  (echo 2 > $ac_dir/conftest9012346) 2>/dev/null
  val=`cat $ac_dir/conftest9012345 2>/dev/null`
  if test ! -f $ac_dir/conftest9012345 || test "$val" != 1; then
    ac_cv_sys_long_file_names=no
    rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
    break
  fi
  rm -f $ac_dir/conftest9012345 $ac_dir/conftest9012346 2>/dev/null
done

echo "$ac_t""$ac_cv_sys_long_file_names" 1>&6
if test $ac_cv_sys_long_file_names = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LONG_FILE_NAMES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LONG_FILE_NAMES 1
EOF
}

fi


echo $ac_n "checking for sin""... $ac_c" 1>&6
echo "configure:4774: checking for sin" >&5

cat > conftest.$ac_ext <<EOF
#line 4777 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char sin(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_sin) || defined (__stub___sin)
choke me
#else
sin();
#endif

; return 0; }
EOF
if { (eval echo configure:4800: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_sin=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_sin=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'sin`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:4818: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`

xe_check_libs=" -lm "
cat > conftest.$ac_ext <<EOF
#line 4823 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:4834: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/^a-zA-Z0-9_/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lm\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


fi


{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining LISP_FLOAT_TYPE
EOF
cat >> confdefs.h <<\EOF
#define LISP_FLOAT_TYPE 1
EOF
}


cat > conftest.$ac_ext <<EOF
#line 4878 "configure"
#include "confdefs.h"
#include <math.h>
int main() {
return atanh(1.0) + asinh(1.0) + acosh(1.0); 
; return 0; }
EOF
if { (eval echo configure:4885: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_INVERSE_HYPERBOLIC
EOF
cat >> confdefs.h <<\EOF
#define HAVE_INVERSE_HYPERBOLIC 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*

echo "checking type of mail spool file locking" 1>&6
echo "configure:4902: checking type of mail spool file locking" >&5
for ac_func in lockf flock
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:4906: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 4909 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:4932: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

test -z "$mail_locking" -a "$mail_use_flock" = "yes" && mail_locking=flock
test -z "$mail_locking" -a "$mail_use_lockf" = "yes" && mail_locking=lockf
test -z "$mail_locking" -a "$mail_use_locking" = "yes" && mail_locking=locking
if   test -z "$mail_locking"; then
  case "$opsys" in cygwin* | mingw*)
    mail_locking=pop ;;
  esac
fi

if   test "$mail_locking" = "lockf"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_LOCK_LOCKF
EOF
cat >> confdefs.h <<\EOF
#define MAIL_LOCK_LOCKF 1
EOF
}

elif test "$mail_locking" = "flock"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_LOCK_FLOCK
EOF
cat >> confdefs.h <<\EOF
#define MAIL_LOCK_FLOCK 1
EOF
}

elif test "$mail_locking" = "locking"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_LOCK_LOCKING
EOF
cat >> confdefs.h <<\EOF
#define MAIL_LOCK_LOCKING 1
EOF
}

elif test "$mail_locking" = "pop"; then
  with_pop=yes
  mail_locking=
else mail_locking="dot-locking"; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_LOCK_DOT
EOF
cat >> confdefs.h <<\EOF
#define MAIL_LOCK_DOT 1
EOF
}

fi
test "$mail_locking" = "lockf" -a "$ac_cv_func_lockf" != "yes" && \
  { echo "Error:" "lockf mail locking requested but not available." >&2; exit 1; }
test "$mail_locking" = "flock" -a "$ac_cv_func_flock" != "yes" && \
  { echo "Error:" "flock mail locking requested but not available." >&2; exit 1; }
test "$mail_locking" = "locking" -a "$ac_cv_func_locking" != "yes" && \
  { echo "Error:" "locking mail locking requested but not available." >&2; exit 1; }

case "$opsys" in decosf*)
  
echo $ac_n "checking for cma_open in -lpthreads""... $ac_c" 1>&6
echo "configure:5014: checking for cma_open in -lpthreads" >&5
ac_lib_var=`echo pthreads'_'cma_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpthreads "
cat > conftest.$ac_ext <<EOF
#line 5019 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cma_open();

int main() {
cma_open()
; return 0; }
EOF
if { (eval echo configure:5030: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo pthreads | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lpthreads $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lpthreads\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


  test "$ac_cv_lib_pthreads_cma_open" = "yes" && \
    c_switch_site="$c_switch_site -threads" ;;
esac


echo $ac_n "checking whether the -xildoff compiler flag is required""... $ac_c" 1>&6
echo "configure:5067: checking whether the -xildoff compiler flag is required" >&5
if   ${CC-cc} '-###' -xildon  no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ; then
  if ${CC-cc} '-###' -xildoff no_such_file.c 2>&1 | grep '^[^ ]*/ild ' > /dev/null ;
    then echo "$ac_t""no" 1>&6;
    else echo "$ac_t""yes" 1>&6; ld_switch_site="$ld_switch_site -xildoff" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-xildoff\" to \$ld_switch_site"; fi
  fi
  else echo "$ac_t""no" 1>&6
fi

if test "$opsys" = "sol2"; then
  if test "$os_release" -ge 506; then
    echo $ac_n "checking for \"-z ignore\" linker flag""... $ac_c" 1>&6
echo "configure:5079: checking for \"-z ignore\" linker flag" >&5
    case "`ld -h 2>&1`" in
      *-z\ ignore\|record* ) echo "$ac_t""yes" 1>&6
        ld_switch_site="-z ignore $ld_switch_site" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-z ignore\" to \$ld_switch_site"; fi ;;
      *) echo "$ac_t""no" 1>&6 ;;
    esac
  fi
fi


echo "checking "for specified window system"" 1>&6
echo "configure:5090: checking "for specified window system"" >&5


GNOME_CONFIG=no
GTK_CONFIG=no

if test "$with_gnome" != "no"; then
   echo $ac_n "checking for GNOME configuration script""... $ac_c" 1>&6
echo "configure:5098: checking for GNOME configuration script" >&5
   for possible in gnome-config
   do
      possible_version=`${possible} --version 2> /dev/null`
      if test "x${possible_version}" != "x"; then
              GNOME_CONFIG="${possible}"
              with_gnome=yes
              with_gtk=yes
              break
      fi
   done
   echo "$ac_t""${GNOME_CONFIG}" 1>&6
fi

if test "${GNOME_CONFIG}" != "no"; then
      GNOME_LIBS=`${GNOME_CONFIG} --libs gnomeui`
      GNOME_CFLAGS=`${GNOME_CONFIG} --cflags gnomeui`
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GNOME
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GNOME 1
EOF
}

      libs_gtk="$libs_gtk ${GNOME_LIBS}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"${GNOME_LIBS}\" to \$libs_gtk"; fi
      c_switch_gtk="$c_switch_gtk ${GNOME_CFLAGS}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"${GNOME_CFLAGS}\" to \$c_switch_gtk"; fi
fi

if test "$with_gtk" != "no";then
   echo $ac_n "checking for GTK configuration script""... $ac_c" 1>&6
echo "configure:5129: checking for GTK configuration script" >&5
   for possible in gtk12-config gtk14-config gtk-config
   do
      possible_version=`${possible} --version 2> /dev/null`
      if test "x${possible_version}" != "x"; then
              GTK_CONFIG="${possible}"
	      case "${possible_version}" in
        	1.0.*) echo "configure: warning: GTK 1.2 is required, please upgrade your version of GTK." 1>&2; with_gtk=no;;
	        1.3.*) echo "configure: warning: GTK 1.3 is not supported right now" 1>&2; with_gtk=no;;
		1.2.*)
			with_gtk=yes
			break
			;;
	        *)     echo "configure: warning: Found unsupported version of GTK: $possible_version" 1>&2;;
	      esac
      fi
   done
   echo "$ac_t""${GTK_CONFIG}" 1>&6
fi

if test "${GTK_CONFIG}" != "no"; then
      echo $ac_n "checking gtk version""... $ac_c" 1>&6
echo "configure:5151: checking gtk version" >&5
      GTK_VERSION=`${GTK_CONFIG} --version`
      echo "$ac_t""${GTK_VERSION}" 1>&6

      echo $ac_n "checking gtk libs""... $ac_c" 1>&6
echo "configure:5156: checking gtk libs" >&5
      GTK_LIBS=`${GTK_CONFIG} --libs`
      libs_gtk="$libs_gtk ${GTK_LIBS}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"${GTK_LIBS}\" to \$libs_gtk"; fi
      echo "$ac_t""${GTK_LIBS}" 1>&6

      echo $ac_n "checking gtk cflags""... $ac_c" 1>&6
echo "configure:5162: checking gtk cflags" >&5
      GTK_CFLAGS=`${GTK_CONFIG} --cflags`
      if test "$GCC" = "yes"; then
      	GTK_CFLAGS="${GTK_CFLAGS} -Wno-shadow"
      fi
      c_switch_gtk="$c_switch_gtk ${GTK_CFLAGS}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"${GTK_CFLAGS}\" to \$c_switch_gtk"; fi
      echo "$ac_t""${GTK_CFLAGS}" 1>&6

      
echo $ac_n "checking for main in -lgdk_imlib""... $ac_c" 1>&6
echo "configure:5172: checking for main in -lgdk_imlib" >&5
ac_lib_var=`echo gdk_imlib'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdk_imlib "
cat > conftest.$ac_ext <<EOF
#line 5177 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_gtk="-lgdk_imlib $libs_gtk" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lgdk_imlib\" to \$libs_gtk"; fi
else
  echo "$ac_t""no" 1>&6
fi


      
echo $ac_n "checking for Imlib_init in -lImlib""... $ac_c" 1>&6
echo "configure:5206: checking for Imlib_init in -lImlib" >&5
ac_lib_var=`echo Imlib'_'Imlib_init | sed 'y%./+-%__p_%'`

xe_check_libs=" -lImlib "
cat > conftest.$ac_ext <<EOF
#line 5211 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Imlib_init();

int main() {
Imlib_init()
; return 0; }
EOF
if { (eval echo configure:5222: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_gtk="$libs_gtk -lImlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lImlib\" to \$libs_gtk"; fi
else
  echo "$ac_t""no" 1>&6
fi


      for ac_func in gdk_imlib_init
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:5245: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 5248 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:5271: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XPM 1
EOF
}

      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GTK
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GTK 1
EOF
}

      

      window_system=gtk
      with_gtk=yes
      with_x11=no

      test "${with_scrollbars}" != "no" && with_scrollbars=gtk
      test "${with_toolbars}" != no && with_toolbars=gtk
      test "${with_menubars}" != "no" && with_menubars=gtk
      test "${with_dialogs}" != "no" && with_dialogs=gtk
      test "${with_widgets}" != "no" && with_widgets=gtk

      extra_objs="$extra_objs console-gtk.o device-gtk.o event-gtk.o frame-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"console-gtk.o device-gtk.o event-gtk.o frame-gtk.o\""
 fi
      extra_objs="$extra_objs objects-gtk.o redisplay-gtk.o glyphs-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"objects-gtk.o redisplay-gtk.o glyphs-gtk.o\""
 fi
      extra_objs="$extra_objs select-gtk.o gccache-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"select-gtk.o gccache-gtk.o\""
 fi
      extra_objs="$extra_objs gtk-xemacs.o ui-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gtk-xemacs.o ui-gtk.o\""
 fi

            OLD_CFLAGS="${CFLAGS}"
      OLD_CPPFLAGS="${CPPFLAGS}"
      OLD_LDFLAGS="${LDFLAGS}"
      CFLAGS="${GTK_CFLAGS} ${CFLAGS}"
      CPPFLAGS="${GTK_CFLAGS} ${CFLAGS}"
      LDFLAGS="${LDFLAGS} ${GTK_LIBS}"
      for ac_hdr in glade/glade.h glade.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:5350: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 5353 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5358: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

      
echo $ac_n "checking for main in -lxml""... $ac_c" 1>&6
echo "configure:5389: checking for main in -lxml" >&5
ac_lib_var=`echo xml'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lxml "
cat > conftest.$ac_ext <<EOF
#line 5394 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5401: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_gtk="-lxml $libs_gtk" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lxml\" to \$libs_gtk"; fi
else
  echo "$ac_t""no" 1>&6
fi


      
echo $ac_n "checking for main in -lglade""... $ac_c" 1>&6
echo "configure:5423: checking for main in -lglade" >&5
ac_lib_var=`echo glade'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lglade "
cat > conftest.$ac_ext <<EOF
#line 5428 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5435: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_gtk="-lglade $libs_gtk" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lglade\" to \$libs_gtk"; fi
else
  echo "$ac_t""no" 1>&6
fi


      
echo $ac_n "checking for main in -lglade-gnome""... $ac_c" 1>&6
echo "configure:5457: checking for main in -lglade-gnome" >&5
ac_lib_var=`echo glade-gnome'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lglade-gnome "
cat > conftest.$ac_ext <<EOF
#line 5462 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:5469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_gtk="-lglade-gnome $libs_gtk" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lglade-gnome\" to \$libs_gtk"; fi
else
  echo "$ac_t""no" 1>&6
fi


      cat > conftest.$ac_ext <<EOF
#line 5490 "configure"
#include "confdefs.h"
#include <glade/glade-xml.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "char \*txtdomain;" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
                       { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LIBGLADE_XML_TXTDOMAIN = 1
EOF
cat >> confdefs.h <<\EOF
#define LIBGLADE_XML_TXTDOMAIN 1
EOF
}

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

      CFLAGS="${OLD_CFLAGS}"
      CPPFLAGS="${OLD_CPPFLAGS}"
      LDFLAGS="${OLD_LDFLAGS}"
fi


if test "$with_x11" != "no"; then
    test "$x_includes $x_libraries" != "NONE NONE" && \
   window_system=x11 with_x11=yes

        
      if test "$x_includes $x_libraries" = "NONE NONE" \
    -a -n "$OPENWINHOME" \
    -a "$OPENWINHOME" != "/usr/openwin" \
    -a -d "$OPENWINHOME"; then
      test -d "$OPENWINHOME/lib"           && x_libraries="$OPENWINHOME/lib"
      test -d "$OPENWINHOME/include"       && x_includes="$OPENWINHOME/include"
      test -d "$OPENWINHOME/share/include" && x_includes="$OPENWINHOME/share/include"
  fi

  if test "$x_includes" = "NONE"; then
                    for dir in "/usr/X11" "/usr/X11R6"; do
      if test -d "$dir/include/X11"; then x_includes="$dir/include"; break; fi
    done
  fi

  if test "$x_libraries" = "NONE"; then
    for dir in "/usr/X11/lib" "/usr/X11R6/lib" "/usr/lib/X11R6"; do
      if test -r "$dir/libX11.a" -o -r "$dir/libX11.dylib"; then x_libraries="$dir"; break; fi
    done
  fi

  # If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6
echo "configure:5549: checking for X" >&5

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else

# One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr conftestdir
if mkdir conftestdir; then
  cd conftestdir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    eval `${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.  They are
    # bogus both because they are the default anyway, and because
    # using them would break gcc on systems where it needs fixed includes.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr conftestdir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > conftest.$ac_ext <<EOF
#line 5609 "configure"
#include "confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5614: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  # Look for the header file in a standard set of common directories.
# Check X11 before X11Rn because it is often a symlink to the current release.
  for ac_dir in               \
    /usr/X11/include          \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11          \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11/include    \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11    \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5683 "configure"
#include "confdefs.h"

int main() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:5690: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
# Check X11 before X11Rn because it is often a symlink to the current release.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11/lib          \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11/lib    \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11    \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
    /lib/usr/lib/X11	  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f conftest*
fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

if test "$no_x" = yes; then
  # Not all programs may use this symbol, but it does not hurt to define it.
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining X_DISPLAY_MISSING
EOF
cat >> confdefs.h <<\EOF
#define X_DISPLAY_MISSING 1
EOF
}

  X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
else
  if test -n "$x_includes"; then
    X_CFLAGS="$X_CFLAGS -I$x_includes"
  fi

  # It would also be nice to do this for all -L options, not just this one.
  if test -n "$x_libraries"; then
    X_LIBS="$X_LIBS -L$x_libraries"
    # For Solaris; some versions of Sun CC require a space after -R and
    # others require no space.  Words are not sufficient . . . .
    case "`(uname -sr) 2>/dev/null`" in
    "SunOS 5"*)
      echo $ac_n "checking whether -R must be followed by a space""... $ac_c" 1>&6
echo "configure:5799: checking whether -R must be followed by a space" >&5
      ac_xsave_LIBS="$LIBS"; LIBS="$LIBS -R$x_libraries"
      cat > conftest.$ac_ext <<EOF
#line 5802 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5809: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_nospace=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_nospace=no
fi
rm -f conftest*
      if test $ac_R_nospace = yes; then
	echo "$ac_t""no" 1>&6
	X_LIBS="$X_LIBS -R$x_libraries"
      else
	LIBS="$ac_xsave_LIBS -R $x_libraries"
	cat > conftest.$ac_ext <<EOF
#line 5825 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:5832: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_R_space=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_R_space=no
fi
rm -f conftest*
	if test $ac_R_space = yes; then
	  echo "$ac_t""yes" 1>&6
	  X_LIBS="$X_LIBS -R $x_libraries"
	else
	  echo "$ac_t""neither works" 1>&6
	fi
      fi
      LIBS="$ac_xsave_LIBS"
    esac
  fi

  # Check for system-dependent libraries X programs must link with.
  # Do this before checking for the system-independent R6 libraries
  # (-lICE), since we may need -lsocket or whatever for X linking.

  if test "$ISC" = yes; then
    X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
  else
    # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
    # libraries were built with DECnet support.  And karl@cs.umb.edu says
    # the Alpha needs dnet_stub (dnet does not exist).
    if test "$with_dnet" = "no" ; then
ac_cv_lib_dnet_dnet_ntoa=no
else

echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
echo "configure:5868: checking for dnet_ntoa in -ldnet" >&5
ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet "
cat > conftest.$ac_ext <<EOF
#line 5873 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:5884: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
else
  echo "$ac_t""no" 1>&6
fi

fi

    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
      
echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
echo "configure:5908: checking for dnet_ntoa in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldnet_stub "
cat > conftest.$ac_ext <<EOF
#line 5913 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_ntoa();

int main() {
dnet_ntoa()
; return 0; }
EOF
if { (eval echo configure:5924: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
    # to get the SysV transport functions.
    # chad@anasazi.com says the Pyramis MIS-ES running DC/OSx (SVR4)
    # needs -lnsl.
    # The nsl library prevents programs from opening the X display
    # on Irix 5.2, according to dickey@clark.net.
    echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
echo "configure:5953: checking for gethostbyname" >&5

cat > conftest.$ac_ext <<EOF
#line 5956 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gethostbyname(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gethostbyname) || defined (__stub___gethostbyname)
choke me
#else
gethostbyname();
#endif

; return 0; }
EOF
if { (eval echo configure:5979: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_gethostbyname=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_gethostbyname = no; then
      
echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
echo "configure:6000: checking for gethostbyname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`

xe_check_libs=" -lnsl "
cat > conftest.$ac_ext <<EOF
#line 6005 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyname();

int main() {
gethostbyname()
; return 0; }
EOF
if { (eval echo configure:6016: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # lieder@skyler.mavd.honeywell.com says without -lsocket,
    # socket/setsockopt and other routines are undefined under SCO ODT
    # 2.0.  But -lsocket is broken on IRIX 5.2 (and is not necessary
    # on later versions), says simon@lia.di.epfl.ch: it contains
    # gethostby* variants that don't use the nameserver (or something).
    # -lsocket must be given before -lnsl if both are needed.
    # We assume that if connect needs -lnsl, so does gethostbyname.
    echo $ac_n "checking for connect""... $ac_c" 1>&6
echo "configure:6046: checking for connect" >&5

cat > conftest.$ac_ext <<EOF
#line 6049 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char connect(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_connect) || defined (__stub___connect)
choke me
#else
connect();
#endif

; return 0; }
EOF
if { (eval echo configure:6072: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_connect=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_connect=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_connect = no; then
      
xe_msg_checking="for connect in -lsocket"
test -n "$X_EXTRA_LIBS" && xe_msg_checking="$xe_msg_checking using extra libs $X_EXTRA_LIBS"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:6095: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocket $X_EXTRA_LIBS"
cat > conftest.$ac_ext <<EOF
#line 6100 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char connect();

int main() {
connect()
; return 0; }
EOF
if { (eval echo configure:6111: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # gomez@mi.uni-erlangen.de says -lposix is necessary on A/UX.
    echo $ac_n "checking for remove""... $ac_c" 1>&6
echo "configure:6135: checking for remove" >&5

cat > conftest.$ac_ext <<EOF
#line 6138 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char remove(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_remove) || defined (__stub___remove)
choke me
#else
remove();
#endif

; return 0; }
EOF
if { (eval echo configure:6161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_remove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_remove=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'remove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_remove = no; then
      
echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
echo "configure:6182: checking for remove in -lposix" >&5
ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`

xe_check_libs=" -lposix "
cat > conftest.$ac_ext <<EOF
#line 6187 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char remove();

int main() {
remove()
; return 0; }
EOF
if { (eval echo configure:6198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
else
  echo "$ac_t""no" 1>&6
fi


    fi

    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
echo "configure:6222: checking for shmat" >&5

cat > conftest.$ac_ext <<EOF
#line 6225 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmat(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmat) || defined (__stub___shmat)
choke me
#else
shmat();
#endif

; return 0; }
EOF
if { (eval echo configure:6248: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_shmat=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_shmat=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'shmat`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

    if test $ac_cv_func_shmat = no; then
      
echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
echo "configure:6269: checking for shmat in -lipc" >&5
ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`

xe_check_libs=" -lipc "
cat > conftest.$ac_ext <<EOF
#line 6274 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmat();

int main() {
shmat()
; return 0; }
EOF
if { (eval echo configure:6285: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
else
  echo "$ac_t""no" 1>&6
fi


    fi
  fi

  # Check for libraries that X11R6 Xt/Xaw programs need.
  ac_save_LDFLAGS="$LDFLAGS"
  test -n "$x_libraries" && LDFLAGS="$LDFLAGS -L$x_libraries"
  # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
  # check for ICE first), but we must link in the order -lSM -lICE or
  # we get undefined symbols.  So assume we have SM if we have ICE.
  # These have to be linked with before -lX11, unlike the other
  # libraries we check for below, so use a different variable.
  #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
  
xe_msg_checking="for IceConnectionNumber in -lICE"
test -n "$X_EXTRA_LIBS" && xe_msg_checking="$xe_msg_checking using extra libs $X_EXTRA_LIBS"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:6321: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`

xe_check_libs=" -lICE $X_EXTRA_LIBS"
cat > conftest.$ac_ext <<EOF
#line 6326 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char IceConnectionNumber();

int main() {
IceConnectionNumber()
; return 0; }
EOF
if { (eval echo configure:6337: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
else
  echo "$ac_t""no" 1>&6
fi


  LDFLAGS="$ac_save_LDFLAGS"

fi
 # Autoconf claims to find X library and include dirs for us.
  if test "$no_x" = "yes"
  then with_x11=no  window_system=none HAVE_X_WINDOWS=no
  else with_x11=yes window_system=x11  HAVE_X_WINDOWS=yes
  fi
fi


if test "$with_x11" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_X_WINDOWS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_X_WINDOWS 1
EOF
}

  MAKE_SUBDIR="$MAKE_SUBDIR lwlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib\" to \$MAKE_SUBDIR"; fi
  SRC_SUBDIR_DEPS="$SRC_SUBDIR_DEPS lwlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib\" to \$SRC_SUBDIR_DEPS"; fi


    ac_safe=`echo "Xm/Xm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xm/Xm.h""... $ac_c" 1>&6
echo "configure:6383: checking for Xm/Xm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6386 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6391: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking for XmStringFree in -lXm""... $ac_c" 1>&6
echo "configure:6408: checking for XmStringFree in -lXm" >&5
ac_lib_var=`echo Xm'_'XmStringFree | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 6413 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmStringFree();

int main() {
XmStringFree()
; return 0; }
EOF
if { (eval echo configure:6424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  got_motif=yes
else
  echo "$ac_t""no" 1>&6
fi


else
  echo "$ac_t""no" 1>&6
fi


  if test "$got_motif" != "yes"; then
            for lib_dir in "/usr/dt/lib" "/usr/lib/Motif2.1" \
                   "/usr/lib/Motif1.2" "/usr/lib/Motif1.1"; do
      inc_dir=`echo $lib_dir | sed -e 's/lib/include/'`
      if test -d "$lib_dir" -a -d "$inc_dir"; then
	case "$x_libraries" in *"$lib_dir"* ) ;; *)
	  x_libraries="$lib_dir $x_libraries"
	  X_LIBS="-L${lib_dir} $X_LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-L${lib_dir}\" to \$X_LIBS"; fi ;;
	esac
	case "$x_includes" in "$inc_dir"* ) ;; *)
	  x_includes="$inc_dir $x_includes"
	  X_CFLAGS="-I${inc_dir} $X_CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-I${inc_dir}\" to \$X_CFLAGS"; fi ;;
	esac
	break; 	fi
    done
  fi

    for rel in "X11R6" "X11R5" "X11R4"; do
    lib_dir="/usr/contrib/$rel/lib" inc_dir="/usr/contrib/$rel/include"
    if test -d "$lib_dir" -a -d "$inc_dir"; then
      case "$x_libraries" in *"$lib_dir"* ) ;; *)
        x_libraries="$x_libraries $lib_dir"
	X_LIBS="$X_LIBS -L${lib_dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L${lib_dir}\" to \$X_LIBS"; fi
      esac
      case "$x_includes" in "$inc_dir"* ) ;; *)
        x_includes="$x_includes $inc_dir"
        X_CFLAGS="$X_CFLAGS -I${inc_dir}" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-I${inc_dir}\" to \$X_CFLAGS"; fi
      esac
      break;     fi
  done

    case "$opsys" in
  decosf*) if test "$GCC" = yes -a -d /usr/shlib; then X_LIBS="$X_LIBS -L/usr/shlib" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-L/usr/shlib\" to \$X_LIBS"; fi; fi ;;
  esac

  ld_switch_x_site="$X_LIBS"

  
if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
            if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi


  if test "$extra_verbose" = "yes"; then
    echo; echo "X11 compilation variables:"
    for var in x_libraries x_includes X_CFLAGS X_LIBS X_PRE_LIBS X_EXTRA_LIBS; do eval "echo \"$var = '\$$var'\""; done
    echo
  fi

            bitmapdirs=
  if test "$x_includes" != NONE; then
    for i in $x_includes; do
      if test -d "$i/bitmaps"; then
	bitmapdirs="$i/bitmaps:$bitmapdirs"
      fi
      if test -d "$i/X11/bitmaps"; then
	bitmapdirs="$i/X11/bitmaps:$bitmapdirs"
      fi
    done
    bitmapdirs=`echo "$bitmapdirs" | sed s/.$//`
  fi
  test ! -z "$bitmapdirs" && { test "$extra_verbose" = "yes" && cat << EOF
    Defining BITMAPDIR = "$bitmapdirs"
EOF
cat >> confdefs.h <<EOF
#define BITMAPDIR "$bitmapdirs"
EOF
}


    echo "checking for X defines extracted by xmkmf" 1>&6
echo "configure:6576: checking for X defines extracted by xmkmf" >&5
  rm -fr conftestdir
  if mkdir conftestdir; then
    cd conftestdir
    cat > Imakefile <<'EOF'
xetest:
	@echo ${PROTO_DEFINES} ${STD_DEFINES}
EOF
    if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
      # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
      xmkmf_defines=`${MAKE-make} xetest 2>/dev/null | grep -v make`
    fi
    cd ..
    rm -fr conftestdir
    for word in $xmkmf_defines; do
      case "$word" in 
      -D__STDC__*) ;;
      -D* )
	sym=`echo '' $word | sed -e 's:^ *-D::' -e 's:=.*::'`
	case "$word" in
	  -D*=* ) val=`echo '' $word | sed -e 's:^.*=::'` ;;
	  *     ) val=1 ;;
	esac
	if grep "^#define $sym " confdefs.h >/dev/null; then :; else
	  if test "$val" = "1"
	    then { test "$extra_verbose" = "yes" && cat << EOF
    Defining $sym
EOF
cat >> confdefs.h <<EOF
#define $sym 1
EOF
}

	    else { test "$extra_verbose" = "yes" && cat << EOF
    Defining $sym = $val
EOF
cat >> confdefs.h <<EOF
#define $sym $val
EOF
}

	  fi
	fi  ;;
      esac
    done
  fi

    ac_safe=`echo "X11/Intrinsic.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Intrinsic.h""... $ac_c" 1>&6
echo "configure:6625: checking for X11/Intrinsic.h" >&5

cat > conftest.$ac_ext <<EOF
#line 6628 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6633: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 header files."" 1>&2; exit 1; }
fi


      
echo $ac_n "checking for XOpenDisplay in -lX11""... $ac_c" 1>&6
echo "configure:6657: checking for XOpenDisplay in -lX11" >&5
ac_lib_var=`echo X11'_'XOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 6662 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XOpenDisplay();

int main() {
XOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:6673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_lib_x11=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$have_lib_x11" != "yes"; then
    
xe_msg_checking="for XGetFontProperty in -lX11"
test -n "-b i486-linuxaout" && xe_msg_checking="$xe_msg_checking using extra libs -b i486-linuxaout"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:6698: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo X11'_'XGetFontProperty | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 -b i486-linuxaout"
cat > conftest.$ac_ext <<EOF
#line 6703 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XGetFontProperty();

int main() {
XGetFontProperty()
; return 0; }
EOF
if { (eval echo configure:6714: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  ld_switch_x_site="-b i486-linuxaout $ld_switch_x_site"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi


  fi
  libs_x="-lX11"
  test "$extra_verbose" = "yes" && echo "    Setting libs_x to \"-lX11\""

    
echo $ac_n "checking for XShapeSelectInput in -lXext""... $ac_c" 1>&6
echo "configure:6741: checking for XShapeSelectInput in -lXext" >&5
ac_lib_var=`echo Xext'_'XShapeSelectInput | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXext "
cat > conftest.$ac_ext <<EOF
#line 6746 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XShapeSelectInput();

int main() {
XShapeSelectInput()
; return 0; }
EOF
if { (eval echo configure:6757: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXext $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXext\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi



    
echo $ac_n "checking for XtOpenDisplay in -lXt""... $ac_c" 1>&6
echo "configure:6780: checking for XtOpenDisplay in -lXt" >&5
ac_lib_var=`echo Xt'_'XtOpenDisplay | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXt "
cat > conftest.$ac_ext <<EOF
#line 6785 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XtOpenDisplay();

int main() {
XtOpenDisplay()
; return 0; }
EOF
if { (eval echo configure:6796: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXt $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXt\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: "Unable to find X11 libraries."" 1>&2; exit 1; }
fi



  echo $ac_n "checking the version of X11 being used""... $ac_c" 1>&6
echo "configure:6819: checking the version of X11 being used" >&5
  cat > conftest.$ac_ext <<EOF
#line 6821 "configure"
#include "confdefs.h"
#include <X11/Intrinsic.h>
    int main(int c, char *v[]) { return c>1 ? XlibSpecificationRelease : 0; }
EOF
if { (eval echo configure:6826: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest foobar; x11_release=$?
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  x11_release=4
fi
rm -fr conftest*
  echo "$ac_t""R${x11_release}" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining THIS_IS_X11R${x11_release}
EOF
cat >> confdefs.h <<EOF
#define THIS_IS_X11R${x11_release} 1
EOF
}


  if test "${x11_release}" = "4"; then
    case "$with_widgets" in
      "" | "no") with_widgets=no ;;
      *) { echo "Error:" "Widget support requires X11R5 or greater" >&2; exit 1; } ;;
    esac
  fi

  for ac_func in XConvertCase XtRegisterDrawable
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6857: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 6860 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6883: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


  for ac_hdr in X11/Xlocale.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:6915: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 6918 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6923: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


    for ac_func in XRegisterIMInstantiateCallback
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6956: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 6959 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6982: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

  echo $ac_n "checking for standard XRegisterIMInstantiateCallback prototype""... $ac_c" 1>&6
echo "configure:7010: checking for standard XRegisterIMInstantiateCallback prototype" >&5
  cat > conftest.$ac_ext <<EOF
#line 7012 "configure"
#include "confdefs.h"

#define NeedFunctionPrototypes 1
#include <X11/Xlib.h>
extern Bool XRegisterIMInstantiateCallback(
   Display*, struct _XrmHashBucketRec*, char*, char*, XIMProc, XPointer*);

int main() {

; return 0; }
EOF
if { (eval echo configure:7024: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XREGISTERIMINSTANTIATECALLBACK_NONSTANDARD_PROTOTYPE
EOF
cat >> confdefs.h <<\EOF
#define XREGISTERIMINSTANTIATECALLBACK_NONSTANDARD_PROTOTYPE 1
EOF
}

fi
rm -f conftest*

    test -z "$with_xmu" && { 
echo $ac_n "checking for XmuReadBitmapDataFromFile in -lXmu""... $ac_c" 1>&6
echo "configure:7045: checking for XmuReadBitmapDataFromFile in -lXmu" >&5
ac_lib_var=`echo Xmu'_'XmuReadBitmapDataFromFile | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXmu "
cat > conftest.$ac_ext <<EOF
#line 7050 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmuReadBitmapDataFromFile();

int main() {
XmuReadBitmapDataFromFile()
; return 0; }
EOF
if { (eval echo configure:7061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xmu=yes
else
  echo "$ac_t""no" 1>&6
with_xmu=no
fi

 }
  if test "$with_xmu" = "no"; then
    extra_objs="$extra_objs xmu.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"xmu.o\""
 fi
  else
    libs_x="-lXmu $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXmu\" to \$libs_x"; fi
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XMU
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XMU 1
EOF
}

  fi

      
echo $ac_n "checking for main in -lXbsd""... $ac_c" 1>&6
echo "configure:7100: checking for main in -lXbsd" >&5
ac_lib_var=`echo Xbsd'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXbsd "
cat > conftest.$ac_ext <<EOF
#line 7105 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:7112: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lXbsd $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXbsd\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi



    if test "$unexec" = "unexaix.o" -a "$x11_release" = "6"; then
        if test "$GCC" = "yes"; then
                  echo $ac_n "checking for name of AIX gcc threads option""... $ac_c" 1>&6
echo "configure:7136: checking for name of AIX gcc threads option" >&5
      case `$CC -v --help 2>&1` in
        *-mthreads*) aix_threads=-mthreads ;;
                  *) aix_threads=-pthread  ;;
      esac
      echo "$ac_t""$aix_threads" 1>&6
      X_CFLAGS="$aix_threads $X_CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$aix_threads\" to \$X_CFLAGS"; fi
      libs_x="$aix_threads $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$aix_threads\" to \$libs_x"; fi
    else
            case "$CC" in *_r) : ;;
        *)
         xe_save_CC="$CC"
         CC="${CC}_r"
         echo $ac_n "checking size of short""... $ac_c" 1>&6
echo "configure:7150: checking size of short" >&5

cat > conftest.$ac_ext <<EOF
#line 7153 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(short));
  exit(0);
}
EOF
if { (eval echo configure:7164: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_sizeof_short=`cat conftestval`
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_short=0
fi
rm -fr conftest*
echo "$ac_t""$ac_cv_sizeof_short" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining SIZEOF_SHORT = $ac_cv_sizeof_short
EOF
cat >> confdefs.h <<EOF
#define SIZEOF_SHORT $ac_cv_sizeof_short
EOF
}


         test "$ac_cv_sizeof_short" = 0 && CC="$xe_save_CC" ;;
      esac
    fi
  fi

fi 
if test "$with_msw" != "no"; then
  echo "checking for MS-Windows" 1>&6
echo "configure:7193: checking for MS-Windows" >&5
  
echo $ac_n "checking for main in -lgdi32""... $ac_c" 1>&6
echo "configure:7196: checking for main in -lgdi32" >&5
ac_lib_var=`echo gdi32'_'main | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdi32 "
cat > conftest.$ac_ext <<EOF
#line 7201 "configure"
#include "confdefs.h"

int main() {
main()
; return 0; }
EOF
if { (eval echo configure:7208: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_msw=yes
else
  echo "$ac_t""no" 1>&6
fi


  if test "$with_msw" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MS_WINDOWS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MS_WINDOWS 1
EOF
}


        if test "$with_netinstall" = "yes"; then
      MAKE_SUBDIR="$MAKE_SUBDIR netinstall" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"netinstall\" to \$MAKE_SUBDIR"; fi
      SRC_SUBDIR_DEPS="$SRC_SUBDIR_DEPS netinstall" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"netinstall\" to \$SRC_SUBDIR_DEPS"; fi
      INSTALL_ARCH_DEP_SUBDIR="$INSTALL_ARCH_DEP_SUBDIR netinstall" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"netinstall\" to \$INSTALL_ARCH_DEP_SUBDIR"; fi
    fi

    install_pp="$srcdir/lib-src/installexe.sh"
    libs_system="$libs_system -lshell32 -lgdi32 -luser32 -lcomdlg32 -lcomctl32 -lkernel32 -lwinspool" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lshell32 -lgdi32 -luser32 -lcomdlg32 -lcomctl32 -lkernel32 -lwinspool\" to \$libs_system"; fi
    test "$with_dragndrop" != no && dragndrop_proto="$dragndrop_proto msw" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"msw\" to \$dragndrop_proto"; fi
    if test "$window_system" != x11; then
 	window_system=msw
	test "$with_scrollbars" != "no" && with_scrollbars=msw \
	    && extra_objs="$extra_objs scrollbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-msw.o\""
 fi
	test "$with_menubars"   != "no" && with_menubars=msw \
	    && extra_objs="$extra_objs menubar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-msw.o\""
 fi
	test "$with_toolbars"   != "no" && with_toolbars=msw \
	    && extra_objs="$extra_objs toolbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-msw.o\""
 fi
	test "$with_dialogs"   != "no" && with_dialogs=msw \
	    && extra_objs="$extra_objs dialog-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-msw.o\""
 fi
	test "$with_widgets"   != "no" && with_widgets=msw
    else
	test "$with_scrollbars" != "no" && extra_objs="$extra_objs scrollbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-msw.o\""
 fi
	test "$with_menubars"   != "no" && extra_objs="$extra_objs menubar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-msw.o\""
 fi
	test "$with_toolbars"   != "no" && extra_objs="$extra_objs toolbar-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-msw.o\""
 fi
	test "$with_dialogs"    != "no" && extra_objs="$extra_objs dialog-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-msw.o\""
 fi
    fi
        cat > conftest.$ac_ext <<EOF
#line 7281 "configure"
#include "confdefs.h"
#include <fcntl.h>
    int main() { return (open("/dev/windows", O_RDONLY, 0) > 0)? 0 : 1; }
EOF
if { (eval echo configure:7286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  need_event_unixoid=yes; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MSG_SELECT
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MSG_SELECT 1
EOF
}

else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -fr conftest*
    with_file_coding=yes
    extra_objs="$extra_objs console-msw.o device-msw.o event-msw.o frame-msw.o objects-msw.o select-msw.o redisplay-msw.o glyphs-msw.o gui-msw.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"console-msw.o device-msw.o event-msw.o frame-msw.o objects-msw.o select-msw.o redisplay-msw.o glyphs-msw.o gui-msw.o\""
 fi
  fi
fi



test -z "$window_system" && window_system="none"

if test "$window_system" = "none"; then
  for feature in menubars scrollbars toolbars dialogs dragndrop xface
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without window system support" 1>&2
    fi
    eval "with_${feature}=no"
  done
else
  test -z "$with_toolbars" && with_toolbars=yes
fi

if test "$with_msw" != "yes"; then
  for feature in   MARTIN_IS_CLUELESS_ABOUT_MSW_FEATURES
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without MS-Windows support" 1>&2
    fi
    eval "with_${feature}=no"
  done
else
  :
fi

if test "$with_x11" != "yes"; then
            for feature in tooltalk cde offix wmcommand xim xmu nas_sound
  do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
       echo "configure: warning: --with-$feature ignored:  Not valid without X support" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi

if test "$with_x11" = "yes"; then
  ac_safe=`echo "X11/extensions/shape.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/extensions/shape.h""... $ac_c" 1>&6
echo "configure:7350: checking for X11/extensions/shape.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7353 "configure"
#include "confdefs.h"
#include <X11/extensions/shape.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7358: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_BALLOON_HELP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_BALLOON_HELP 1
EOF
}

   extra_objs="$extra_objs balloon_help.o balloon-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"balloon_help.o balloon-x.o\""
 fi
else
  echo "$ac_t""no" 1>&6
fi

fi

bitmapdir=

case "$window_system" in
  x11  ) HAVE_X_WINDOWS=yes; echo "  Using X11." ;;
  msw  ) HAVE_X_WINDOWS=no ; echo "  Using MS-Windows." ;;
  gtk  )
       HAVE_X_WINDOWS=no
       test "$with_gnome" = "yes" && echo "  Using GNOME."
       test "$with_gnome" = "no" && echo "  Using GTK."
       ;;
  none ) HAVE_X_WINDOWS=no ; echo "  Using no window system." ;;
esac

case "$x_libraries" in *X11R4* )
  test "$opsys" = "hpux9"     && opsysfile="s/hpux9-x11r4.h"
  test "$opsys" = "hpux9-shr" && opsysfile="s/hpux9shxr4.h"
esac

echo "checking for WM_COMMAND option" 1>&6
echo "configure:7410: checking for WM_COMMAND option" >&5;
if test "$with_wmcommand" != "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WMCOMMAND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WMCOMMAND 1
EOF
}

fi

test -z "$with_xauth" && test "$window_system" = "none" && with_xauth=no
test -z "$with_xauth" && { ac_safe=`echo "X11/Xauth.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xauth.h""... $ac_c" 1>&6
echo "configure:7425: checking for X11/Xauth.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7428 "configure"
#include "confdefs.h"
#include <X11/Xauth.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7433: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi
 }
test -z "$with_xauth" && { 
echo $ac_n "checking for XauGetAuthByAddr in -lXau""... $ac_c" 1>&6
echo "configure:7456: checking for XauGetAuthByAddr in -lXau" >&5
ac_lib_var=`echo Xau'_'XauGetAuthByAddr | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXau "
cat > conftest.$ac_ext <<EOF
#line 7461 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XauGetAuthByAddr();

int main() {
XauGetAuthByAddr()
; return 0; }
EOF
if { (eval echo configure:7472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xauth=no
fi

 }
test -z "$with_xauth" && with_xauth=yes
if test "$with_xauth" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XAUTH
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XAUTH 1
EOF
}

  
T=""
for W in $GTK_LIBS $X_EXTRA_LIBS -lXau $libs_x $X_PRE_LIBS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
libs_xauth="$T"

fi




if test "$with_tooltalk" != "no" ; then
      for dir in "" "Tt/" "desktop/" ; do
    ac_safe=`echo "${dir}tt_c.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}tt_c.h""... $ac_c" 1>&6
echo "configure:7517: checking for ${dir}tt_c.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7520 "configure"
#include "confdefs.h"
#include <${dir}tt_c.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7525: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  tt_c_h_file="${dir}tt_c.h"; break
else
  echo "$ac_t""no" 1>&6
fi

  done
  if test -z "$tt_c_h_file"; then
    if test "$with_tooltalk" = "yes"; then
      (echo "$progname: Usage error:"
echo " " "Unable to find required tooltalk header files."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
    with_tooltalk=no
  fi
fi
if test "$with_tooltalk" != "no" ; then
  for extra_libs in "" "-lI18N -lce" "-lcxx"; do
    
xe_msg_checking="for tt_message_create in -ltt"
test -n "$extra_libs" && xe_msg_checking="$xe_msg_checking using extra libs $extra_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:7561: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo tt'_'tt_message_create | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltt $extra_libs"
cat > conftest.$ac_ext <<EOF
#line 7566 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tt_message_create();

int main() {
tt_message_create()
; return 0; }
EOF
if { (eval echo configure:7577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  tt_libs="-ltt $extra_libs"; break
else
  echo "$ac_t""no" 1>&6
:
fi


  done
  if test -z "$tt_libs"; then
    if test "$with_tooltalk" = "yes"; then
      (echo "$progname: Usage error:"
echo " " "Unable to find required tooltalk libraries."
echo "  Use \`$progname --help' to show usage.") >&2 && exit 1
    fi
    with_tooltalk=no
  fi
fi
test -z "$with_tooltalk" && with_tooltalk=yes
if test "$with_tooltalk" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TOOLTALK
EOF
cat >> confdefs.h <<\EOF
#define TOOLTALK 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TT_C_H_FILE = "$tt_c_h_file"
EOF
cat >> confdefs.h <<EOF
#define TT_C_H_FILE "$tt_c_h_file"
EOF
}

  libs_x="$tt_libs $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$tt_libs\" to \$libs_x"; fi
  extra_objs="$extra_objs tooltalk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tooltalk.o\""
 fi
fi

test -z "$with_cde" && { ac_safe=`echo "Dt/Dt.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Dt/Dt.h""... $ac_c" 1>&6
echo "configure:7634: checking for Dt/Dt.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7637 "configure"
#include "confdefs.h"
#include <Dt/Dt.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7642: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi
 }
test -z "$with_cde" && { 
echo $ac_n "checking for DtDndDragStart in -lDtSvc""... $ac_c" 1>&6
echo "configure:7665: checking for DtDndDragStart in -lDtSvc" >&5
ac_lib_var=`echo DtSvc'_'DtDndDragStart | sed 'y%./+-%__p_%'`

xe_check_libs=" -lDtSvc "
cat > conftest.$ac_ext <<EOF
#line 7670 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char DtDndDragStart();

int main() {
DtDndDragStart()
; return 0; }
EOF
if { (eval echo configure:7681: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_cde=no
fi

 }
test -z "$with_cde" && with_cde=yes
if test "$with_dragndrop" = no; then
  echo "configure: warning: No CDE without generic Drag'n'Drop support" 1>&2
  with_cde=no
fi
if test "$with_cde" = "yes" ; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CDE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CDE 1
EOF
}

  libs_x="-lDtSvc $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lDtSvc\" to \$libs_x"; fi
  dragndrop_proto="$dragndrop_proto CDE" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"CDE\" to \$dragndrop_proto"; fi
  with_tooltalk=yes # CDE requires Tooltalk
  need_motif=yes    # CDE requires Motif
fi

test "$window_system" != "x11" && with_offix=no
if test "$with_xmu" != yes -a "$with_x11" = yes; then
  echo "configure: warning: No OffiX without real Xmu support" 1>&2
  with_offix=no
fi
if test "$with_dragndrop" = no; then
  echo "configure: warning: No OffiX without generic Drag'n'Drop support" 1>&2
  with_offix=no
fi
if test "$with_cde" = yes; then
  echo "configure: warning: CDE already found, disabling OffiX support" 1>&2
  with_offix=no
fi
test -z "$with_offix" && with_offix=no
if test "$with_offix" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_OFFIX_DND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_OFFIX_DND 1
EOF
}

  dnd_objs="$dnd_objs offix.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"offix.o\" to \$dnd_objs"; fi
  dragndrop_proto="$dragndrop_proto OffiX" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"OffiX\" to \$dragndrop_proto"; fi
fi
if test "$with_gtk" = "yes"; then
   dragndrop_proto="$dragndrop_proto GTK" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"GTK\" to \$dragndrop_proto"; fi
fi

if test "$with_dragndrop" != "no" ; then
  echo $ac_n "checking if drag and drop API is needed""... $ac_c" 1>&6
echo "configure:7754: checking if drag and drop API is needed" >&5
  if test -n "$dragndrop_proto" ; then
    with_dragndrop=yes
    echo "$ac_t""yes (${dragndrop_proto} )" 1>&6
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DRAGNDROP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DRAGNDROP 1
EOF
}

    extra_objs="$extra_objs dragdrop.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"dragdrop.o\" to \$extra_objs"; fi
  else
    with_dragndrop=no
    echo "$ac_t""no" 1>&6
  fi
fi

echo "checking for LDAP" 1>&6
echo "configure:7774: checking for LDAP" >&5
test -z "$with_ldap" && { ac_safe=`echo "ldap.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ldap.h""... $ac_c" 1>&6
echo "configure:7777: checking for ldap.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7780 "configure"
#include "confdefs.h"
#include <ldap.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7785: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_ldap=no
fi
 }
test -z "$with_ldap" && { ac_safe=`echo "lber.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for lber.h""... $ac_c" 1>&6
echo "configure:7808: checking for lber.h" >&5

cat > conftest.$ac_ext <<EOF
#line 7811 "configure"
#include "confdefs.h"
#include <lber.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:7816: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_ldap=no
fi
 }
if test no != "$with_ldap";then
  if test . != "${ldap_libs+.}";then
    ldap_libs=
    echo $ac_n "checking for ldap_open""... $ac_c" 1>&6
echo "configure:7841: checking for ldap_open" >&5

cat > conftest.$ac_ext <<EOF
#line 7844 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char ldap_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_ldap_open) || defined (__stub___ldap_open)
choke me
#else
ldap_open();
#endif

; return 0; }
EOF
if { (eval echo configure:7867: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_ldap_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_ldap_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'ldap_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
        with_ldap=yes
      test yes = "$extra_verbose" &&
	echo "Setting ldap_libs to $ldap_libs"
else
  echo "$ac_t""no" 1>&6
      
echo $ac_n "checking for ldap_open in -lldap""... $ac_c" 1>&6
echo "configure:7887: checking for ldap_open in -lldap" >&5
ac_lib_var=`echo ldap'_'ldap_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap "
cat > conftest.$ac_ext <<EOF
#line 7892 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {
ldap_open()
; return 0; }
EOF
if { (eval echo configure:7903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ldap=yes
else
  echo "$ac_t""no" 1>&6
ldap_needs_lber=yes ldap_other_libs=-llber
	
xe_msg_checking="for ldap_open in -lldap"
test -n "$ldap_other_libs" && xe_msg_checking="$xe_msg_checking using extra libs $ldap_other_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:7925: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo ldap'_'ldap_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap $ldap_other_libs"
cat > conftest.$ac_ext <<EOF
#line 7930 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {
ldap_open()
; return 0; }
EOF
if { (eval echo configure:7941: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ldap=yes
else
  echo "$ac_t""no" 1>&6
ldap_needs_krb=yes ldap_other_libs="$ldap_other_libs -lkrb"
	  
xe_msg_checking="for ldap_open in -lldap"
test -n "$ldap_other_libs" && xe_msg_checking="$xe_msg_checking using extra libs $ldap_other_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:7963: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo ldap'_'ldap_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap $ldap_other_libs"
cat > conftest.$ac_ext <<EOF
#line 7968 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {
ldap_open()
; return 0; }
EOF
if { (eval echo configure:7979: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ldap=yes
else
  echo "$ac_t""no" 1>&6
ldap_needs_des=yes ldap_other_libs="$ldap_other_libs -ldes"
	    
xe_msg_checking="for ldap_open in -lldap"
test -n "$ldap_other_libs" && xe_msg_checking="$xe_msg_checking using extra libs $ldap_other_libs"
echo $ac_n "checking "$xe_msg_checking"""... $ac_c" 1>&6
echo "configure:8001: checking "$xe_msg_checking"" >&5
ac_lib_var=`echo ldap'_'ldap_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lldap $ldap_other_libs"
cat > conftest.$ac_ext <<EOF
#line 8006 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {
ldap_open()
; return 0; }
EOF
if { (eval echo configure:8017: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ldap=yes
else
  echo "$ac_t""no" 1>&6
with_ldap=no
fi


fi


fi


fi


      if test yes = "$with_ldap" -a yes != "$ldap_needs_lber";then
	echo $ac_n "checking for LDAP_OPT_ON definition""... $ac_c" 1>&6
echo "configure:8049: checking for LDAP_OPT_ON definition" >&5

cat > conftest.$ac_ext <<EOF
#line 8052 "configure"
#include "confdefs.h"
#include <lber.h>
#include <ldap.h>
#ifdef LDAP_OPT_ON
/* Relying on const defined by ac_c_const (upper case). */
const void *const v = LDAP_OPT_ON;
#else /* !defined (LDAP_OPT_ON) */
choke me
#endif /* !defined (LDAP_OPT_ON) */
int main() {

; return 0; }
EOF
if { (eval echo configure:8066: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  xe_cv_have_LDAP_OPT_ON=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  xe_cv_have_LDAP_OPT_ON=no
fi
rm -f conftest*

echo "$ac_t""$xe_cv_have_LDAP_OPT_ON" 1>&6
	if test yes = "$xe_cv_have_LDAP_OPT_ON";then
	  echo $ac_n "checking LDAP_OPT_ON linking""... $ac_c" 1>&6
echo "configure:8080: checking LDAP_OPT_ON linking" >&5

xe_save_LIBS="$LIBS"
	    LIBS="-lldap $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8085 "configure"
#include "confdefs.h"
#include <lber.h>
#include <ldap.h>
const void *const v = LDAP_OPT_ON;
int main() {

; return 0; }
EOF
if { (eval echo configure:8094: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  xe_cv_LDAP_OPT_ON_links=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  xe_cv_LDAP_OPT_ON_links=no
fi
rm -f conftest*
	    LIBS="$xe_save_LIBS"

echo "$ac_t""$xe_cv_LDAP_OPT_ON_links" 1>&6
	  if test yes != "$xe_cv_LDAP_OPT_ON_links";then
	    ldap_needs_lber=yes ldap_other_libs=-llber
	    echo $ac_n "checking LDAP_OPT_ON linking with -llber""... $ac_c" 1>&6
echo "configure:8110: checking LDAP_OPT_ON linking with -llber" >&5

xe_save_LIBS="$LIBS"
	      LIBS="-lldap $ldap_other_libs $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8115 "configure"
#include "confdefs.h"
#include <lber.h>
#include <ldap.h>
const void *const v = LDAP_OPT_ON;
int main() {

; return 0; }
EOF
if { (eval echo configure:8124: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  xe_cv_LDAP_OPT_ON_links_w_lber=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  xe_cv_LDAP_OPT_ON_links_w_lber=no
fi
rm -f conftest*
	      LIBS="$xe_save_LIBS"

echo "$ac_t""$xe_cv_LDAP_OPT_ON_links_w_lber" 1>&6
	    if test yes != "$xe_cv_LDAP_OPT_ON_links_w_lber";then
	      with_ldap=no
	    fi
	  fi
	fi
      fi
      if test yes = "$with_ldap";then
	if test yes = "$ldap_needs_des";then
	  ldap_libs="-ldes $ldap_libs" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ldes\" to \$ldap_libs"; fi
	fi
	if test yes = "$ldap_needs_krb";then
	  ldap_libs="-lkrb $ldap_libs" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lkrb\" to \$ldap_libs"; fi
	fi
	if test yes = "$ldap_needs_lber";then
	  ldap_libs="-llber $ldap_libs" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-llber\" to \$ldap_libs"; fi
	fi
	ldap_libs="-lldap $ldap_libs" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lldap\" to \$ldap_libs"; fi
      fi
fi

  else
    save_LIBS="$LIBS" LIBS="$ldap_libs $LIBS"
    echo $ac_n "checking for ldap_open""... $ac_c" 1>&6
echo "configure:8160: checking for ldap_open" >&5

cat > conftest.$ac_ext <<EOF
#line 8163 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char ldap_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ldap_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_ldap_open) || defined (__stub___ldap_open)
choke me
#else
ldap_open();
#endif

; return 0; }
EOF
if { (eval echo configure:8186: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_ldap_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_ldap_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'ldap_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
        with_ldap=yes
      test yes = "$extra_verbose" &&
	echo "Setting ldap_libs to $ldap_libs"
else
  echo "$ac_t""no" 1>&6
      with_ldap=no
fi

    LIBS="$save_LIBS"
  fi
fi
if test "$with_ldap" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LDAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LDAP 1
EOF
}

  extra_objs="$extra_objs eldap.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"eldap.o\""
 fi
  LIBS="$ldap_libs $LIBS"
  for ac_func in ldap_set_option ldap_get_lderrno ldap_result2error ldap_parse_result
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:8226: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 8229 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:8252: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi

if test "$with_postgresql" != "no"; then
  echo "checking for PostgreSQL" 1>&6
echo "configure:8283: checking for PostgreSQL" >&5

  for header_dir in "" "pgsql/" "postgresql/"; do
    ac_safe=`echo "${header_dir}libpq-fe.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${header_dir}libpq-fe.h""... $ac_c" 1>&6
echo "configure:8288: checking for ${header_dir}libpq-fe.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8291 "configure"
#include "confdefs.h"
#include <${header_dir}libpq-fe.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8296: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  libpq_fe_h_file=${header_dir}libpq-fe.h; break
else
  echo "$ac_t""no" 1>&6
fi

  done

  test -n "$libpq_fe_h_file" && { 
echo $ac_n "checking for PQconnectdb in -lpq""... $ac_c" 1>&6
echo "configure:8320: checking for PQconnectdb in -lpq" >&5
ac_lib_var=`echo pq'_'PQconnectdb | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpq "
cat > conftest.$ac_ext <<EOF
#line 8325 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQconnectdb();

int main() {
PQconnectdb()
; return 0; }
EOF
if { (eval echo configure:8336: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_libpq=yes
else
  echo "$ac_t""no" 1>&6
fi

 }

  if test -n "$libpq_fe_h_file" -a "$have_libpq" = "yes"; then
    with_postgresql=yes
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_POSTGRESQL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_POSTGRESQL 1
EOF
}

    
echo $ac_n "checking for PQconnectStart in -lpq""... $ac_c" 1>&6
echo "configure:8369: checking for PQconnectStart in -lpq" >&5
ac_lib_var=`echo pq'_'PQconnectStart | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpq "
cat > conftest.$ac_ext <<EOF
#line 8374 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQconnectStart();

int main() {
PQconnectStart()
; return 0; }
EOF
if { (eval echo configure:8385: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_postgresqlv7=yes;
                 { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_POSTGRESQLV7
EOF
cat >> confdefs.h <<\EOF
#define HAVE_POSTGRESQLV7 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi


    { test "$extra_verbose" = "yes" && cat << EOF
    Defining LIBPQ_FE_H_FILE = "$libpq_fe_h_file"
EOF
cat >> confdefs.h <<EOF
#define LIBPQ_FE_H_FILE "$libpq_fe_h_file"
EOF
}

    LIBS="-lpq $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lpq\" to \$LIBS"; fi
    extra_objs="$extra_objs postgresql.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"postgresql.o\""
 fi
  elif test "$with_postgresql" = "yes"; then
    { echo "Error:" "Required PostgreSQL support cannot be provided.  Check --site-prefixes." >&2; exit 1; }
  fi
fi


if test "$window_system" != "none"; then
  echo "checking for graphics libraries" 1>&6
echo "configure:8433: checking for graphics libraries" >&5

      libpath_xpm=
  incpath_xpm=
  libname_xpm="-lXpm"
  case "$opsys" in 
    cygwin*)
      cygwin_top=`eval gcc -print-search-dirs | sed -ne s'/install: //p'`
      cygwin_top=`eval "cd $cygwin_top/../../../..; pwd"`
      case "$window_system" in
                x11)  ;;
                msw) libpath_xpm="-L${cygwin_top}/lib/noX"
             incpath_xpm="-I${cygwin_top}/include/noX"
             libname_xpm="-lXpm-noX"
              ;;
                gtk)  ;;
                none) ;;
                *)    ;;
      esac
      ;;
        *) ;;
  esac
    xpm_problem=""
  if test -z "$with_xpm"; then
    CFLAGS=""$incpath_xpm" $CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$incpath_xpm"\" to \$CFLAGS"; fi
    LDFLAGS=""$libpath_xpm" $LDFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$libpath_xpm"\" to \$LDFLAGS"; fi
    echo $ac_n "checking for Xpm - no older than 3.4f""... $ac_c" 1>&6
echo "configure:8460: checking for Xpm - no older than 3.4f" >&5
    xe_check_libs="$libname_xpm"
    cat > conftest.$ac_ext <<EOF
#line 8463 "configure"
#include "confdefs.h"
#define XPM_NUMBERS
#include <X11/xpm.h>
    int main(int c, char **v) {
    return c == 1 ? 0 :
      XpmIncludeVersion != XpmLibraryVersion() ? 1 :
      XpmIncludeVersion < 30406 ? 2 : 0 ;}
EOF
if { (eval echo configure:8472: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest dummy_arg; xpm_status=$?;
      if test "$xpm_status" = "0"; then
        with_xpm=yes;
      else
        with_xpm=no;
        if test "$xpm_status" = "1"; then
          xpm_problem="Xpm library version and header file version don't match!"
        elif test "$xpm_status" = "2"; then
          xpm_problem="Xpm library version is too old!"
        else
          xpm_problem="Internal xpm detection logic error!"
        fi
        echo "
*** WARNING *** $xpm_problem
  I'm not touching that with a 10-foot pole!
  If you really want to use the installed version of Xpm, rerun
  configure and add '--with-xpm=yes', but don't blame me if XEmacs crashes!"
    fi
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  with_xpm=no
fi
rm -fr conftest*
    xe_check_libs=
    echo "$ac_t""$with_xpm" 1>&6
  fi
  if test "$with_xpm" = "yes"; then
                { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XPM 1
EOF
}

    LDFLAGS=""$libpath_xpm" $LDFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$libpath_xpm"\" to \$LDFLAGS"; fi
    libs_x=""$libname_xpm" $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$libname_xpm"\" to \$libs_x"; fi
    CFLAGS=""$incpath_xpm" $CFLAGS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$incpath_xpm"\" to \$CFLAGS"; fi
    echo $ac_n "checking for \"FOR_MSW\" xpm""... $ac_c" 1>&6
echo "configure:8516: checking for \"FOR_MSW\" xpm" >&5
    xe_check_libs="$libname_xpm"
    cat > conftest.$ac_ext <<EOF
#line 8519 "configure"
#include "confdefs.h"

int main() {
XpmCreatePixmapFromData()
; return 0; }
EOF
if { (eval echo configure:8526: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  xpm_for_msw=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  xpm_for_msw=yes
fi
rm -f conftest*
    xe_check_libs=
    echo "$ac_t""$xpm_for_msw" 1>&6
    if test "$xpm_for_msw" = "yes"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FOR_MSW
EOF
cat >> confdefs.h <<\EOF
#define FOR_MSW 1
EOF
}

    fi
  fi

    test -z "$with_xface" && { ac_safe=`echo "compface.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for compface.h""... $ac_c" 1>&6
echo "configure:8552: checking for compface.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8555 "configure"
#include "confdefs.h"
#include <compface.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8560: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi
 }
  test -z "$with_xface" && { 
echo $ac_n "checking for UnGenFace in -lcompface""... $ac_c" 1>&6
echo "configure:8583: checking for UnGenFace in -lcompface" >&5
ac_lib_var=`echo compface'_'UnGenFace | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcompface "
cat > conftest.$ac_ext <<EOF
#line 8588 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char UnGenFace();

int main() {
UnGenFace()
; return 0; }
EOF
if { (eval echo configure:8599: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  : 
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi

 }
  test -z "$with_xface" && with_xface=yes
  if test "$with_xface" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFACE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFACE 1
EOF
}

    libs_x="-lcompface $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcompface\" to \$libs_x"; fi
  fi

        if test "$with_gif" != "no"; then
    with_gif="yes"
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GIF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GIF 1
EOF
}

    extra_objs="$extra_objs dgif_lib.o gif_io.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dgif_lib.o gif_io.o\""
 fi
  fi

      if test "$with_png $with_tiff" != "no no"; then
    
echo $ac_n "checking for inflate in -lc""... $ac_c" 1>&6
echo "configure:8651: checking for inflate in -lc" >&5
ac_lib_var=`echo c'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lc "
cat > conftest.$ac_ext <<EOF
#line 8656 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:8667: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for inflate in -lz""... $ac_c" 1>&6
echo "configure:8686: checking for inflate in -lz" >&5
ac_lib_var=`echo z'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lz "
cat > conftest.$ac_ext <<EOF
#line 8691 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:8702: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lz $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lz\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for inflate in -lgz""... $ac_c" 1>&6
echo "configure:8721: checking for inflate in -lgz" >&5
ac_lib_var=`echo gz'_'inflate | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgz "
cat > conftest.$ac_ext <<EOF
#line 8726 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inflate();

int main() {
inflate()
; return 0; }
EOF
if { (eval echo configure:8737: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-lgz $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lgz\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi


fi


fi


  fi

    test -z "$with_jpeg" && { ac_safe=`echo "jpeglib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for jpeglib.h""... $ac_c" 1>&6
echo "configure:8767: checking for jpeglib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8770 "configure"
#include "confdefs.h"
#include <jpeglib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8775: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi
 }
  test -z "$with_jpeg" && { 
echo $ac_n "checking for jpeg_destroy_decompress in -ljpeg""... $ac_c" 1>&6
echo "configure:8798: checking for jpeg_destroy_decompress in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_destroy_decompress | sed 'y%./+-%__p_%'`

xe_check_libs=" -ljpeg "
cat > conftest.$ac_ext <<EOF
#line 8803 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_destroy_decompress();

int main() {
jpeg_destroy_decompress()
; return 0; }
EOF
if { (eval echo configure:8814: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_jpeg=no
fi

 }
  test -z "$with_jpeg" && with_jpeg=yes
  if test "$with_jpeg" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_JPEG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_JPEG 1
EOF
}

    libs_x="-ljpeg $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ljpeg\" to \$libs_x"; fi
  fi

    png_problem=""
  test -z "$with_png" && { echo $ac_n "checking for pow""... $ac_c" 1>&6
echo "configure:8850: checking for pow" >&5

cat > conftest.$ac_ext <<EOF
#line 8853 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char pow(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pow();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_pow) || defined (__stub___pow)
choke me
#else
pow();
#endif

; return 0; }
EOF
if { (eval echo configure:8876: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_pow=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_pow=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'pow`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
  test -z "$with_png" && { ac_safe=`echo "png.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for png.h""... $ac_c" 1>&6
echo "configure:8897: checking for png.h" >&5

cat > conftest.$ac_ext <<EOF
#line 8900 "configure"
#include "confdefs.h"
#include <png.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:8905: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi
 }
  test -z "$with_png" && { 
echo $ac_n "checking for png_read_image in -lpng""... $ac_c" 1>&6
echo "configure:8928: checking for png_read_image in -lpng" >&5
ac_lib_var=`echo png'_'png_read_image | sed 'y%./+-%__p_%'`

xe_check_libs=" -lpng "
cat > conftest.$ac_ext <<EOF
#line 8933 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_read_image();

int main() {
png_read_image()
; return 0; }
EOF
if { (eval echo configure:8944: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_png=no
fi

 }
  if test -z "$with_png"; then
    echo $ac_n "checking for workable png version information""... $ac_c" 1>&6
echo "configure:8967: checking for workable png version information" >&5
    xe_check_libs="-lpng -lz"
    cat > conftest.$ac_ext <<EOF
#line 8970 "configure"
#include "confdefs.h"
#include <png.h>
    int main(int c, char **v) {
    if (c == 1) return 0;
    if (strcmp(png_libpng_ver, PNG_LIBPNG_VER_STRING) != 0) return 1;
    return (PNG_LIBPNG_VER < 10002) ? 2 : 0 ;}
EOF
if { (eval echo configure:8978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ./conftest dummy_arg; png_status=$?;
      if test "$png_status" = "0"; then
	with_png=yes;
      else
	with_png=no;
	if test "$png_status" = "1"; then
	  png_problem="PNG library version and header file don't match!"
        elif test "$png_status" = "2"; then
	  png_problem="PNG library version too old (pre 1.0.2)!"
	fi
	echo "
*** WARNING *** $png_problem
  I'm not touching that with a 10-foot pole!
  If you really want to use the installed version of libPNG, rerun
  configure and add '--with-png=yes', but don't blame me if XEmacs crashes!"
    fi
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  with_png=no
fi
rm -fr conftest*
    xe_check_libs=
    echo "$ac_t""$with_png" 1>&6
  fi
  if test "$with_png" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_PNG
EOF
cat >> confdefs.h <<\EOF
#define HAVE_PNG 1
EOF
}

    libs_x="-lpng $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lpng\" to \$libs_x"; fi
  fi

    test -z "$with_tiff" && { ac_safe=`echo "tiffio.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for tiffio.h""... $ac_c" 1>&6
echo "configure:9021: checking for tiffio.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9024 "configure"
#include "confdefs.h"
#include <tiffio.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9029: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_tiff=no
fi
 }
  test -z "$with_tiff" && { 
echo $ac_n "checking for TIFFClientOpen in -ltiff""... $ac_c" 1>&6
echo "configure:9052: checking for TIFFClientOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFClientOpen | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltiff "
cat > conftest.$ac_ext <<EOF
#line 9057 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFClientOpen();

int main() {
TIFFClientOpen()
; return 0; }
EOF
if { (eval echo configure:9068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_tiff=no
fi

 }
  test -z "$with_tiff" && with_tiff=yes
  if test "$with_tiff" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TIFF
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TIFF 1
EOF
}

    libs_x="-ltiff $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ltiff\" to \$libs_x"; fi
  fi
fi


if test "$with_gtk" = "yes"; then
    test -z "$with_xface" && { ac_safe=`echo "compface.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for compface.h""... $ac_c" 1>&6
echo "configure:9107: checking for compface.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9110 "configure"
#include "confdefs.h"
#include <compface.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9115: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi
 }
  test -z "$with_xface" && { 
echo $ac_n "checking for UnGenFace in -lcompface""... $ac_c" 1>&6
echo "configure:9138: checking for UnGenFace in -lcompface" >&5
ac_lib_var=`echo compface'_'UnGenFace | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcompface "
cat > conftest.$ac_ext <<EOF
#line 9143 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char UnGenFace();

int main() {
UnGenFace()
; return 0; }
EOF
if { (eval echo configure:9154: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  : 
else
  echo "$ac_t""no" 1>&6
with_xface=no
fi

 }
  test -z "$with_xface" && with_xface=yes
  if test "$with_xface" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XFACE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XFACE 1
EOF
}

    libs_gtk="-lcompface $libs_gtk" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcompface\" to \$libs_gtk"; fi
  fi
fi



if test "$with_x11" = "yes"; then
  echo "checking for X11 graphics libraries" 1>&6
echo "configure:9193: checking for X11 graphics libraries" >&5
fi

if test "$with_x11" = "yes"; then
  echo "checking for the Athena widgets" 1>&6
echo "configure:9198: checking for the Athena widgets" >&5

    case "$with_athena" in
        "xaw" | "")	athena_variant=Xaw	athena_3d=no  ;;
    "3d")	athena_variant=Xaw3d	athena_3d=yes ;;
    "next")	athena_variant=neXtaw	athena_3d=yes ;;
    "95")	athena_variant=Xaw95	athena_3d=yes ;;
    "xpm")	athena_variant=XawXpm	athena_3d=yes ;;
    *)		{ echo "Error:" "Unknown Athena widget set \`$with_athena'. This should not happen." >&2; exit 1; } ;;
  esac

  athena_3d_function=Xaw3dComputeBottomShadowRGB

    if test "$athena_3d" = "no"; then
    
echo $ac_n "checking for XawScrollbarSetThumb in -l$athena_variant""... $ac_c" 1>&6
echo "configure:9214: checking for XawScrollbarSetThumb in -l$athena_variant" >&5
ac_lib_var=`echo $athena_variant'_'XawScrollbarSetThumb | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$athena_variant "
cat > conftest.$ac_ext <<EOF
#line 9219 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XawScrollbarSetThumb();

int main() {
XawScrollbarSetThumb()
; return 0; }
EOF
if { (eval echo configure:9230: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
          
echo $ac_n "checking for $athena_3d_function in -l$athena_variant""... $ac_c" 1>&6
echo "configure:9246: checking for $athena_3d_function in -l$athena_variant" >&5
ac_lib_var=`echo $athena_variant'_'$athena_3d_function | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$athena_variant "
cat > conftest.$ac_ext <<EOF
#line 9251 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $athena_3d_function();

int main() {
$athena_3d_function()
; return 0; }
EOF
if { (eval echo configure:9262: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  echo "configure: warning: "Could not find a non-3d Athena widget library."" 1>&2
else
  echo "$ac_t""no" 1>&6
athena_lib=$athena_variant
fi


      
else
  echo "$ac_t""no" 1>&6
echo "configure: warning: "Could not find an Athena widget library."" 1>&2
fi


  else
        
echo $ac_n "checking for $athena_3d_function in -l$athena_variant""... $ac_c" 1>&6
echo "configure:9293: checking for $athena_3d_function in -l$athena_variant" >&5
ac_lib_var=`echo $athena_variant'_'$athena_3d_function | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$athena_variant "
cat > conftest.$ac_ext <<EOF
#line 9298 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $athena_3d_function();

int main() {
$athena_3d_function()
; return 0; }
EOF
if { (eval echo configure:9309: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  athena_lib=$athena_variant
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for $athena_3d_function in -lXaw""... $ac_c" 1>&6
echo "configure:9327: checking for $athena_3d_function in -lXaw" >&5
ac_lib_var=`echo Xaw'_'$athena_3d_function | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXaw "
cat > conftest.$ac_ext <<EOF
#line 9332 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $athena_3d_function();

int main() {
$athena_3d_function()
; return 0; }
EOF
if { (eval echo configure:9343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  athena_lib=Xaw;
          echo "configure: warning: "Assuming that libXaw is actually $athena_variant."" 1>&2;
        
else
  echo "$ac_t""no" 1>&6
echo "configure: warning: "Could not find a 3d Athena widget library that looked like $athena_variant."" 1>&2
fi


fi


  fi

    if test "$athena_3d" = "no"; then
    ac_safe=`echo "X11/Xaw/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xaw/ThreeD.h""... $ac_c" 1>&6
echo "configure:9374: checking for X11/Xaw/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9377 "configure"
#include "confdefs.h"
#include <X11/Xaw/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9382: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  echo "configure: warning: "Could not find a non-3d Athena header set."" 1>&2
else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "X11/Xaw/XawInit.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xaw/XawInit.h""... $ac_c" 1>&6
echo "configure:9402: checking for X11/Xaw/XawInit.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9405 "configure"
#include "confdefs.h"
#include <X11/Xaw/XawInit.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9410: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  athena_h_path=X11/Xaw
else
  echo "$ac_t""no" 1>&6
echo "configure: warning: "Could not find a non-3d Athena header set."" 1>&2
fi

fi

  else
            ac_safe=`echo "X11/$athena_variant/XawInit.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/$athena_variant/XawInit.h""... $ac_c" 1>&6
echo "configure:9436: checking for X11/$athena_variant/XawInit.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9439 "configure"
#include "confdefs.h"
#include <X11/$athena_variant/XawInit.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9444: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "X11/$athena_variant/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/$athena_variant/ThreeD.h""... $ac_c" 1>&6
echo "configure:9461: checking for X11/$athena_variant/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9464 "configure"
#include "confdefs.h"
#include <X11/$athena_variant/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9469: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  athena_h_path=X11/$athena_variant
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


        if test -z "$athena_h_path"; then
      ac_safe=`echo "$athena_variant/XawInit.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $athena_variant/XawInit.h""... $ac_c" 1>&6
echo "configure:9497: checking for $athena_variant/XawInit.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9500 "configure"
#include "confdefs.h"
#include <$athena_variant/XawInit.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9505: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "$athena_variant/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $athena_variant/ThreeD.h""... $ac_c" 1>&6
echo "configure:9522: checking for $athena_variant/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9525 "configure"
#include "confdefs.h"
#include <$athena_variant/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9530: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  athena_h_path=$athena_variant
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

    fi

        if test -z "$athena_h_path" -a "$athena_variant" != "Xaw3d"; then
      ac_safe=`echo "X11/Xaw3d/XawInit.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xaw3d/XawInit.h""... $ac_c" 1>&6
echo "configure:9559: checking for X11/Xaw3d/XawInit.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9562 "configure"
#include "confdefs.h"
#include <X11/Xaw3d/XawInit.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9567: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "X11/Xaw3d/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xaw3d/ThreeD.h""... $ac_c" 1>&6
echo "configure:9584: checking for X11/Xaw3d/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9587 "configure"
#include "confdefs.h"
#include <X11/Xaw3d/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9592: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
            echo "configure: warning: "Assuming that X11/Xaw3d headers are suitable for $athena_variant."" 1>&2
            athena_h_path=X11/Xaw3d
          
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

    fi

        if test -z "$athena_h_path" -a "$athena_variant" != "Xaw3d"; then
      ac_safe=`echo "Xaw3d/XawInit.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xaw3d/XawInit.h""... $ac_c" 1>&6
echo "configure:9624: checking for Xaw3d/XawInit.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9627 "configure"
#include "confdefs.h"
#include <Xaw3d/XawInit.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9632: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "Xaw3d/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xaw3d/ThreeD.h""... $ac_c" 1>&6
echo "configure:9649: checking for Xaw3d/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9652 "configure"
#include "confdefs.h"
#include <Xaw3d/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9657: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
            echo "configure: warning: "Assuming that Xaw3d headers are suitable for $athena_variant."" 1>&2
            athena_h_path=Xaw3d
          
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

    fi

            if test -z "$athena_h_path"; then
      ac_safe=`echo "X11/Xaw/ThreeD.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for X11/Xaw/ThreeD.h""... $ac_c" 1>&6
echo "configure:9689: checking for X11/Xaw/ThreeD.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9692 "configure"
#include "confdefs.h"
#include <X11/Xaw/ThreeD.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9697: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
          echo "configure: warning: "Assuming that X11/Xaw headers are suitable for $athena_variant."" 1>&2
          athena_h_path=X11/Xaw
        
else
  echo "$ac_t""no" 1>&6
echo "configure: warning: "Could not find a suitable 3d Athena header set."" 1>&2
fi

    fi
  fi

    if test -n "$athena_lib" -a -n "$athena_h_path"; then
    have_xaw=yes
  else
    have_xaw=no
  fi

else
  have_xaw=no
fi 
if test "$with_x11" = "yes"; then
    ac_safe=`echo "Xm/Xm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for Xm/Xm.h""... $ac_c" 1>&6
echo "configure:9736: checking for Xm/Xm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 9739 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:9744: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking for XmStringFree in -lXm""... $ac_c" 1>&6
echo "configure:9761: checking for XmStringFree in -lXm" >&5
ac_lib_var=`echo Xm'_'XmStringFree | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 9766 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmStringFree();

int main() {
XmStringFree()
; return 0; }
EOF
if { (eval echo configure:9777: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_motif=yes
else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


else
  echo "$ac_t""no" 1>&6
have_motif=no
fi


  if test "$have_motif" = "yes"; then
        echo $ac_n "checking for Lesstif""... $ac_c" 1>&6
echo "configure:9806: checking for Lesstif" >&5
    cat > conftest.$ac_ext <<EOF
#line 9808 "configure"
#include "confdefs.h"
#include <Xm/Xm.h>
#ifdef LESSTIF_VERSION
yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  have_lesstif=yes
else
  rm -rf conftest*
  have_lesstif=no
fi
rm -f conftest*

  echo "$ac_t""$have_lesstif" 1>&6
  fi

fi 

case "$opsys" in
  *linux* | cygwin* )  lucid_prefers_motif="no"  ;;
  * )        lucid_prefers_motif="yes" ;;
esac

case "$with_menubars" in "" | "yes" | "athena" )
  with_menubars="lucid" ;;
esac
case "$with_dialogs" in "" | "yes" | "lucid" )
  if test "$lucid_prefers_motif" = "yes"; then
    if   test "$have_motif"     = "yes"; then with_dialogs="motif"
    elif test "$have_xaw"       = "yes"; then with_dialogs="athena"
    else with_dialogs=no
    fi
  else
    if   test "$have_xaw"       = "yes"; then with_dialogs="athena"
    elif test "$have_motif"     = "yes"; then with_dialogs="motif"
    else with_dialogs=no
    fi
  fi ;;
esac
case "$with_scrollbars" in "" | "yes" )
  with_scrollbars="lucid" ;;
esac
case "$with_widgets" in
  "yes" | "lucid")
    if test "$lucid_prefers_motif" = "yes"; then
      if   test "$have_motif" = "yes"; then with_widgets="motif"
      elif test "$have_xaw"   = "yes"; then with_widgets="athena"
      else with_widgets=no
      fi
    else
      if   test "$have_xaw"   = "yes"; then with_widgets="athena"
      elif test "$have_motif" = "yes"; then with_widgets="motif"
      else with_widgets=no
      fi
    fi ;;
  "" )
    with_widgets=no ;;
esac

all_widgets="$with_menubars $with_scrollbars $with_dialogs $with_toolbars $with_widgets"

case "$all_widgets" in
  *athena* )
    if test "$have_xaw" != "yes"; then
      { echo "Error:" "Could not find a suitable Athena library to build with." >&2; exit 1; }
    fi

        lwlib_objs="$lwlib_objs lwlib-Xaw.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xaw.o\" to \$lwlib_objs"; fi

        libs_x="-l$athena_lib $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l$athena_lib\" to \$libs_x"; fi

                    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Scrollbar_h_ = "$athena_h_path/Scrollbar.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Scrollbar_h_ "$athena_h_path/Scrollbar.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Dialog_h_ = "$athena_h_path/Dialog.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Dialog_h_ "$athena_h_path/Dialog.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Form_h_ = "$athena_h_path/Form.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Form_h_ "$athena_h_path/Form.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Command_h_ = "$athena_h_path/Command.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Command_h_ "$athena_h_path/Command.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Label_h_ = "$athena_h_path/Label.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Label_h_ "$athena_h_path/Label.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_LabelP_h_ = "$athena_h_path/LabelP.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_LabelP_h_ "$athena_h_path/LabelP.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_Toggle_h_ = "$athena_h_path/Toggle.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_Toggle_h_ "$athena_h_path/Toggle.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_ToggleP_h_ = "$athena_h_path/ToggleP.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_ToggleP_h_ "$athena_h_path/ToggleP.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_AsciiText_h_ = "$athena_h_path/AsciiText.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_AsciiText_h_ "$athena_h_path/AsciiText.h"
EOF
}

    { test "$extra_verbose" = "yes" && cat << EOF
    Defining ATHENA_XawInit_h_ = "$athena_h_path/XawInit.h"
EOF
cat >> confdefs.h <<EOF
#define ATHENA_XawInit_h_ "$athena_h_path/XawInit.h"
EOF
}


    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_ATHENA 1
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define NEED_ATHENA 1
EOF
}

    need_athena="yes"

    if test "$athena_3d" = "yes"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ATHENA_3D
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ATHENA_3D 1
EOF
}

    fi
  ;;
esac

case "$all_widgets" in *motif* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_USES_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_USES_MOTIF 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define NEED_MOTIF 1
EOF
}

  lwlib_objs="$lwlib_objs lwlib-Xm.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xm.o\" to \$lwlib_objs"; fi
  need_motif=yes ;;
esac

test "$with_menubars"   = "lucid" && lwlib_objs="$lwlib_objs xlwmenu.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwmenu.o\" to \$lwlib_objs"; fi
test "$with_menubars"   = "motif" && lwlib_objs="$lwlib_objs xlwmenu.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwmenu.o\" to \$lwlib_objs"; fi
test "$with_scrollbars" = "lucid" && lwlib_objs="$lwlib_objs xlwscrollbar.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwscrollbar.o\" to \$lwlib_objs"; fi
test "$with_widgets"   != "no" && test "$with_widgets" != "msw" && \
	lwlib_objs="$lwlib_objs xlwtabs.o xlwgcs.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwtabs.o xlwgcs.o\" to \$lwlib_objs"; fi
case "$with_widgets" in athena* )
	lwlib_objs="$lwlib_objs xlwradio.o xlwcheckbox.o xlwgauge.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"xlwradio.o xlwcheckbox.o xlwgauge.o\" to \$lwlib_objs"; fi;;
esac
case "$all_widgets" in *lucid* )
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NEED_LUCID
EOF
cat >> confdefs.h <<\EOF
#define NEED_LUCID 1
EOF
}

  lwlib_objs="$lwlib_objs lwlib-Xlw.o" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lwlib-Xlw.o\" to \$lwlib_objs"; fi ;;
esac



test "$with_scrollbars" = "athena" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA 1
EOF
}

test "$with_dialogs"    = "athena" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA 1
EOF
}


if test "$athena_3d" = "yes"; then
  test "$with_scrollbars" = "athena" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_ATHENA3D 1
EOF
}

  test "$with_dialogs"    = "athena" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_ATHENA3D
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_ATHENA3D 1
EOF
}

fi

case "$with_widgets" in athena* ) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_WIDGETS_ATHENA
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_WIDGETS_ATHENA 1
EOF
}
;; esac
test "$with_widgets" != "no" && test "$with_widgets" != "msw" && \
	{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_TABS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_TABS_LUCID 1
EOF
}


test "$with_menubars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MENUBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MENUBARS 1
EOF
}

test "$with_scrollbars" != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SCROLLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SCROLLBARS 1
EOF
}

test "$with_dialogs"    != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DIALOGS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DIALOGS 1
EOF
}

test "$with_toolbars"   != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TOOLBARS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TOOLBARS 1
EOF
}

test "$with_widgets"    != "no"    && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WIDGETS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WIDGETS 1
EOF
}


test "$with_menubars"   = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_LUCID 1
EOF
}

test "$with_scrollbars" = "lucid"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_LUCID
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_LUCID 1
EOF
}


test "$with_menubars"   = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_MENUBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_MENUBARS_MOTIF 1
EOF
}

test "$with_scrollbars" = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_SCROLLBARS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_SCROLLBARS_MOTIF 1
EOF
}

test "$with_dialogs"    = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_DIALOGS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_DIALOGS_MOTIF 1
EOF
}

test "$with_widgets"    = "motif"  && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LWLIB_WIDGETS_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define LWLIB_WIDGETS_MOTIF 1
EOF
}


test "$with_menubars"   != "no"    && extra_objs="$extra_objs menubar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar.o\""
 fi
test "$with_scrollbars" != "no"    && extra_objs="$extra_objs scrollbar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar.o\""
 fi
test "$with_dialogs"    != "no"    && extra_objs="$extra_objs dialog.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog.o\""
 fi
test "$with_toolbars"   != "no"    && extra_objs="$extra_objs toolbar.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar.o\""
 fi

if test "$with_gtk" = "yes"; then
  test "$with_menubars"   != "no"      && extra_objs="$extra_objs menubar-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-gtk.o\""
 fi
  test "$with_scrollbars" != "no"      && extra_objs="$extra_objs scrollbar-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-gtk.o\""
 fi
  test "$with_dialogs"    != "no"      && extra_objs="$extra_objs dialog-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-gtk.o\""
 fi
  test "$with_toolbars"   != "no"      && extra_objs="$extra_objs toolbar-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-gtk.o\""
 fi
  test "$all_widgets" != "no no no no no" && extra_objs="$extra_objs gui-gtk.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gui-gtk.o\""
 fi
fi

if test "$with_x11" = "yes"; then
  test "$with_menubars"   != "no"  && extra_objs="$extra_objs menubar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"menubar-x.o\""
 fi
  test "$with_scrollbars" != "no"  && extra_objs="$extra_objs scrollbar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"scrollbar-x.o\""
 fi
  test "$with_dialogs"    != "no"  && extra_objs="$extra_objs dialog-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"dialog-x.o\""
 fi
  test "$with_toolbars"   != "no"  && extra_objs="$extra_objs toolbar-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"toolbar-x.o\""
 fi
  test "$all_widgets" != "no no no no no" && extra_objs="$extra_objs gui-x.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gui-x.o\""
 fi
fi


test -z "$with_mule" && with_mule=no
test -z "$with_file_coding" && with_file_coding=no


if test "$with_file_coding" = "yes" && test "$with_mule" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FILE_CODING
EOF
cat >> confdefs.h <<\EOF
#define FILE_CODING 1
EOF
}

  extra_objs="$extra_objs file-coding.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"file-coding.o\""
 fi
fi

concord_includes_found=no
if test "$with_concord" != "no"; then
   ac_safe=`echo "concord.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for concord.h""... $ac_c" 1>&6
echo "configure:10256: checking for concord.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10259 "configure"
#include "confdefs.h"
#include <concord.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10264: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_concord=no
fi

fi
if test "$concord_includes_found" = "no" -a "$with_concord" != "no" -a \
   -d "/usr/local/concord/include"; then
  save_c_switch_site="$c_switch_site"
  c_switch_site="$c_switch_site -I/usr/local/concord/include"
  ac_safe=`echo "concord.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for concord.h""... $ac_c" 1>&6
echo "configure:10292: checking for concord.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10295 "configure"
#include "confdefs.h"
#include <concord.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10300: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  concord_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

  if test "$concord_includes_found" != "yes"; then
    c_switch_site="$save_c_switch_site"
    with_concord="no"
  fi
fi

test -z "$with_concord" && with_concord=yes
if test "$with_concord" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CONCORD
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CONCORD 1
EOF
}

  libs_x="-lconcord $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lconcord\" to \$libs_x"; fi
  extra_objs="$extra_objs concord.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"concord.o\""
 fi
fi

test -z "$with_chise" && with_chise=yes
if test "$with_chise" = "yes"; then
    with_mule=yes
    with_utf_2000=yes
    with_text_coding=yes
fi

if test "$with_mule" = "yes" ; then
  echo "checking for Mule-related features" 1>&6
echo "configure:10351: checking for Mule-related features" >&5
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MULE
EOF
cat >> confdefs.h <<\EOF
#define MULE 1
EOF
}


    chise_includes_found=no
  if test "$with_chise" != "no"; then
    ac_safe=`echo "chise.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for chise.h""... $ac_c" 1>&6
echo "configure:10365: checking for chise.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10368 "configure"
#include "confdefs.h"
#include <chise.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10373: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_chise=no
fi

  fi
  if test "$chise_includes_found" = "no" -a "$with_chise" != "no" -a \
      -d "/usr/local/chise/include"; then
    save_c_switch_site="$c_switch_site"
    c_switch_site="$c_switch_site -I/usr/local/chise/include"
    ac_safe=`echo "chise.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for chise.h""... $ac_c" 1>&6
echo "configure:10401: checking for chise.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10404 "configure"
#include "confdefs.h"
#include <chise.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10409: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  chise_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

    if test "$chise_includes_found" != "yes"; then
      c_switch_site="$save_c_switch_site"
      with_chise="no"
    fi
  fi

  test -z "$with_chise" && with_chise=yes
  if test "$with_chise" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CHISE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CHISE 1
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_LIBCHISE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_LIBCHISE 1
EOF
}

    libs_x="-lchise $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lchise\" to \$libs_x"; fi
  fi

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining FILE_CODING
EOF
cat >> confdefs.h <<\EOF
#define FILE_CODING 1
EOF
}

  extra_objs="$extra_objs mule.o mule-ccl.o mule-charset.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule.o mule-ccl.o mule-charset.o\""
 fi
  if test "$with_utf_2000" = "yes" && test "$with_text_coding" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining TEXT_CODING
EOF
cat >> confdefs.h <<\EOF
#define TEXT_CODING 1
EOF
}

    extra_objs="$extra_objs text-coding.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"text-coding.o\""
 fi
  else
    extra_objs="$extra_objs file-coding.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"file-coding.o\""
 fi
  fi
    for ac_hdr in libintl.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:10488: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 10491 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10496: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

  
echo $ac_n "checking for strerror in -lintl""... $ac_c" 1>&6
echo "configure:10527: checking for strerror in -lintl" >&5
ac_lib_var=`echo intl'_'strerror | sed 'y%./+-%__p_%'`

xe_check_libs=" -lintl "
cat > conftest.$ac_ext <<EOF
#line 10532 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char strerror();

int main() {
strerror()
; return 0; }
EOF
if { (eval echo configure:10543: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo intl | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lintl $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lintl\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi



  if test "$with_utf_2000" = "yes" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining CHAR_IS_UCS4
EOF
cat >> confdefs.h <<\EOF
#define CHAR_IS_UCS4 1
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining UTF2000
EOF
cat >> confdefs.h <<\EOF
#define UTF2000 1
EOF
}

    with_wnn=no
    with_wnn6=no
  fi

  echo "checking for Mule input methods" 1>&6
echo "configure:10597: checking for Mule input methods" >&5
        case "$with_xim" in "" | "yes" )
    echo "checking for XIM" 1>&6
echo "configure:10600: checking for XIM" >&5
    
echo $ac_n "checking for XOpenIM in -lX11""... $ac_c" 1>&6
echo "configure:10603: checking for XOpenIM in -lX11" >&5
ac_lib_var=`echo X11'_'XOpenIM | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 10608 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XOpenIM();

int main() {
XOpenIM()
; return 0; }
EOF
if { (eval echo configure:10619: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xim=xlib
else
  echo "$ac_t""no" 1>&6
with_xim=no
fi


            if test "$need_motif $have_lesstif" = "yes no"; then
      
echo $ac_n "checking for XmImMbLookupString in -lXm""... $ac_c" 1>&6
echo "configure:10643: checking for XmImMbLookupString in -lXm" >&5
ac_lib_var=`echo Xm'_'XmImMbLookupString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 10648 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmImMbLookupString();

int main() {
XmImMbLookupString()
; return 0; }
EOF
if { (eval echo configure:10659: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xim=motif
else
  echo "$ac_t""no" 1>&6
fi


    elif test "$have_motif $have_lesstif $with_xim" = "yes no no"; then
      
echo $ac_n "checking for XmImMbLookupString in -lXm""... $ac_c" 1>&6
echo "configure:10682: checking for XmImMbLookupString in -lXm" >&5
ac_lib_var=`echo Xm'_'XmImMbLookupString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lXm "
cat > conftest.$ac_ext <<EOF
#line 10687 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmImMbLookupString();

int main() {
XmImMbLookupString()
; return 0; }
EOF
if { (eval echo configure:10698: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_xim=motif
else
  echo "$ac_t""no" 1>&6
fi


    fi ;;
  esac
  if test "$with_xim" != "no"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_XIM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_XIM 1
EOF
}

    if test "$with_xim" = "xlib"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_XLIB
EOF
cat >> confdefs.h <<\EOF
#define XIM_XLIB 1
EOF
}

      extra_objs="$extra_objs input-method-xlib.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-xlib.o\""
 fi
    fi
    if test "$with_xim" = "motif"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining XIM_MOTIF
EOF
cat >> confdefs.h <<\EOF
#define XIM_MOTIF 1
EOF
}

      need_motif=yes
      extra_objs="$extra_objs input-method-motif.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-motif.o\""
 fi
    fi
    if test "$with_xim" = "motif"; then
      with_xfs=no
    fi
  fi

    if test "$with_xfs" = "yes" ; then
    echo "checking for XFontSet" 1>&6
echo "configure:10763: checking for XFontSet" >&5
    
echo $ac_n "checking for XmbDrawString in -lX11""... $ac_c" 1>&6
echo "configure:10766: checking for XmbDrawString in -lX11" >&5
ac_lib_var=`echo X11'_'XmbDrawString | sed 'y%./+-%__p_%'`

xe_check_libs=" -lX11 "
cat > conftest.$ac_ext <<EOF
#line 10771 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XmbDrawString();

int main() {
XmbDrawString()
; return 0; }
EOF
if { (eval echo configure:10782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_xfs=no
fi


    if test "$with_xfs" = "yes" && test "$with_menubars" = "lucid"; then
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_XFONTSET
EOF
cat >> confdefs.h <<\EOF
#define USE_XFONTSET 1
EOF
}

      if test "$with_xim" = "no" ; then
        extra_objs="$extra_objs input-method-xlib.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"input-method-xlib.o\""
 fi
      fi
    fi
  fi 
    test "$with_wnn6" = "yes" && with_wnn=yes # wnn6 implies wnn support
  test -z "$with_wnn" && { ac_safe=`echo "wnn/jllib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for wnn/jllib.h""... $ac_c" 1>&6
echo "configure:10822: checking for wnn/jllib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10825 "configure"
#include "confdefs.h"
#include <wnn/jllib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10830: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi
 }
    test -z "$with_wnn" && { ac_safe=`echo "wnn/commonhd.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for wnn/commonhd.h""... $ac_c" 1>&6
echo "configure:10853: checking for wnn/commonhd.h" >&5

cat > conftest.$ac_ext <<EOF
#line 10856 "configure"
#include "confdefs.h"
#include <wnn/commonhd.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10861: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi
 }
    if test "$with_wnn" != "no"; then
    for ac_func in crypt
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:10886: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 10889 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:10912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

    test "$ac_cv_func_crypt" != "yes" && { 
echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:10941: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcrypt "
cat > conftest.$ac_ext <<EOF
#line 10946 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:10957: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo crypt | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lcrypt $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcrypt\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi

 }
  fi
    if test -z "$with_wnn" -o "$with_wnn" = "yes"; then
    
echo $ac_n "checking for jl_dic_list_e in -lwnn""... $ac_c" 1>&6
echo "configure:10992: checking for jl_dic_list_e in -lwnn" >&5
ac_lib_var=`echo wnn'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn "
cat > conftest.$ac_ext <<EOF
#line 10997 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:11008: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for jl_dic_list_e in -lwnn4""... $ac_c" 1>&6
echo "configure:11026: checking for jl_dic_list_e in -lwnn4" >&5
ac_lib_var=`echo wnn4'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn4 "
cat > conftest.$ac_ext <<EOF
#line 11031 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:11042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn4
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for jl_dic_list_e in -lwnn6""... $ac_c" 1>&6
echo "configure:11060: checking for jl_dic_list_e in -lwnn6" >&5
ac_lib_var=`echo wnn6'_'jl_dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn6 "
cat > conftest.$ac_ext <<EOF
#line 11065 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_dic_list_e();

int main() {
jl_dic_list_e()
; return 0; }
EOF
if { (eval echo configure:11076: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn6
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dic_list_e in -lwnn6_fromsrc""... $ac_c" 1>&6
echo "configure:11094: checking for dic_list_e in -lwnn6_fromsrc" >&5
ac_lib_var=`echo wnn6_fromsrc'_'dic_list_e | sed 'y%./+-%__p_%'`

xe_check_libs=" -lwnn6_fromsrc "
cat > conftest.$ac_ext <<EOF
#line 11099 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dic_list_e();

int main() {
dic_list_e()
; return 0; }
EOF
if { (eval echo configure:11110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libwnn=wnn6_fromsrc
else
  echo "$ac_t""no" 1>&6
with_wnn=no
fi


fi


fi


fi


  fi
  test -z "$with_wnn" && with_wnn=yes
  if test "$with_wnn" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_WNN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_WNN 1
EOF
}

    libs_x="-l$libwnn $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l$libwnn\" to \$libs_x"; fi
    extra_objs="$extra_objs mule-wnnfns.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule-wnnfns.o\""
 fi
    if test "$with_wnn6" != "no"; then
      
echo $ac_n "checking for jl_fi_dic_list in -l$libwnn""... $ac_c" 1>&6
echo "configure:11158: checking for jl_fi_dic_list in -l$libwnn" >&5
ac_lib_var=`echo $libwnn'_'jl_fi_dic_list | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$libwnn "
cat > conftest.$ac_ext <<EOF
#line 11163 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jl_fi_dic_list();

int main() {
jl_fi_dic_list()
; return 0; }
EOF
if { (eval echo configure:11174: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_wnn6=yes
else
  echo "$ac_t""no" 1>&6
fi


      test "$with_wnn6" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining WNN6
EOF
cat >> confdefs.h <<\EOF
#define WNN6 1
EOF
}

    fi
  fi

    canna_includes_found=no
  if test "$with_canna" != "no"; then
    ac_safe=`echo "canna/jrkanji.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/jrkanji.h""... $ac_c" 1>&6
echo "configure:11209: checking for canna/jrkanji.h" >&5

cat > conftest.$ac_ext <<EOF
#line 11212 "configure"
#include "confdefs.h"
#include <canna/jrkanji.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11217: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  canna_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

  fi
  if test "$canna_includes_found" = "no" -a "$with_canna" != "no" -a \
      -d "/usr/local/canna/include"; then
    save_c_switch_site="$c_switch_site"
    c_switch_site="$c_switch_site -I/usr/local/canna/include"
    ac_safe=`echo "canna/jrkanji.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/jrkanji.h""... $ac_c" 1>&6
echo "configure:11244: checking for canna/jrkanji.h" >&5

cat > conftest.$ac_ext <<EOF
#line 11247 "configure"
#include "confdefs.h"
#include <canna/jrkanji.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11252: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  canna_includes_found=yes
else
  echo "$ac_t""no" 1>&6
fi

    if test "$canna_includes_found" != "yes"; then
      c_switch_site="$save_c_switch_site"
      with_canna="no"
    fi
  fi

  test -z "$with_canna" && { ac_safe=`echo "canna/RK.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for canna/RK.h""... $ac_c" 1>&6
echo "configure:11280: checking for canna/RK.h" >&5

cat > conftest.$ac_ext <<EOF
#line 11283 "configure"
#include "confdefs.h"
#include <canna/RK.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11288: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi
 }
  test -z "$with_canna" && { 
echo $ac_n "checking for RkBgnBun in -lRKC""... $ac_c" 1>&6
echo "configure:11311: checking for RkBgnBun in -lRKC" >&5
ac_lib_var=`echo RKC'_'RkBgnBun | sed 'y%./+-%__p_%'`

xe_check_libs=" -lRKC "
cat > conftest.$ac_ext <<EOF
#line 11316 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char RkBgnBun();

int main() {
RkBgnBun()
; return 0; }
EOF
if { (eval echo configure:11327: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && { 
echo $ac_n "checking for jrKanjiControl in -lcanna""... $ac_c" 1>&6
echo "configure:11350: checking for jrKanjiControl in -lcanna" >&5
ac_lib_var=`echo canna'_'jrKanjiControl | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcanna "
cat > conftest.$ac_ext <<EOF
#line 11355 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jrKanjiControl();

int main() {
jrKanjiControl()
; return 0; }
EOF
if { (eval echo configure:11366: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
with_canna=no
fi

 }
  test -z "$with_canna" && with_canna=yes
  if test "$with_canna" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CANNA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CANNA 1
EOF
}

    libs_x="-lcanna -lRKC $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcanna -lRKC\" to \$libs_x"; fi
    extra_objs="$extra_objs mule-canna.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"mule-canna.o\""
 fi
  fi

else   for feature in xim canna wnn; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without Mule support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi 

if test "$need_motif" = "yes" ; then
  libs_x="-lXm $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lXm\" to \$libs_x"; fi
    
echo $ac_n "checking for layout_object_getvalue in -li18n""... $ac_c" 1>&6
echo "configure:11415: checking for layout_object_getvalue in -li18n" >&5
ac_lib_var=`echo i18n'_'layout_object_getvalue | sed 'y%./+-%__p_%'`

xe_check_libs=" -li18n "
cat > conftest.$ac_ext <<EOF
#line 11420 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char layout_object_getvalue();

int main() {
layout_object_getvalue()
; return 0; }
EOF
if { (eval echo configure:11431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libs_x="-li18n $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-li18n\" to \$libs_x"; fi
else
  echo "$ac_t""no" 1>&6
fi


  
if test "$add_runtime_path" = "yes" -a -n "$dash_r"; then
    ld_switch_site=`echo   '' $ld_switch_site   | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  ld_switch_x_site=`echo '' $ld_switch_x_site | sed -e 's:^ ::' -e "s/$dash_r[^ ]*//g"`
  
        runpath="" runpath_dirs=""
  if test -n "$LD_RUN_PATH"; then
    runpath="$LD_RUN_PATH"
  elif test "$GCC" = "yes"; then
        ld_switch_run_save="$ld_switch_run"; ld_switch_run=""
    echo "int main(int argc, char *argv[]) {return 0;}" > conftest.c
    xe_runpath_link='${CC-cc} -o conftest -v $CFLAGS '"$xe_ldflags"' conftest.$ac_ext 2>&1 1>/dev/null'
    for arg in `eval "$xe_runpath_link" | grep ' -L'`; do
      case "$arg" in P,* | -L* | -R* )
        for dir in `echo '' "$arg" | sed -e 's:^ ::' -e 's/^..//' -e 'y/:/ /'`; do
          {
xe_runpath_dir="$dir"
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
}
        done ;;
      esac
    done
    ld_switch_run="$ld_switch_run_save"
    rm -f conftest*
  else
        for arg in $ld_switch_site $ld_switch_x_site; do
      case "$arg" in -L*) {
xe_runpath_dir=`echo '' "$arg" | sed -e 's:^ ::' -e 's/^-L//'`
  test "$xe_runpath_dir" != "/lib"     -a \
	"$xe_runpath_dir" != "/usr/lib" -a \
	-n "`ls ${xe_runpath_dir}/*.s[ol] 2>/dev/null`" && \
  eval "$xe_add_unique_runpath_dir"
};; esac
    done
            if test "$opsys $need_motif" = "sol2 yes"; then
      xe_runpath_dir="/opt/SUNWdt/lib";
      eval "$xe_add_unique_runpath_dir";
    fi
  fi 
  if test -n "$runpath"; then
    ld_switch_run="${dash_r}${runpath}"
    
if test "$GCC" = "yes"; then
  set x $ld_switch_run; shift; ld_switch_run=""
  while test -n "$1"; do
    case $1 in
      -L  | -l  | -u               ) ld_switch_run="$ld_switch_run $1 $2"; shift ;;
      -L* | -l* | -u* | -Wl* | -pg ) ld_switch_run="$ld_switch_run $1" ;;
      -Xlinker* ) ;;
      * ) ld_switch_run="$ld_switch_run -Xlinker $1" ;;
    esac
    shift
  done
fi
    test "$extra_verbose" = "yes" && echo "Setting runpath to $runpath"
  fi
fi

fi


for ac_func in cbrt closedir dup2 eaccess fmod fpathconf frexp ftime getaddrinfo gethostname getnameinfo getpagesize gettimeofday getcwd getwd logb lrand48 matherr mkdir mktime perror poll random rename res_init rint rmdir select setitimer setpgid setlocale setsid sigblock sighold sigprocmask snprintf stpcpy strerror tzset ulimit usleep waitpid vsnprintf fsync ftruncate umask
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11518: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 11521 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:11544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


if test "$ac_cv_func_getaddrinfo" != "no" ; then
  case "$opsys" in
    hpux11* )
      echo "configure: warning: Use of getaddrinfo is disabled for HP-UX 11.XX." 1>&2
      ac_cv_func_getaddrinfo=no
      ;;
  esac
fi


for ac_func in getpt _getpty grantpt unlockpt ptsname killpg tcgetpgrp
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11585: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 11588 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:11611: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for openpty""... $ac_c" 1>&6
echo "configure:11640: checking for openpty" >&5

cat > conftest.$ac_ext <<EOF
#line 11643 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char openpty(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char openpty();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_openpty) || defined (__stub___openpty)
choke me
#else
openpty();
#endif

; return 0; }
EOF
if { (eval echo configure:11666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_openpty=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_openpty=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'openpty`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_openpty=yes
else
  echo "$ac_t""no" 1>&6

  
echo $ac_n "checking for openpty in -lutil""... $ac_c" 1>&6
echo "configure:11685: checking for openpty in -lutil" >&5
ac_lib_var=`echo util'_'openpty | sed 'y%./+-%__p_%'`

xe_check_libs=" -lutil "
cat > conftest.$ac_ext <<EOF
#line 11690 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char openpty();

int main() {
openpty()
; return 0; }
EOF
if { (eval echo configure:11701: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_openpty=yes need_libutil=yes
else
  echo "$ac_t""no" 1>&6
fi


fi

if test "$have_openpty" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_OPENPTY
EOF
cat >> confdefs.h <<\EOF
#define HAVE_OPENPTY 1
EOF
}

  for ac_hdr in pty.h libutil.h util.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11736: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 11739 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11744: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 break
else
  echo "$ac_t""no" 1>&6
fi
done

  test "$need_libutil" = "yes" && libs_system="$libs_system -lutil" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"-lutil\" to \$libs_system"; fi
fi

for ac_hdr in stropts.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11780: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 11783 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11788: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

if test "$ac_cv_header_stropts_h" = "yes"; then
  for ac_func in isastream
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11821: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 11824 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:11847: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in strtio.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11878: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 11881 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11886: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done
 fi

extra_objs="$extra_objs realpath.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"realpath.o\""
 fi

for ac_func in getloadavg
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:11923: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 11926 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:11949: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


if test "$ac_cv_func_getloadavg" = "yes"; then
        for ac_hdr in sys/loadavg.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:11982: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 11985 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:11990: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

else
    extra_objs="$extra_objs getloadavg.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"getloadavg.o\""
 fi

    
echo $ac_n "checking for kstat_open in -lkstat""... $ac_c" 1>&6
echo "configure:12026: checking for kstat_open in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkstat "
cat > conftest.$ac_ext <<EOF
#line 12031 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_open();

int main() {
kstat_open()
; return 0; }
EOF
if { (eval echo configure:12042: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kstat | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkstat $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lkstat\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


  for ac_hdr in kstat.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:12077: checking for $ac_hdr" >&5

cat > conftest.$ac_ext <<EOF
#line 12080 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12085: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_hdr
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done


    
echo $ac_n "checking for kvm_read in -lkvm""... $ac_c" 1>&6
echo "configure:12117: checking for kvm_read in -lkvm" >&5
ac_lib_var=`echo kvm'_'kvm_read | sed 'y%./+-%__p_%'`

xe_check_libs=" -lkvm "
cat > conftest.$ac_ext <<EOF
#line 12122 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kvm_read();

int main() {
kvm_read()
; return 0; }
EOF
if { (eval echo configure:12133: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo kvm | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lkvm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lkvm\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


fi

echo $ac_n "checking whether netdb declares h_errno""... $ac_c" 1>&6
echo "configure:12167: checking whether netdb declares h_errno" >&5
cat > conftest.$ac_ext <<EOF
#line 12169 "configure"
#include "confdefs.h"
#include <netdb.h>
int main() {
return h_errno;
; return 0; }
EOF
if { (eval echo configure:12176: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_H_ERRNO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_H_ERRNO 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking for sigsetjmp""... $ac_c" 1>&6
echo "configure:12196: checking for sigsetjmp" >&5
cat > conftest.$ac_ext <<EOF
#line 12198 "configure"
#include "confdefs.h"
#include <setjmp.h>
int main() {
sigjmp_buf bar; sigsetjmp (bar, 0);
; return 0; }
EOF
if { (eval echo configure:12205: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SIGSETJMP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SIGSETJMP 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*

echo $ac_n "checking whether localtime caches TZ""... $ac_c" 1>&6
echo "configure:12225: checking whether localtime caches TZ" >&5

if test "$ac_cv_func_tzset" = "yes"; then
cat > conftest.$ac_ext <<EOF
#line 12229 "configure"
#include "confdefs.h"
#include <time.h>
#if STDC_HEADERS
# include <stdlib.h>
#endif
extern char **environ;
unset_TZ ()
{
  char **from, **to;
  for (to = from = environ; (*to = *from); from++)
    if (! (to[0][0] == 'T' && to[0][1] == 'Z' && to[0][2] == '='))
      to++;
}
char TZ_GMT0[] = "TZ=GMT0";
char TZ_PST8[] = "TZ=PST8";
main()
{
  time_t now = time ((time_t *) 0);
  int hour_GMT0, hour_unset;
  if (putenv (TZ_GMT0) != 0)
    exit (1);
  hour_GMT0 = localtime (&now)->tm_hour;
  unset_TZ ();
  hour_unset = localtime (&now)->tm_hour;
  if (putenv (TZ_PST8) != 0)
    exit (1);
  if (localtime (&now)->tm_hour == hour_GMT0)
    exit (1);
  unset_TZ ();
  if (localtime (&now)->tm_hour != hour_unset)
    exit (1);
  exit (0);
}
EOF
if { (eval echo configure:12264: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  emacs_cv_localtime_cache=no
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  emacs_cv_localtime_cache=yes
fi
rm -fr conftest*
else
	# If we lack tzset, report that localtime does not cache TZ,
	# since we can't invalidate the cache if we don't have tzset.
	emacs_cv_localtime_cache=no
fi
echo "$ac_t""$emacs_cv_localtime_cache" 1>&6
if test $emacs_cv_localtime_cache = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining LOCALTIME_CACHE
EOF
cat >> confdefs.h <<\EOF
#define LOCALTIME_CACHE 1
EOF
}

fi

if test "$HAVE_TIMEVAL" = "yes"; then
echo $ac_n "checking whether gettimeofday accepts one or two arguments""... $ac_c" 1>&6
echo "configure:12294: checking whether gettimeofday accepts one or two arguments" >&5
cat > conftest.$ac_ext <<EOF
#line 12296 "configure"
#include "confdefs.h"

#ifdef TIME_WITH_SYS_TIME
#include <sys/time.h>
#include <time.h>
#else
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#else
#include <time.h>
#endif
#endif
  
int main() {

  struct timeval time;
  gettimeofday (&time, 0);

; return 0; }
EOF
if { (eval echo configure:12317: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""two" 1>&6
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""one" 1>&6
   { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GETTIMEOFDAY_ONE_ARGUMENT
EOF
cat >> confdefs.h <<\EOF
#define GETTIMEOFDAY_ONE_ARGUMENT 1
EOF
}

fi
rm -f conftest*
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:12339: checking for inline" >&5

ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 12344 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:12351: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done


echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) { test "$extra_verbose" = "yes" && cat << \EOF
    Defining inline = 
EOF
cat >> confdefs.h <<\EOF
#define inline 
EOF
}
 ;;
  *)  { test "$extra_verbose" = "yes" && cat << EOF
    Defining inline = $ac_cv_c_inline
EOF
cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
}
 ;;
esac

test "$ac_cv_c_inline" != "no" -a "$GCC" = "yes" && extra_objs="$extra_objs inline.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"inline.o\""
 fi


if test "$__DECC" != "yes"; then
  # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:12392: checking for working alloca.h" >&5

cat > conftest.$ac_ext <<EOF
#line 12395 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:12402: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF
}

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:12426: checking for alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 12429 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:12457: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF
}

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining C_ALLOCA
EOF
cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF
}


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:12496: checking whether alloca needs Cray hooks" >&5

cat > conftest.$ac_ext <<EOF
#line 12499 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*


echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12523: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 12526 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CRAY_STACKSEG_END = $ac_func
EOF
cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF
}

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:12579: checking stack direction for C alloca" >&5

cat > conftest.$ac_ext <<EOF
#line 12582 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:12601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_c_stack_direction=1
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining STACK_DIRECTION = $ac_cv_c_stack_direction
EOF
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF
}

fi

  test -n "$ALLOCA" && extra_objs="$extra_objs $ALLOCA" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"$ALLOCA\""
 fi
fi

ac_safe=`echo "vfork.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for vfork.h""... $ac_c" 1>&6
echo "configure:12631: checking for vfork.h" >&5

cat > conftest.$ac_ext <<EOF
#line 12634 "configure"
#include "confdefs.h"
#include <vfork.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:12639: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_VFORK_H
EOF
cat >> confdefs.h <<\EOF
#define HAVE_VFORK_H 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for working vfork""... $ac_c" 1>&6
echo "configure:12667: checking for working vfork" >&5

cat > conftest.$ac_ext <<EOF
#line 12670 "configure"
#include "confdefs.h"
/* Thanks to Paul Eggert for this test.  */
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_VFORK_H
#include <vfork.h>
#endif
/* On some sparc systems, changes by the child to local and incoming
   argument registers are propagated back to the parent.
   The compiler is told about this with #include <vfork.h>,
   but some compilers (e.g. gcc -O) don't grok <vfork.h>.
   Test for this by using a static variable whose address
   is put into a register that is clobbered by the vfork.  */
static
#ifdef __cplusplus
sparc_address_test (int arg)
#else
sparc_address_test (arg) int arg;
#endif
{
  static pid_t child;
  if (!child) {
    child = vfork ();
    if (child < 0) {
      perror ("vfork");
      _exit(2);
    }
    if (!child) {
      arg = getpid();
      write(-1, "", 0);
      _exit (arg);
    }
  }
}
main() {
  pid_t parent = getpid ();
  pid_t child;

  sparc_address_test ();

  child = vfork ();

  if (child == 0) {
    /* Here is another test for sparc vfork register problems.
       This test uses lots of local variables, at least
       as many local variables as main has allocated so far
       including compiler temporaries.  4 locals are enough for
       gcc 1.40.3 on a Solaris 4.1.3 sparc, but we use 8 to be safe.
       A buggy compiler should reuse the register of parent
       for one of the local variables, since it will think that
       parent can't possibly be used any more in this routine.
       Assigning to the local variable will thus munge parent
       in the parent process.  */
    pid_t
      p = getpid(), p1 = getpid(), p2 = getpid(), p3 = getpid(),
      p4 = getpid(), p5 = getpid(), p6 = getpid(), p7 = getpid();
    /* Convince the compiler that p..p7 are live; otherwise, it might
       use the same hardware register for all 8 local variables.  */
    if (p != p1 || p != p2 || p != p3 || p != p4
	|| p != p5 || p != p6 || p != p7)
      _exit(1);

    /* On some systems (e.g. IRIX 3.3),
       vfork doesn't separate parent from child file descriptors.
       If the child closes a descriptor before it execs or exits,
       this munges the parent's descriptor as well.
       Test for this by closing stdout in the child.  */
    _exit(close(fileno(stdout)) != 0);
  } else {
    int status;
    struct stat st;

    while (wait(&status) != child)
      ;
    exit(
	 /* Was there some problem with vforking?  */
	 child < 0

	 /* Did the child fail?  (This shouldn't happen.)  */
	 || status

	 /* Did the vfork/compiler bug occur?  */
	 || parent != getpid()

	 /* Did the file descriptor bug occur?  */
	 || fstat(fileno(stdout), &st) != 0
	 );
  }
}
EOF
if { (eval echo configure:12765: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_vfork_works=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_vfork_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_vfork_works" 1>&6
if test $ac_cv_func_vfork_works = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining vfork = fork
EOF
cat >> confdefs.h <<\EOF
#define vfork fork
EOF
}

fi


echo $ac_n "checking for working strcoll""... $ac_c" 1>&6
echo "configure:12791: checking for working strcoll" >&5

cat > conftest.$ac_ext <<EOF
#line 12794 "configure"
#include "confdefs.h"
#include <string.h>
main ()
{
  exit (strcoll ("abc", "def") >= 0 ||
	strcoll ("ABC", "DEF") >= 0 ||
	strcoll ("123", "456") >= 0);
}
EOF
if { (eval echo configure:12804: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_strcoll_works=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_strcoll_works=no
fi
rm -fr conftest*

echo "$ac_t""$ac_cv_func_strcoll_works" 1>&6
if test $ac_cv_func_strcoll_works = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_STRCOLL
EOF
cat >> confdefs.h <<\EOF
#define HAVE_STRCOLL 1
EOF
}

fi


for ac_func in getpgrp
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:12832: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 12835 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:12858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

echo $ac_n "checking whether getpgrp takes no argument""... $ac_c" 1>&6
echo "configure:12886: checking whether getpgrp takes no argument" >&5

cat > conftest.$ac_ext <<EOF
#line 12889 "configure"
#include "confdefs.h"

/*
 * If this system has a BSD-style getpgrp(),
 * which takes a pid argument, exit unsuccessfully.
 *
 * Snarfed from Chet Ramey's bash pgrp.c test program
 */
#include <stdio.h>
#include <sys/types.h>

int     pid;
int     pg1, pg2, pg3, pg4;
int     ng, np, s, child;

main()
{
        pid = getpid();
        pg1 = getpgrp(0);
        pg2 = getpgrp();
        pg3 = getpgrp(pid);
        pg4 = getpgrp(1);

        /*
         * If all of these values are the same, it's pretty sure that
         * we're on a system that ignores getpgrp's first argument.
         */
        if (pg2 == pg4 && pg1 == pg3 && pg2 == pg3)
                exit(0);

        child = fork();
        if (child < 0)
                exit(1);
        else if (child == 0) {
                np = getpid();
                /*
                 * If this is Sys V, this will not work; pgrp will be
                 * set to np because setpgrp just changes a pgrp to be
                 * the same as the pid.
                 */
                setpgrp(np, pg1);
                ng = getpgrp(0);        /* Same result for Sys V and BSD */
                if (ng == pg1) {
                        exit(1);
                } else {
                        exit(0);
                }
        } else {
                wait(&s);
                exit(s>>8);
        }
}

EOF
if { (eval echo configure:12944: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  ac_cv_func_getpgrp_void=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_getpgrp_void=no
fi
rm -fr conftest*


echo "$ac_t""$ac_cv_func_getpgrp_void" 1>&6
if test $ac_cv_func_getpgrp_void = yes; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GETPGRP_VOID
EOF
cat >> confdefs.h <<\EOF
#define GETPGRP_VOID 1
EOF
}

fi


echo $ac_n "checking for working mmap""... $ac_c" 1>&6
echo "configure:12971: checking for working mmap" >&5
case "$opsys" in ultrix* ) have_mmap=no ;; *)
cat > conftest.$ac_ext <<EOF
#line 12974 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/mman.h>

#ifndef MAP_VARIABLE
#define MAP_VARIABLE 0
#endif

#ifndef MAP_FAILED
#define MAP_FAILED -1
#endif

int main (int argc, char *argv[])
{
  int fd = -1;
  caddr_t p;
#ifndef MAP_ANONYMOUS
  fd = open ("/dev/zero", O_RDWR);
  if (fd < 0)
    return 1;
#define MAP_ANONYMOUS 0
#endif
  if (mmap(0, 1024, PROT_READ | PROT_WRITE,
	   MAP_PRIVATE | MAP_VARIABLE | MAP_ANONYMOUS,
	   fd, 0) != (void *) MAP_FAILED)
    return 0;
  perror ("conftest: mmap failed");
  return 1;
}
EOF
if { (eval echo configure:13007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  have_mmap=yes
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  have_mmap=no
fi
rm -fr conftest* ;;
esac
echo "$ac_t""$have_mmap" 1>&6
test "$have_mmap" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MMAP
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MMAP 1
EOF
}


case "$opsys" in cygwin*) 
	test "$rel_alloc" = "default" && rel_alloc=no ;;
esac
test "$GNU_MALLOC" != "yes" -a "$have_mmap" != "yes" && rel_alloc=no
if test "$rel_alloc $have_mmap" = "default yes"; then
  if test "$doug_lea_malloc" = "yes"; then
        echo $ac_n "checking for M_MMAP_THRESHOLD""... $ac_c" 1>&6
echo "configure:13036: checking for M_MMAP_THRESHOLD" >&5
    cat > conftest.$ac_ext <<EOF
#line 13038 "configure"
#include "confdefs.h"
#include <malloc.h>
int main() {

#ifndef M_MMAP_THRESHOLD
#error No M_MMAP_THRESHOLD :-(
!@+$%^&*_)(_ - unlikely to compile...
#endif

; return 0; }
EOF
if { (eval echo configure:13050: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  rel_alloc=no; echo "$ac_t""yes" 1>&6;
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  rel_alloc=yes; echo "$ac_t""no" 1>&6;
fi
rm -f conftest*
  else
    rel_alloc=yes
  fi
fi
test "$rel_alloc" = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REL_ALLOC
EOF
cat >> confdefs.h <<\EOF
#define REL_ALLOC 1
EOF
}


ac_safe=`echo "termios.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termios.h""... $ac_c" 1>&6
echo "configure:13075: checking for termios.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13078 "configure"
#include "confdefs.h"
#include <termios.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13083: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIOS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIOS 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SIGNALS_VIA_CHARACTERS
EOF
cat >> confdefs.h <<\EOF
#define SIGNALS_VIA_CHARACTERS 1
EOF
}

  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NO_TERMIO
EOF
cat >> confdefs.h <<\EOF
#define NO_TERMIO 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "termio.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for termio.h""... $ac_c" 1>&6
echo "configure:13126: checking for termio.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13129 "configure"
#include "confdefs.h"
#include <termio.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13134: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TERMIO
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TERMIO 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

fi



echo $ac_n "checking for socket""... $ac_c" 1>&6
echo "configure:13166: checking for socket" >&5

cat > conftest.$ac_ext <<EOF
#line 13169 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char socket(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_socket) || defined (__stub___socket)
choke me
#else
socket();
#endif

; return 0; }
EOF
if { (eval echo configure:13192: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_socket=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_socket=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'socket`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "netinet/in.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for netinet/in.h""... $ac_c" 1>&6
echo "configure:13207: checking for netinet/in.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13210 "configure"
#include "confdefs.h"
#include <netinet/in.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13215: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "arpa/inet.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for arpa/inet.h""... $ac_c" 1>&6
echo "configure:13232: checking for arpa/inet.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13235 "configure"
#include "confdefs.h"
#include <arpa/inet.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13240: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKETS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF
}

      echo $ac_n "checking "for sun_len member in struct sockaddr_un"""... $ac_c" 1>&6
echo "configure:13265: checking "for sun_len member in struct sockaddr_un"" >&5
      cat > conftest.$ac_ext <<EOF
#line 13267 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>
#include <sys/un.h>
      
int main() {
static struct sockaddr_un x; x.sun_len = 1;
; return 0; }
EOF
if { (eval echo configure:13278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKADDR_SUN_LEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKADDR_SUN_LEN 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
      echo $ac_n "checking "for ip_mreq struct in netinet/in.h"""... $ac_c" 1>&6
echo "configure:13296: checking "for ip_mreq struct in netinet/in.h"" >&5
      cat > conftest.$ac_ext <<EOF
#line 13298 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <netinet/in.h>
      
int main() {
static struct ip_mreq x;
; return 0; }
EOF
if { (eval echo configure:13308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_MULTICAST
EOF
cat >> confdefs.h <<\EOF
#define HAVE_MULTICAST 1
EOF
}

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*
else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for msgget""... $ac_c" 1>&6
echo "configure:13339: checking for msgget" >&5

cat > conftest.$ac_ext <<EOF
#line 13342 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char msgget(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char msgget();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_msgget) || defined (__stub___msgget)
choke me
#else
msgget();
#endif

; return 0; }
EOF
if { (eval echo configure:13365: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_msgget=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_msgget=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'msgget`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/ipc.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/ipc.h""... $ac_c" 1>&6
echo "configure:13380: checking for sys/ipc.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13383 "configure"
#include "confdefs.h"
#include <sys/ipc.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13388: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_safe=`echo "sys/msg.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/msg.h""... $ac_c" 1>&6
echo "configure:13405: checking for sys/msg.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13408 "configure"
#include "confdefs.h"
#include <sys/msg.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13413: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SYSVIPC
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SYSVIPC 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi

else
  echo "$ac_t""no" 1>&6
fi


ac_safe=`echo "dirent.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for dirent.h""... $ac_c" 1>&6
echo "configure:13451: checking for dirent.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13454 "configure"
#include "confdefs.h"
#include <dirent.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13459: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining SYSV_SYSTEM_DIR
EOF
cat >> confdefs.h <<\EOF
#define SYSV_SYSTEM_DIR 1
EOF
}

else
  echo "$ac_t""no" 1>&6
ac_safe=`echo "sys/dir.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for sys/dir.h""... $ac_c" 1>&6
echo "configure:13486: checking for sys/dir.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13489 "configure"
#include "confdefs.h"
#include <sys/dir.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13494: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining NONSYSTEM_DIR_LIBRARY
EOF
cat >> confdefs.h <<\EOF
#define NONSYSTEM_DIR_LIBRARY 1
EOF
}

fi

fi


ac_safe=`echo "nlist.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for nlist.h""... $ac_c" 1>&6
echo "configure:13527: checking for nlist.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13530 "configure"
#include "confdefs.h"
#include <nlist.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13535: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NLIST_STRUCT
EOF
cat >> confdefs.h <<\EOF
#define NLIST_STRUCT 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi



echo "checking "for sound support"" 1>&6
echo "configure:13565: checking "for sound support"" >&5
test -z "$with_native_sound" -a -n "$native_sound_lib" && with_native_sound=yes

if test "$with_native_sound" != "no"; then
    if test -n "$native_sound_lib"; then
    ac_safe=`echo "multimedia/audio_device.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for multimedia/audio_device.h""... $ac_c" 1>&6
echo "configure:13572: checking for multimedia/audio_device.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13575 "configure"
#include "confdefs.h"
#include <multimedia/audio_device.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13580: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  sound_found=yes sound_cflags=""
      extra_objs="$extra_objs sunplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunplay.o\""
 fi
else
  echo "$ac_t""no" 1>&6
fi

  fi

    if test -z "$sound_found" -a -d "/usr/demo/SOUND"; then
    if test -d "/usr/demo/SOUND/include/multimedia"; then
      sun_sound_cflags="-I/usr/demo/SOUND/include"
    elif test -d "/usr/demo/SOUND/multimedia"; then
      sun_sound_cflags="-I/usr/demo/SOUND"
    fi

    if test -n "$native_sound_lib"; then
      sun_sound_lib="$native_sound_lib"
    elif test -r "/usr/demo/SOUND/lib/libaudio.a"; then
      sun_sound_lib="/usr/demo/SOUND/lib/libaudio.a"
    elif test -r "/usr/demo/SOUND/libaudio.a"; then
      sun_sound_lib="/usr/demo/SOUND/libaudio.a"
    fi

    if test -n "$sun_sound_cflags" -a -n "$sun_sound_lib"; then
      native_sound_lib="$sun_sound_lib"
      sound_cflags="$sun_sound_cflags"
      sound_found=yes
      extra_objs="$extra_objs sunplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sunplay.o\""
 fi
    fi
  fi

    if test -z "$sound_found"; then
    case "$canonical" in
    *-sgi-* )
      if test -z "$native_sound_lib"; then
        
echo $ac_n "checking for ALopenport in -laudio""... $ac_c" 1>&6
echo "configure:13636: checking for ALopenport in -laudio" >&5
ac_lib_var=`echo audio'_'ALopenport | sed 'y%./+-%__p_%'`

xe_check_libs=" -laudio "
cat > conftest.$ac_ext <<EOF
#line 13641 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char ALopenport();

int main() {
ALopenport()
; return 0; }
EOF
if { (eval echo configure:13652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-laudio"
else
  echo "$ac_t""no" 1>&6
fi


      fi
      if test -n "$native_sound_lib"; then
        sound_found=yes sound_cflags=""
        extra_objs="$extra_objs sgiplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sgiplay.o\""
 fi
      fi ;;
    hppa*-hp-hpux* )
      if test -z "$native_sound_lib"; then
	
echo $ac_n "checking for AOpenAudio in -lAlib""... $ac_c" 1>&6
echo "configure:13683: checking for AOpenAudio in -lAlib" >&5
ac_lib_var=`echo Alib'_'AOpenAudio | sed 'y%./+-%__p_%'`

xe_check_libs=" -lAlib "
cat > conftest.$ac_ext <<EOF
#line 13688 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char AOpenAudio();

int main() {
AOpenAudio()
; return 0; }
EOF
if { (eval echo configure:13699: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  native_sound_lib="-lAlib"
else
  echo "$ac_t""no" 1>&6
fi


      fi
      if test -n "$native_sound_lib"; then
        sound_found=yes
        extra_objs="$extra_objs hpplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"hpplay.o\""
 fi
        if test "$GCC" = "yes" # Kludge city
          then sound_cflags="-Dconst= -Dvolatile= -I/usr/audio/examples"
          else sound_cflags="+e -I/usr/audio/examples"
        fi
      fi ;;
    esac
  fi

    if test -z "$sound_found"; then
    if test "$with_msw" = "yes"; then
    sound_found=yes
    native_sound_lib=
    fi
  fi

    if test -z "$sound_found"; then
    for dir in "machine" "sys" "linux"; do
      ac_safe=`echo "${dir}/soundcard.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ${dir}/soundcard.h""... $ac_c" 1>&6
echo "configure:13744: checking for ${dir}/soundcard.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13747 "configure"
#include "confdefs.h"
#include <${dir}/soundcard.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13752: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  sound_found=yes
       need_miscplay=yes
        extra_objs="$extra_objs linuxplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"linuxplay.o\""
 fi
        { test "$extra_verbose" = "yes" && cat << EOF
    Defining SOUNDCARD_H_FILE = "${dir}/soundcard.h"
EOF
cat >> confdefs.h <<EOF
#define SOUNDCARD_H_FILE "${dir}/soundcard.h"
EOF
}

        break
else
  echo "$ac_t""no" 1>&6
fi

    done
  fi

  test "$sound_found" = "yes" && with_native_sound=yes
fi

if test "$with_native_sound" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NATIVE_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NATIVE_SOUND 1
EOF
}

  test -n "$native_sound_lib" && LIBS="$native_sound_lib $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$native_sound_lib\" to \$LIBS"; fi
fi

if test "$with_nas_sound" != "no"; then
  ac_safe=`echo "audio/audiolib.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for audio/audiolib.h""... $ac_c" 1>&6
echo "configure:13806: checking for audio/audiolib.h" >&5

cat > conftest.$ac_ext <<EOF
#line 13809 "configure"
#include "confdefs.h"
#include <audio/audiolib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:13814: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    
echo $ac_n "checking for AuOpenServer in -laudio""... $ac_c" 1>&6
echo "configure:13832: checking for AuOpenServer in -laudio" >&5
ac_lib_var=`echo audio'_'AuOpenServer | sed 'y%./+-%__p_%'`

xe_check_libs=" -laudio "
cat > conftest.$ac_ext <<EOF
#line 13837 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char AuOpenServer();

int main() {
AuOpenServer()
; return 0; }
EOF
if { (eval echo configure:13848: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_nas_sound=yes
else
  echo "$ac_t""no" 1>&6
fi


else
  echo "$ac_t""no" 1>&6
fi

  if test "$have_nas_sound" = "yes"; then
    with_nas_sound=yes
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NAS_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NAS_SOUND 1
EOF
}

    extra_objs="$extra_objs nas.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"nas.o\""
 fi
    libs_x="-laudio $libs_x" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-laudio\" to \$libs_x"; fi
            cat > conftest.$ac_ext <<EOF
#line 13887 "configure"
#include "confdefs.h"
#include <audio/Xtutil.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "AuXtErrorJump" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  old_nas=yes; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining NAS_NO_ERROR_JUMP
EOF
cat >> confdefs.h <<\EOF
#define NAS_NO_ERROR_JUMP 1
EOF
}

fi
rm -f conftest*

  else
    test "$with_nas_sound" = "yes" && \
      { echo "Error:" "Required NAS sound support cannot be provided." >&2; exit 1; }
    with_nas_sound=no
  fi
fi

if test "$with_esd_sound" != "no"; then
  # Extract the first word of "esd-config", so it can be a program name with args.
set dummy esd-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:13918: checking for $ac_word" >&5

if test -n "$have_esd_config"; then
  ac_cv_prog_have_esd_config="$have_esd_config" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_have_esd_config="yes"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_have_esd_config" && ac_cv_prog_have_esd_config="no"
fi
have_esd_config="$ac_cv_prog_have_esd_config"
if test -n "$have_esd_config"; then
  echo "$ac_t""$have_esd_config" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test "$have_esd_config" = "yes"; then
    save_c_switch_site="$c_switch_site" save_LIBS="$LIBS"
    c_switch_site="$c_switch_site `esd-config --cflags`" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"`esd-config --cflags`\" to \$c_switch_site"; fi
    LIBS="`esd-config --libs` $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"`esd-config --libs`\" to \$LIBS"; fi
    echo $ac_n "checking for esd_play_stream""... $ac_c" 1>&6
echo "configure:13947: checking for esd_play_stream" >&5

cat > conftest.$ac_ext <<EOF
#line 13950 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char esd_play_stream(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char esd_play_stream();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_esd_play_stream) || defined (__stub___esd_play_stream)
choke me
#else
esd_play_stream();
#endif

; return 0; }
EOF
if { (eval echo configure:13973: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_esd_play_stream=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_esd_play_stream=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'esd_play_stream`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_esd_sound=yes
else
  echo "$ac_t""no" 1>&6
c_switch_site="$save_c_switch_site" LIBS="$save_LIBS"
fi

  fi

  if test "$have_esd_sound" = "yes"; then
    with_esd_sound=yes
    need_miscplay=yes
    extra_objs="$extra_objs esd.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"esd.o\""
 fi
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_ESD_SOUND
EOF
cat >> confdefs.h <<\EOF
#define HAVE_ESD_SOUND 1
EOF
}

  else
    test "$with_esd_sound" = "yes" && \
      { echo "Error:" "Required ESD sound support cannot be provided." >&2; exit 1; }
    with_esd_sound=no
  fi
fi

test "$need_miscplay" = "yes" && extra_objs="$extra_objs miscplay.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"miscplay.o\""
 fi


test -z "$with_tty" && with_tty=yes

if test "$with_tty" = "yes"  ; then
  echo "checking for TTY-related features" 1>&6
echo "configure:14024: checking for TTY-related features" >&5
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_TTY
EOF
cat >> confdefs.h <<\EOF
#define HAVE_TTY 1
EOF
}

  extra_objs="$extra_objs console-tty.o device-tty.o event-tty.o frame-tty.o objects-tty.o redisplay-tty.o cm.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"console-tty.o device-tty.o event-tty.o frame-tty.o objects-tty.o redisplay-tty.o cm.o\""
 fi

    if test -z "$with_ncurses"; then
    
echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:14040: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -lncurses "
cat > conftest.$ac_ext <<EOF
#line 14045 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:14056: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_ncurses=yes
else
  echo "$ac_t""no" 1>&6
with_ncurses=no
fi


  fi
  if test "$with_ncurses" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_NCURSES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_NCURSES 1
EOF
}

    ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:14089: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 14092 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:14097: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_file=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

    ac_safe=`echo "ncurses/term.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/term.h""... $ac_c" 1>&6
echo "configure:14119: checking for ncurses/term.h" >&5

cat > conftest.$ac_ext <<EOF
#line 14122 "configure"
#include "confdefs.h"
#include <ncurses/term.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:14127: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  term_h_file=ncurses/term.h
else
  echo "$ac_t""no" 1>&6
fi

    extra_objs="$extra_objs terminfo.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"terminfo.o\""
 fi
    LIBS="-lncurses $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lncurses\" to \$LIBS"; fi

    if test "$ac_cv_header_ncurses_curses_h" != "yes" ; then
                        save_c_switch_site="$c_switch_site"
      c_switch_site="$c_switch_site -I/usr/include/ncurses"
      ac_safe=`echo "ncurses/curses.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ncurses/curses.h""... $ac_c" 1>&6
echo "configure:14157: checking for ncurses/curses.h" >&5

cat > conftest.$ac_ext <<EOF
#line 14160 "configure"
#include "confdefs.h"
#include <ncurses/curses.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:14165: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  curses_h_file=ncurses/curses.h
else
  echo "$ac_t""no" 1>&6
fi

      if test "$ac_cv_header_ncurses_curses_h" = "yes"
        then echo "configure: warning: "Your system has the bogus ncurses include bug."" 1>&2
        else c_switch_site="$save_c_switch_site"
      fi
    fi
  else         if test "$have_terminfo" = "yes"; then
      extra_objs="$extra_objs terminfo.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"terminfo.o\""
 fi
      if test -n "$libs_termcap"; then
	LIBS="$libs_termcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$libs_termcap\" to \$LIBS"; fi
      else
	for lib in curses termlib termcap; do
	  
echo $ac_n "checking for tgetent in -l$lib""... $ac_c" 1>&6
echo "configure:14200: checking for tgetent in -l$lib" >&5
ac_lib_var=`echo $lib'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -l$lib "
cat > conftest.$ac_ext <<EOF
#line 14205 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:14216: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-l${lib} $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l${lib}\" to \$LIBS"; fi; break
else
  echo "$ac_t""no" 1>&6
fi


	done
      fi
    else       if test -n "$libs_termcap" -a "$opsys" = "openbsd"; then
                                
echo $ac_n "checking for tgoto in -ltermcap""... $ac_c" 1>&6
echo "configure:14241: checking for tgoto in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgoto | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltermcap "
cat > conftest.$ac_ext <<EOF
#line 14246 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgoto();

int main() {
tgoto()
; return 0; }
EOF
if { (eval echo configure:14257: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo termcap | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-ltermcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ltermcap\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
extra_objs="$extra_objs tparam.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tparam.o\""
 fi
fi


      else
        extra_objs="$extra_objs tparam.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"tparam.o\""
 fi
      fi
                        case "$opsys" in *-hp-hpux* ) libs_termcap="-ltermcap" ;; esac
      if test -n "$libs_termcap"; then
	LIBS="$libs_termcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"$libs_termcap\" to \$LIBS"; fi
      else
	
echo $ac_n "checking for tgetent in -lcurses""... $ac_c" 1>&6
echo "configure:14302: checking for tgetent in -lcurses" >&5
ac_lib_var=`echo curses'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -lcurses "
cat > conftest.$ac_ext <<EOF
#line 14307 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:14318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lcurses $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lcurses\" to \$LIBS"; fi
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:14336: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`

xe_check_libs=" -ltermcap "
cat > conftest.$ac_ext <<EOF
#line 14341 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:14352: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  LIBS="-ltermcap $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ltermcap\" to \$LIBS"; fi
else
  echo "$ac_t""no" 1>&6
extra_objs="$extra_objs termcap.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"termcap.o\""
 fi
fi


fi


      fi
    fi
  fi
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining CURSES_H_FILE = "${curses_h_file-curses.h}"
EOF
cat >> confdefs.h <<EOF
#define CURSES_H_FILE "${curses_h_file-curses.h}"
EOF
}

  { test "$extra_verbose" = "yes" && cat << EOF
    Defining TERM_H_FILE = "${term_h_file-term.h}"
EOF
cat >> confdefs.h <<EOF
#define TERM_H_FILE "${term_h_file-term.h}"
EOF
}


    if test "$with_gpm" != "no"; then
    ac_safe=`echo "gpm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gpm.h""... $ac_c" 1>&6
echo "configure:14401: checking for gpm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 14404 "configure"
#include "confdefs.h"
#include <gpm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:14409: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      
echo $ac_n "checking for Gpm_Open in -lgpm""... $ac_c" 1>&6
echo "configure:14427: checking for Gpm_Open in -lgpm" >&5
ac_lib_var=`echo gpm'_'Gpm_Open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgpm "
cat > conftest.$ac_ext <<EOF
#line 14432 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Gpm_Open();

int main() {
Gpm_Open()
; return 0; }
EOF
if { (eval echo configure:14443: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  have_gpm=yes
else
  echo "$ac_t""no" 1>&6
fi


else
  echo "$ac_t""no" 1>&6
fi

    if test "$have_gpm" = "yes"; then
      with_gpm=yes
      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_GPM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_GPM 1
EOF
}

      extra_objs="$extra_objs gpmevent.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"gpmevent.o\""
 fi
      LIBS="-lgpm $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lgpm\" to \$LIBS"; fi
    elif test "$with_gpm" = "yes"; then
      { echo "Error:" "GPM requested, but gpm.h or libgpm seems to be missing." >&2; exit 1; }
    else
      with_gpm=no
    fi
  fi

else   for feature in ncurses gpm; do
    if eval "test -n \"\$with_${feature}\" -a \"\$with_${feature}\" != no" ; then
      echo "configure: warning: "--with-${feature} ignored:  Not valid without TTY support"" 1>&2
    fi
    eval "with_${feature}=no"
  done
fi 
test "$with_x11" = "yes" -o "$with_tty" = "yes" -o "$need_event_unixoid" = "yes" && extra_objs="$extra_objs event-unixoid.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"event-unixoid.o\""
 fi


test "$with_database_gdbm $with_database_dbm $with_database_berkdb" \
  != "no no no" && echo "checking for database support" 1>&6
echo "configure:14502: checking for database support" >&5

if test "$with_database_gdbm $with_database_dbm" != "no no"; then
  ac_safe=`echo "ndbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for ndbm.h""... $ac_c" 1>&6
echo "configure:14507: checking for ndbm.h" >&5

cat > conftest.$ac_ext <<EOF
#line 14510 "configure"
#include "confdefs.h"
#include <ndbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:14515: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6

    test "$with_database_gdbm" = "yes" -o \
         "$with_database_dbm"  = "yes" && \
      { echo "Error:" "Required DBM support cannot be provided." >&2; exit 1; }
    with_database_gdbm=no with_database_dbm=no
fi

fi

if test "$with_database_gdbm" != "no"; then
  
echo $ac_n "checking for dbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:14545: checking for dbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -lgdbm "
cat > conftest.$ac_ext <<EOF
#line 14550 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:14561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_gdbm=yes with_database_dbm=no libdbm=-lgdbm
else
  echo "$ac_t""no" 1>&6
if test "$with_database_gdbm" = "yes"; then
     { echo "Error:" "Required GNU DBM support cannot be provided." >&2; exit 1; }
   fi
   with_database_gdbm=no
fi


fi

if test "$with_database_dbm" != "no"; then
  echo $ac_n "checking for dbm_open""... $ac_c" 1>&6
echo "configure:14589: checking for dbm_open" >&5

cat > conftest.$ac_ext <<EOF
#line 14592 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dbm_open(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dbm_open) || defined (__stub___dbm_open)
choke me
#else
dbm_open();
#endif

; return 0; }
EOF
if { (eval echo configure:14615: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dbm_open=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'dbm_open`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes libdbm=
else
  echo "$ac_t""no" 1>&6

    
echo $ac_n "checking for dbm_open in -ldbm""... $ac_c" 1>&6
echo "configure:14634: checking for dbm_open in -ldbm" >&5
ac_lib_var=`echo dbm'_'dbm_open | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldbm "
cat > conftest.$ac_ext <<EOF
#line 14639 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:14650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_dbm=yes libdbm=-ldbm
else
  echo "$ac_t""no" 1>&6
test "$with_database_dbm" = "yes" && \
        { echo "Error:" "Required DBM support cannot be provided." >&2; exit 1; }
      with_database_dbm=no
fi


fi

fi

test -n "$libdbm" && LIBS=""$libdbm" $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \""$libdbm"\" to \$LIBS"; fi
test "$with_database_gdbm" = "yes" -o \
     "$with_database_dbm"  = "yes" && \
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DBM
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DBM 1
EOF
}


echo $ac_n "checking for u_int8_t""... $ac_c" 1>&6
echo "configure:14690: checking for u_int8_t" >&5

cat > conftest.$ac_ext <<EOF
#line 14693 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])u_int8_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_u_int8_t=yes
else
  rm -rf conftest*
  ac_cv_type_u_int8_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_u_int8_t" 1>&6
if test $ac_cv_type_u_int8_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining u_int8_t = uint8_t
EOF
cat >> confdefs.h <<\EOF
#define u_int8_t uint8_t
EOF
}

fi

if test $ac_cv_type_u_int8_t = yes; then
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_U_INT8_T = 1
EOF
cat >> confdefs.h <<\EOF
#define HAVE_U_INT8_T 1
EOF
}

fi
echo $ac_n "checking for u_int16_t""... $ac_c" 1>&6
echo "configure:14734: checking for u_int16_t" >&5

cat > conftest.$ac_ext <<EOF
#line 14737 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])u_int16_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_u_int16_t=yes
else
  rm -rf conftest*
  ac_cv_type_u_int16_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_u_int16_t" 1>&6
if test $ac_cv_type_u_int16_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining u_int16_t = uint16_t
EOF
cat >> confdefs.h <<\EOF
#define u_int16_t uint16_t
EOF
}

fi

if test $ac_cv_type_u_int16_t = yes; then
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_U_INT16_T = 1
EOF
cat >> confdefs.h <<\EOF
#define HAVE_U_INT16_T 1
EOF
}

fi
echo $ac_n "checking for u_int32_t""... $ac_c" 1>&6
echo "configure:14778: checking for u_int32_t" >&5

cat > conftest.$ac_ext <<EOF
#line 14781 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])u_int32_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_u_int32_t=yes
else
  rm -rf conftest*
  ac_cv_type_u_int32_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_u_int32_t" 1>&6
if test $ac_cv_type_u_int32_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining u_int32_t = uint32_t
EOF
cat >> confdefs.h <<\EOF
#define u_int32_t uint32_t
EOF
}

fi

if test $ac_cv_type_u_int32_t = yes; then
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_U_INT32_T = 1
EOF
cat >> confdefs.h <<\EOF
#define HAVE_U_INT32_T 1
EOF
}

fi
echo $ac_n "checking for u_int64_t""... $ac_c" 1>&6
echo "configure:14822: checking for u_int64_t" >&5

cat > conftest.$ac_ext <<EOF
#line 14825 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])u_int64_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_u_int64_t=yes
else
  rm -rf conftest*
  ac_cv_type_u_int64_t=no
fi
rm -f conftest*

echo "$ac_t""$ac_cv_type_u_int64_t" 1>&6
if test $ac_cv_type_u_int64_t = no; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining u_int64_t = uint64_t
EOF
cat >> confdefs.h <<\EOF
#define u_int64_t uint64_t
EOF
}

fi

if test $ac_cv_type_u_int64_t = yes; then
{ test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_U_INT64_T = 1
EOF
cat >> confdefs.h <<\EOF
#define HAVE_U_INT64_T 1
EOF
}

fi

if test "$with_database_berkdb" != "no"; then
  echo $ac_n "checking for Berkeley db.h""... $ac_c" 1>&6
echo "configure:14868: checking for Berkeley db.h" >&5
  for header in "db/db.h" "db.h"; do
    case "$opsys" in
        *freebsd*)
    cat > conftest.$ac_ext <<EOF
#line 14873 "configure"
#include "confdefs.h"

#include <stdlib.h>
#if !(defined __GLIBC__ && __GLIBC_MINOR__ >= 1)
#ifdef HAVE_INTTYPES_H
#define __BIT_TYPES_DEFINED__
#include <inttypes.h>
#endif
#endif
#include <$header>

int main() {

; return 0; }
EOF
if { (eval echo configure:14889: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  db_h_file="$header"; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
        ;;
        *)
    cat > conftest.$ac_ext <<EOF
#line 14900 "configure"
#include "confdefs.h"

#include <stdlib.h>
#if !(defined __GLIBC__ && __GLIBC_MINOR__ >= 1)
#ifdef HAVE_INTTYPES_H
#define __BIT_TYPES_DEFINED__
#include <inttypes.h>
#if !HAVE_U_INT8_T
typedef uint8_t  u_int8_t;
#endif
#if !HAVE_U_INT16_T
typedef uint16_t u_int16_t;
#endif
#if !HAVE_U_INT32_T
typedef uint32_t u_int32_t;
#endif
#ifdef WE_DONT_NEED_QUADS
#if !HAVE_U_INT64_T
typedef uint64_t u_int64_t;
#endif
#endif
#endif
#endif
#include <$header>

int main() {

; return 0; }
EOF
if { (eval echo configure:14930: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  db_h_file="$header"; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
        ;;
        esac
  done
  if test -z "$db_h_file"
  then echo "$ac_t""no" 1>&6; with_database_berkdb=no
  else echo "$ac_t""$db_h_file" 1>&6
  fi

  if test "$with_database_berkdb" != "no"; then
    echo $ac_n "checking for Berkeley DB version""... $ac_c" 1>&6
echo "configure:14948: checking for Berkeley DB version" >&5
    cat > conftest.$ac_ext <<EOF
#line 14950 "configure"
#include "confdefs.h"
#include <$db_h_file>
#if DB_VERSION_MAJOR > 1
yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  cat > conftest.$ac_ext <<EOF
#line 14962 "configure"
#include "confdefs.h"
#include <$db_h_file>
#if DB_VERSION_MAJOR > 2
yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""3" 1>&6; dbfunc=db_create
else
  rm -rf conftest*
  
    echo "$ac_t""2" 1>&6; dbfunc=db_open
fi
rm -f conftest*

else
  rm -rf conftest*
  
    echo "$ac_t""1" 1>&6; dbfunc=dbopen
fi
rm -f conftest*

    echo $ac_n "checking for $dbfunc""... $ac_c" 1>&6
echo "configure:14989: checking for $dbfunc" >&5

cat > conftest.$ac_ext <<EOF
#line 14992 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $dbfunc(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $dbfunc();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$dbfunc) || defined (__stub___$dbfunc)
choke me
#else
$dbfunc();
#endif

; return 0; }
EOF
if { (eval echo configure:15015: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$dbfunc=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$dbfunc=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$dbfunc`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=no
else
  echo "$ac_t""no" 1>&6

    
echo $ac_n "checking for $dbfunc in -ldb""... $ac_c" 1>&6
echo "configure:15034: checking for $dbfunc in -ldb" >&5
ac_lib_var=`echo db'_'$dbfunc | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldb "
cat > conftest.$ac_ext <<EOF
#line 15039 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $dbfunc();

int main() {
$dbfunc()
; return 0; }
EOF
if { (eval echo configure:15050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  with_database_berkdb=yes need_libdb=yes
else
  echo "$ac_t""no" 1>&6
fi


fi

  fi

  if test "$with_database_berkdb" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << EOF
    Defining DB_H_FILE = "$db_h_file"
EOF
cat >> confdefs.h <<EOF
#define DB_H_FILE "$db_h_file"
EOF
}

    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_BERKELEY_DB
EOF
cat >> confdefs.h <<\EOF
#define HAVE_BERKELEY_DB 1
EOF
}

    test "$need_libdb" = "yes" && LIBS="-ldb $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-ldb\" to \$LIBS"; fi
  else with_database_berkdb=no
  fi
fi

if test "$with_database_gdbm $with_database_dbm $with_database_berkdb" \
     != "no no no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DATABASE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DATABASE 1
EOF
}

  extra_objs="$extra_objs database.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"database.o\""
 fi
  if test "$with_utf_2000" = "yes" -a "$with_chise" != "yes" ; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_CHISE
EOF
cat >> confdefs.h <<\EOF
#define HAVE_CHISE 1
EOF
}

  fi
fi

if test "$with_socks" = "yes"; then
  
echo $ac_n "checking for SOCKSinit in -lsocks""... $ac_c" 1>&6
echo "configure:15124: checking for SOCKSinit in -lsocks" >&5
ac_lib_var=`echo socks'_'SOCKSinit | sed 'y%./+-%__p_%'`

xe_check_libs=" -lsocks "
cat > conftest.$ac_ext <<EOF
#line 15129 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char SOCKSinit();

int main() {
SOCKSinit()
; return 0; }
EOF
if { (eval echo configure:15140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socks | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_lib
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF
}

  LIBS="-lsocks $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-lsocks\" to \$LIBS"; fi

else
  echo "$ac_t""no" 1>&6
fi


  test -n "$ac_cv_lib_socks_SOCKSinit" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SOCKS
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SOCKS 1
EOF
}

fi

if test "$usage_tracking" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USAGE_TRACKING
EOF
cat >> confdefs.h <<\EOF
#define USAGE_TRACKING 1
EOF
}

  LIBS="-Bstatic -lut -Bdynamic $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-Bstatic -lut -Bdynamic\" to \$LIBS"; fi
fi

if test "$with_modules" != "no"; then
  echo "checking for module support" 1>&6
echo "configure:15195: checking for module support" >&5

    if test "$with_msw" = "yes"; then
    have_dl=yes;
  else
        case "$opsys" in
      darwin) have_dl=yes; { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DYLD
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DYLD 1
EOF
}
 ;;
      *)          ac_safe=`echo "dlfcn.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for dlfcn.h""... $ac_c" 1>&6
echo "configure:15211: checking for dlfcn.h" >&5

cat > conftest.$ac_ext <<EOF
#line 15214 "configure"
#include "confdefs.h"
#include <dlfcn.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:15219: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
           echo $ac_n "checking for dlopen in -lc""... $ac_c" 1>&6
echo "configure:15236: checking for dlopen in -lc" >&5
           cat > conftest.$ac_ext <<EOF
#line 15238 "configure"
#include "confdefs.h"
#include <dlfcn.h>
int main() {
	      dlopen ("", 0);
; return 0; }
EOF
if { (eval echo configure:15245: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
   have_dl=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
               echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:15254: checking for dlopen in -ldl" >&5
               ac_save_LIBS="$LIBS"
               LIBS="-ldl $LIBS"
               cat > conftest.$ac_ext <<EOF
#line 15258 "configure"
#include "confdefs.h"
#include <dlfcn.h>
int main() {
	         dlopen ("", 0);
; return 0; }
EOF
if { (eval echo configure:15265: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
   have_dl=yes 
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  LIBS="$ac_save_LIBS"
fi
rm -f conftest*
               ac_save_LIBS=
fi
rm -f conftest*
else
  echo "$ac_t""no" 1>&6
fi

        if test -n "$have_dl"; then
           { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLOPEN
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLOPEN 1
EOF
}

        else
           
echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
echo "configure:15294: checking for shl_load in -ldld" >&5
ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldld "
cat > conftest.$ac_ext <<EOF
#line 15299 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shl_load();

int main() {
shl_load()
; return 0; }
EOF
if { (eval echo configure:15310: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libdl=dld have_dl=yes;
           { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SHL_LOAD
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SHL_LOAD 1
EOF
}

else
  echo "$ac_t""no" 1>&6

echo $ac_n "checking for dld_init in -ldld""... $ac_c" 1>&6
echo "configure:15337: checking for dld_init in -ldld" >&5
ac_lib_var=`echo dld'_'dld_init | sed 'y%./+-%__p_%'`

xe_check_libs=" -ldld "
cat > conftest.$ac_ext <<EOF
#line 15342 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dld_init();

int main() {
dld_init()
; return 0; }
EOF
if { (eval echo configure:15353: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
xe_check_libs=""

if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes" ; then
  echo "$ac_t""yes" 1>&6
  libdl=dld have_dl=yes;
           { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_DLD_INIT
EOF
cat >> confdefs.h <<\EOF
#define HAVE_DLD_INIT 1
EOF
}

else
  echo "$ac_t""no" 1>&6
fi


fi


        fi
    ;;
    esac
  fi 
  if test -n "$have_dl"; then
        
dll_ld=
dll_ldflags=
dll_cflags=
dll_post=
dll_ldo="-o"
ld_dynamic_link_flags=
xehost=$canonical
xealias=$internal_configuration

echo "checking how to build dynamic libraries for ${xehost}" 1>&6
echo "configure:15400: checking how to build dynamic libraries for ${xehost}" >&5
# Transform *-*-linux* to *-*-linux-gnu*, to support old configure scripts.
case "$xehost" in
*-*-linux-gnu*) ;;
*-*-linux*) xehost=`echo $xehost | sed 's/^\(.*-.*-linux\)\(.*\)$/\1-gnu\2/'`
esac

xehost_cpu=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
xehost_vendor=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
xehost_os=`echo $xehost | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`

case "$xehost_os" in
aix3*)
  # AIX sometimes has problems with the GCC collect2 program.  For some
  # reason, if we set the COLLECT_NAMES environment variable, the problems
  # vanish in a puff of smoke.
  if test "${COLLECT_NAMES+set}" != set; then
    COLLECT_NAMES=
    export COLLECT_NAMES
  fi
  ;;
esac

# Now see if the compiler is really GCC.
if test "$GCC" = "yes"; then
  XEGCC=yes
else
  echo $ac_n "checking checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:15428: checking checking whether we are using GNU C" >&5
  cat > conftest.$ac_ext <<EOF
#line 15430 "configure"
#include "confdefs.h"

#ifdef __GNUC__
  yes;
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  XEGCC=yes
else
  rm -rf conftest*
  XEGCC=no
fi
rm -f conftest*

  echo "$ac_t""${XEGCC}" 1>&6
fi

echo $ac_n "checking how to produce PIC code""... $ac_c" 1>&6
echo "configure:15452: checking how to produce PIC code" >&5
wl=

can_build_shared=yes
if test "$XEGCC" = yes -o "$__ICC" = yes; then
  wl='-Wl,'

  case "$xehost_os" in
  aix[3-9]* | irix[5-9]* | osf[3-9])
    # PIC is the default for these OSes.
    ;;

  os2*)
    # We can build DLLs from non-PIC.
    ;;
  amigaos*)
    # FIXME: we need at least 68020 code to build shared libraries, but
    # adding the `-m68020' flag to GCC prevents building anything better,
    # like `-m68040'.
    dll_cflags='-m68020 -resident32 -malways-restore-a4'
    ;;
  *cygwin* | *mingw* )
    # PIC is the default
    ;;
  *)
    dll_cflags='-fPIC'
    ;;
  esac
else
  # PORTME Check for PIC flags for the system compiler.
  case "$xehost_os" in
  hpux9* | hpux1[0-9]*)
    # Is there a better link_static_flag that works with the bundled CC?
    wl='-Wl,'
    dll_cflags='+Z'
    ;;

  irix[5-9]*)
    wl='-Wl,'
    # PIC (with -KPIC) is the default.
    ;;

  os2*)
    # We can build DLLs from non-PIC.
    ;;

  osf[3-9]*)
    # All OSF/1 code is PIC.
    wl='-Wl,'
    ;;

  aix[3-9]*)
    # All AIX code is PIC.
    wl='-Wl,'
    ;;

  sco3.2v5*)
    dll_cflags='-belf -Kpic'
    wl='-Wl,'
    ;;

  unixware*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  sysv4*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  sysv5*)
    dll_cflags="-KPIC"
    wl="-Wl,"
    ;;

  solaris2*)
    dll_cflags='-KPIC'
    wl='-Wl,'
    ;;

  sunos4*)
    dll_cflags='-PIC'
    wl='-Qoption ld '
    ;;

  uts4*)
    dll_cflags='-pic'
    ;;

  *)
    can_build_shared=no
    ;;
  esac
fi

if test -n "$dll_cflags"; then
  echo "$ac_t""${dll_cflags}" 1>&6

  # Check to make sure the dll_cflags actually works.
  echo $ac_n "checking if PIC flag ${dll_cflags} really works""... $ac_c" 1>&6
echo "configure:15553: checking if PIC flag ${dll_cflags} really works" >&5
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS $dll_cflags -DPIC"
  cat > conftest.$ac_ext <<EOF
#line 15557 "configure"
#include "confdefs.h"

int main() {
int x=0;
; return 0; }
EOF
if { (eval echo configure:15564: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    # On HP-UX, the stripped-down bundled CC doesn't accept +Z, but also
    # reports no error.  So, we need to grep stderr for (Bundled).
    if grep '(Bundled)' config.log >/dev/null; then
      echo "$ac_t""no" 1>&6
      can_build_shared=no
      dll_cflags=
    else
      echo "$ac_t""yes" 1>&6
    fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
    can_build_shared=no
    dll_cflags=
fi
rm -f conftest*
  CFLAGS="$save_CFLAGS"
else
  echo "$ac_t""none" 1>&6
fi

if test "$can_build_shared" = "yes"; then
cc_produces_so=no
xldf=
xcldf=
echo $ac_n "checking if C compiler can produce shared libraries""... $ac_c" 1>&6
echo "configure:15595: checking if C compiler can produce shared libraries" >&5
if test "$XEGCC" = yes -o "$__ICC" = yes; then
  xcldf="-shared"
  xldf="-shared"
else # Not using GCC
  case "$xehost_os" in
    aix[3-9]*)
      xldf="-bE:ELLSONAME.exp -H512 -T512 -bhalt:4 -bM:SRE -bnoentry -lc"
      xcldf="${wl}-bE:ELLSONAME.exp ${wl}-H512 ${wl}-T512 ${wl}-bhalt:4 ${wl}-bM:SRE ${wl}-bnoentry ${wl}-lc"
      ;;

    freebsd2* | netbsd* | openbsd*)
      xldf="-Bshareable"
      xcldf="${wl}-Bshareable"
      ;;

    freebsd3*)
      xcldf="-shared"
      ;;

    hpux*)
      xldf="-b +s"
      xcldf="${wl}-b ${wl}+s"
      ;;

    irix[5-9]* | osf[3-9]*)
      xcldf="${wl}-shared"
      xldf="-shared"
      ;;

    sco3.2v5* | unixware* | sysv5* | sysv4* | solaris2* | solaris7* | uts4*)
      xcldf="-G"
      xldf="-G"
      ;;

    sunos4*)
      xcldf="${wl}-assert ${wl}pure-text ${wl}-Bstatic"
      xldf="-assert pure-text -Bstatic"
      ;;
  esac
fi # End if if we are using gcc

if test -n "$xcldf"; then
  save_LDFLAGS=$LDFLAGS
  save_LIBS=$LIBS
  save_xe_libs=$xe_libs
  LDFLAGS="$xcldf $LDFLAGS"
  LIBS=
  xe_libs=
  ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
  cat > conftest.$ac_ext <<EOF
#line 15646 "configure"
#include "confdefs.h"

int main() {
int x=0;
; return 0; }
EOF
if { (eval echo configure:15653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  cc_produces_so=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  cc_produces_so=no
fi
rm -f conftest*
  LDFLAGS=$save_LDFLAGS
  LIBS=$save_LIBS
  xe_libs=$save_xe_libs
  ac_link='${CC-cc} -o conftest $CFLAGS '"$xe_cppflags $xe_ldflags"' conftest.$ac_ext '"$xe_libs"' 1>&5'
else
  cc_produces_so=no
fi
echo "$ac_t""${cc_produces_so}" 1>&6

LTLD=$LD
if test -z "$LTLD"; then
  ac_prog=ld
  if test "$XEGCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
    echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
echo "configure:15678: checking for ld used by GCC" >&5
    ac_prog=`($CC -print-prog-name=ld) 2>&5`
    case "$ac_prog" in
    # Accept absolute paths.
    /*)
      if test -z "$LTLD"; then
#        case "$ac_prog" in
#          *gcc-lib*) LTLD="$CC"
#                     ;;
#          *)
         LTLD="$ac_prog"
#                     ;;
#        esac
      fi
      ;;
    "")
      # If it fails, then pretend we aren't using GCC.
      ac_prog=ld
      ;;
    *)
      # If it is relative, then search for the first ld in PATH.
      with_gnu_ld=unknown
      ;;
    esac
  else
    echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:15704: checking for GNU ld" >&5
  fi

  if test -z "$LTLD"; then
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
    for ac_dir in $PATH; do
      test -z "$ac_dir" && ac_dir=.
      if test -f "$ac_dir/$ac_prog"; then
        LTLD="$ac_dir/$ac_prog"
        # Check to see if the program is GNU ld.  I'd rather use --version,
        # but apparently some GNU ld's only accept -v.
        # Break only if it was the GNU/non-GNU ld that we prefer.
        if "$LTLD" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then
          xe_gnu_ld=yes
        else
          xe_gnu_ld=no
        fi
      fi
    done
    IFS="$ac_save_ifs"
  fi

  if test -n "$LTLD"; then
    echo "$ac_t""${LTLD}" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

  if test -z "$LTLD" -a "$cc_produces_so" = no; then
    { echo "configure: error: no acceptable linker found in \$PATH" 1>&2; exit 1; }
    exit 1
  fi
fi

ld_dynamic_link_flags=

# Check to see if it really is or isn't GNU ld.
echo $ac_n "checking if the linker is GNU ld""... $ac_c" 1>&6
echo "configure:15742: checking if the linker is GNU ld" >&5
# I'd rather use --version here, but apparently some GNU ld's only accept -v.
if $LTLD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
  xe_gnu_ld=yes
else
  xe_gnu_ld=no
fi
echo "$ac_t""${xe_gnu_ld}" 1>&6

case "$xehost_os" in
  amigaos* | sunos4*)
    # On these operating systems, we should treat GNU ld like the system ld.
    gnu_ld_acts_native=yes
    ;;
  *)
    gnu_ld_acts_native=no
    ;;
esac

if test "$cc_produces_so" = "yes"; then
  dll_ld=$CC
  dll_ldflags=$xcldf
  can_build_shared=yes
  ld_shlibs=yes
else
  # OK - only NOW do we futz about with ld.
  # See if the linker supports building shared libraries.
  echo $ac_n "checking whether the linker supports shared libraries""... $ac_c" 1>&6
echo "configure:15770: checking whether the linker supports shared libraries" >&5
  dll_ld=$CC
  dll_ldflags=$LDFLAGS
  ld_shlibs=yes
  can_build_shared=yes
  if test "$xe_gnu_ld" = yes && test "$gnu_ld_acts_native" != yes; then
    # See if GNU ld supports shared libraries.
    if $LTLD --help 2>&1 | egrep ': supported targets:.* elf' > /dev/null; then
      dll_ld=$CC
      dll_ldflags="-shared"
      ld_shlibs=yes
    else
      ld_shlibs=no
    fi
  else
    # PORTME fill in a description of your system's linker (not GNU ld)
    case "$xehost_os" in
    aix3*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    aix[4-9]*)
      dll_ldflags=$xcldf
      ;;

    # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
    # support.  Future versions do this automatically, but an explicit c++rt0.o
    # doesn't break anything, and helps significantly (at the cost of a little
    # extra space).
    freebsd2.2*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      dll_post="/usr/lib/c++rt0.o"
      ;;

    # Unfortunately, older versions of FreeBSD 2 don't have this feature.
    freebsd2*)
      dll_ld=$LTLD
      dll_ldflags="-Bshareable"
      ;;

    # FreeBSD 3, at last, uses gcc -shared to do shared libraries.
    freebsd3*)
      dll_ldflags="-shared"
      ;;

    hpux*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    irix[5-9]*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    netbsd*)
      # Tested with NetBSD 1.2 ld
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    openbsd*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    osf3* | osf4*)
      dll_ld=$LTLD
      dll_ldflags=$xldf
      ;;

    # For both SCO and Solaris we MAY want to have LDFLAGS include -z text
    sco3.2v5* | unixware* | sysv5* | sysv4* | solaris2* | solaris7*)
      dll_ld=$LTLD
      case "$dll_ld" in
        *gcc*) dll_ldflags="-shared"
               dll_ld=$CC
               ;;
        *)     dll_ldflags="-G"
               ;;
      esac
      ;;

    sunos4*)
      if test "$XEGCC" = yes; then
        dll_ld=$CC
      else
        dll_ld=$LTLD
      fi
      dll_ldflags=$xldf
      ;;

    uts4*)
      dll_ld=$LTLD
      dll_ldflags="-G"
      ;;

    bsdi*)
      dll_ldflags="-r"
      dll_ld="shlicc2"
      ;;

    *)
      ld_shlibs=no
      can_build_shared=no
      ;;
    esac
  fi
  echo "$ac_t""${ld_shlibs}" 1>&6
  if test "$ld_shlibs" = "no"; then
    can_build_shared=no
  fi
fi # End of if cc_produces_so = no


if test "$xe_gnu_ld" = yes; then
  if test "$ld_shlibs" = yes; then
    ld_dynamic_link_flags="${wl}-export-dynamic"
  fi
fi

if test -z "$ld_dynamic_link_flags"; then
  case "$xehost_os" in
  aix[3-9]*)
    ld_dynamic_link_flags=
    ;;

  freebsd2.2*)
    ld_dynamic_link_flags=
    ;;

  freebsd2*)
    ld_dynamic_link_flags=
    ;;

  freebsd3*)
    ld_dynamic_link_flags=
    ;;

  hpux*)
    ld_dynamic_link_flags="${wl}-E"
    ;;

  irix[5-9]*)
    ld_dynamic_link_flags=
    ;;

  netbsd*)
    ld_dynamic_link_flags=
    ;;

  openbsd*)
    ld_dynamic_link_flags=
    ;;

  osf3* | osf4*)
    ld_dynamic_link_flags=
    ;;

  solaris2* | solaris7*)
    ld_dynamic_link_flags=
    ;;

  sco3.2v5* | unixware* | sysv5* | sysv4*)
    ld_dynamic_link_flags="${wl}-Bexport"
    ;;

  sunos4*)
    ld_dynamic_link_flags=
    ;;

  uts4*)
    ld_dynamic_link_flags=
    ;;

  bsdi*)
    ld_dynamic_link_flags=
    ;;

  esac
fi # End of if -z ld_dynamic_link_flags
fi # End of if test "$can_build_shared" = "yes"








  fi

  if test "$can_build_shared" = "yes"; then
    { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_SHLIB
EOF
cat >> confdefs.h <<\EOF
#define HAVE_SHLIB 1
EOF
}

    extra_objs="$extra_objs sysdll.o emodules.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"sysdll.o emodules.o\""
 fi
    INSTALL_ARCH_DEP_SUBDIR="$INSTALL_ARCH_DEP_SUBDIR src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"src\" to \$INSTALL_ARCH_DEP_SUBDIR"; fi
    test -n "$libdl" && LIBS="-l${libdl} $LIBS" &&  if test "$extra_verbose" = "yes"; then echo "    Prepending \"-l${libdl}\" to \$LIBS"; fi
    for ac_func in dlerror _dlerror
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:15981: checking for $ac_func" >&5

cat > conftest.$ac_ext <<EOF
#line 15984 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:16007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  { test "$extra_verbose" = "yes" && cat << EOF
    Defining $ac_tr_func
EOF
cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
}
 
else
  echo "$ac_t""no" 1>&6
fi
done

    with_modules=yes
  else
    if test "$with_modules" = "yes"; then
      { echo "Error:" "Required module support cannot be provided." >&2; exit 1; }
    else
      echo "configure: warning: "Module support cannot be provided."" 1>&2
    fi
    with_modules=no
  fi
fi

cat > conftest.$ac_ext <<EOF
#line 16046 "configure"
#include "confdefs.h"
int main(int c,char *v[]){return 0;}
EOF
if { (eval echo configure:16050: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit $?) 2>&5
then
  :
else
  conftest_rc="$?"
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  echo ""
  echo "*** PANIC *** configure forgot how to build working executables!"
  echo ""
  echo "*** This is most commonly due to an unforeseen environment, causing"
  echo "*** configure to incorrectly compute the sequence of libraries to link."
  echo "*** Please examine the tail of config.log for runtime errors."
  echo "*** Pay special attention to the -l flags, and perhaps -I and -L."
  echo "*** Often adding or removing explicit options in the configure"
  echo "*** invocation can work around this kind of problem.  If so, please"
  echo "*** report it as a bug to xemacs-beta@xemacs.org."
  echo "***"
  echo "*** Other possible causes are inability to write to the file system"
  echo "*** (bogus permissions or disk full) or a misconfiguration of the dynamic"
  echo "*** linker.  On Linux, check /etc/ld.conf and rerun ldconfig if"
  echo "*** necessary.  On other systems, try telling configure where to find"
  echo "*** the shared libraries using the --site-runtime-libraries option."
  echo "***"
  echo "*** Another way to shoot yourself in the foot is to specify"
  echo "*** --with-FEATURE when FEATURE is not actually installed on your"
  echo "*** system.  Don't do that."
  exit 1
fi
rm -fr conftest*

if test "$win32_processes" = "yes"; then
  extra_objs="$extra_objs process-nt.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"process-nt.o\""
 fi
else
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HAVE_UNIX_PROCESSES
EOF
cat >> confdefs.h <<\EOF
#define HAVE_UNIX_PROCESSES 1
EOF
}

  extra_objs="$extra_objs process-unix.o" &&  if test "$extra_verbose" = "yes"; then
   echo "    xemacs will be linked with \"process-unix.o\""
 fi
fi



T=""
for W in $CFLAGS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
CFLAGS="$T"


T=""
for W in $extra_objs; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
extra_objs="$T"


T=""
for W in -DHAVE_CONFIG_H $c_switch_site $c_switch_machine $c_switch_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_general="$T"


T=""
for W in $c_switch_x_site $c_switch_gtk $X_CFLAGS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_window_system="$T"


T=""
for W in $c_switch_general $c_switch_window_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
c_switch_all="$T"


T=""
for W in $ld_switch_site $ld_switch_machine $ld_switch_system $ld_switch_run; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_general="$T"


T=""
for W in $ld_switch_x_site; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_window_system="$T"


T=""
for W in $ld_switch_general $ld_switch_window_system; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_switch_all="$T"


T=""
for W in $LIBS $libs_machine $libs_system $libs_standard; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_general="$T"


T=""
for W in $X_EXTRA_LIBS $libs_x $libs_gtk $X_PRE_LIBS; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_window_system="$T"


T=""
for W in $ld_libs_window_system $ld_libs_general; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ld_libs_all="$T"



MAKE_SUBDIR="$MAKE_SUBDIR src" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"src\" to \$MAKE_SUBDIR"; fi
internal_makefile_list="Makefile.in"
SUBDIR_MAKEFILES=''
test -d lock || mkdir lock
for dir in $MAKE_SUBDIR; do
  case "$dir" in */* )     ( for d in `echo $dir | sed 's:/: :g'` ; do
        test -d "$d" || mkdir "$d"; cd "$d"
      done ) ;;
   * ) test -d "$dir" || mkdir "$dir" ;;
  esac
  
T=""
for W in $SUBDIR_MAKEFILES $dir/Makefile $dir/GNUmakefile; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
SUBDIR_MAKEFILES="$T"

  
T=""
for W in $internal_makefile_list $dir/Makefile.in; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
internal_makefile_list="$T"

done




for dir in src/s src/m; do
  if test ! -d "$dir" ; then
    echo Making symbolic link to "$srcdir/$dir"
    ${LN_S} "$srcdir/$dir" "$dir"
  fi
done

if test "$extra_verbose" = "yes"; then
  echo ""
  for var in extra_objs    c_switch_general  c_switch_window_system  c_switch_all   ld_switch_general ld_switch_window_system ld_switch_all     ld_libs_general   ld_libs_window_system   ld_libs_all; do eval "echo \"$var = '\$$var'\""; done
  echo ""
fi


if test -f "$srcdir/src/.gdbinit" -a ! -f "src/.gdbinit"; then
  test "$extra_verbose" = "yes" && echo "creating src/.gdbinit"
  echo "source $srcdir/src/.gdbinit" > "src/.gdbinit"
fi

if test -f "$srcdir/src/.dbxrc" -a ! -f "src/.dbxrc"; then
  test "$extra_verbose" = "yes" && echo "creating src/.dbxrc"
  echo ". $srcdir/src/.dbxrc" > "src/.dbxrc"
fi

if test -f "$srcdir/TAGS" -a ! -f "TAGS"; then
  test "$extra_verbose" = "yes" && echo "creating TAGS"
  echo "
$srcdir/TAGS,include" > "TAGS"
fi

if test "$__SUNPRO_C" = "yes"; then
  test "$extra_verbose" = "yes" && echo "creating .sbinit"
  ( echo "# For use with Sun WorkShop's Source browser."
    echo "# See sbquery(1) and sbinit(4) for more information"
    for dir in $MAKE_SUBDIR; do echo "import $dir"; done
  ) > .sbinit
fi

rm -f core




















PREFIX=$prefix
while true; do
  case "$PREFIX" in
    *\$* ) eval "PREFIX=$PREFIX" ;;
    *) break ;;
  esac
done




EXEC_PREFIX=$exec_prefix
while true; do
  case "$EXEC_PREFIX" in
    *\$* ) eval "EXEC_PREFIX=$EXEC_PREFIX" ;;
    *) break ;;
  esac
done




INFODIR=$infodir
while true; do
  case "$INFODIR" in
    *\$* ) eval "INFODIR=$INFODIR" ;;
    *) break ;;
  esac
done




INFOPATH=$infopath
while true; do
  case "$INFOPATH" in
    *\$* ) eval "INFOPATH=$INFOPATH" ;;
    *) break ;;
  esac
done




PACKAGE_PATH=$package_path
while true; do
  case "$PACKAGE_PATH" in
    *\$* ) eval "PACKAGE_PATH=$PACKAGE_PATH" ;;
    *) break ;;
  esac
done




LISPDIR=$lispdir
while true; do
  case "$LISPDIR" in
    *\$* ) eval "LISPDIR=$LISPDIR" ;;
    *) break ;;
  esac
done




MODULEDIR=$moduledir
while true; do
  case "$MODULEDIR" in
    *\$* ) eval "MODULEDIR=$MODULEDIR" ;;
    *) break ;;
  esac
done




SITELISPDIR=$sitelispdir
while true; do
  case "$SITELISPDIR" in
    *\$* ) eval "SITELISPDIR=$SITELISPDIR" ;;
    *) break ;;
  esac
done




SITEMODULEDIR=$sitemoduledir
while true; do
  case "$SITEMODULEDIR" in
    *\$* ) eval "SITEMODULEDIR=$SITEMODULEDIR" ;;
    *) break ;;
  esac
done




ETCDIR=$etcdir
while true; do
  case "$ETCDIR" in
    *\$* ) eval "ETCDIR=$ETCDIR" ;;
    *) break ;;
  esac
done




DOCDIR=$docdir
while true; do
  case "$DOCDIR" in
    *\$* ) eval "DOCDIR=$DOCDIR" ;;
    *) break ;;
  esac
done




ARCHLIBDIR=$archlibdir
while true; do
  case "$ARCHLIBDIR" in
    *\$* ) eval "ARCHLIBDIR=$ARCHLIBDIR" ;;
    *) break ;;
  esac
done




















RECURSIVE_MAKE_ARGS="\$(MFLAGS) CC='\$(CC)' CFLAGS='\$(CFLAGS)' LDFLAGS='\$(LDFLAGS)' CPPFLAGS='\$(CPPFLAGS)'"







: ${XEMACS_CC:=$CC}


if test "$with_prefix" = "yes"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PREFIX_USER_DEFINED
EOF
cat >> confdefs.h <<\EOF
#define PREFIX_USER_DEFINED 1
EOF
}

fi

if test "$with_site_lisp" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INHIBIT_SITE_LISP
EOF
cat >> confdefs.h <<\EOF
#define INHIBIT_SITE_LISP 1
EOF
}

fi
if test "$with_site_modules" = "no"; then
  { test "$extra_verbose" = "yes" && cat << \EOF
    Defining INHIBIT_SITE_MODULES
EOF
cat >> confdefs.h <<\EOF
#define INHIBIT_SITE_MODULES 1
EOF
}

fi


T=""
for W in $ac_configure_args; do if test -z "$T"; then T="$W"; else T="$T $W"; fi; done
ac_configure_args="$T"

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_CONFIGURATION = "$configuration"
EOF
cat >> confdefs.h <<EOF
#define EMACS_CONFIGURATION "$configuration"
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining EMACS_CONFIG_OPTIONS = "$ac_configure_args"
EOF
cat >> confdefs.h <<EOF
#define EMACS_CONFIG_OPTIONS "$ac_configure_args"
EOF
}



null_string=""
{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_X_SITE_AUX = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_X_SITE_AUX $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_X_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_X_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining LD_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define LD_SWITCH_SITE $null_string
EOF
}

{ test "$extra_verbose" = "yes" && cat << EOF
    Defining C_SWITCH_SITE = $null_string
EOF
cat >> confdefs.h <<EOF
#define C_SWITCH_SITE $null_string
EOF
}



if   test "$GNU_MALLOC"         = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining GNU_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define GNU_MALLOC 1
EOF
}

elif test "$with_system_malloc" = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_SYSTEM_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_SYSTEM_MALLOC 1
EOF
}

elif test "$with_debug_malloc"  = "yes"; then { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_DEBUG_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_DEBUG_MALLOC 1
EOF
}

					      { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_SYSTEM_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define USE_SYSTEM_MALLOC 1
EOF
}

fi
test "$with_i18n3"         = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining I18N3
EOF
cat >> confdefs.h <<\EOF
#define I18N3 1
EOF
}

test "$GCC"                = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_GCC
EOF
cat >> confdefs.h <<\EOF
#define USE_GCC 1
EOF
}

test "$external_widget"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining EXTERNAL_WIDGET
EOF
cat >> confdefs.h <<\EOF
#define EXTERNAL_WIDGET 1
EOF
}

test "$quick_build"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining QUICK_BUILD
EOF
cat >> confdefs.h <<\EOF
#define QUICK_BUILD 1
EOF
}

test "$with_purify"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PURIFY
EOF
cat >> confdefs.h <<\EOF
#define PURIFY 1
EOF
}

test "$with_quantify"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining QUANTIFY
EOF
cat >> confdefs.h <<\EOF
#define QUANTIFY 1
EOF
}

test "$with_pop"           = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining MAIL_USE_POP
EOF
cat >> confdefs.h <<\EOF
#define MAIL_USE_POP 1
EOF
}

test "$with_kerberos"      = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining KERBEROS
EOF
cat >> confdefs.h <<\EOF
#define KERBEROS 1
EOF
}

test "$with_hesiod"        = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining HESIOD
EOF
cat >> confdefs.h <<\EOF
#define HESIOD 1
EOF
}

test "$use_union_type"     = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining USE_UNION_TYPE
EOF
cat >> confdefs.h <<\EOF
#define USE_UNION_TYPE 1
EOF
}

test "$use_regex_malloc"   = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining REGEX_MALLOC
EOF
cat >> confdefs.h <<\EOF
#define REGEX_MALLOC 1
EOF
}

test "$pdump"              = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining PDUMP
EOF
cat >> confdefs.h <<\EOF
#define PDUMP 1
EOF
}

test "$with_ipv6_cname"    = "yes" && { test "$extra_verbose" = "yes" && cat << \EOF
    Defining IPV6_CANONICALIZE
EOF
cat >> confdefs.h <<\EOF
#define IPV6_CANONICALIZE 1
EOF
}



(
if test -f /etc/osversion; then   echo "osversion: `cat /etc/osversion`"
else
  echo "uname -a: `uname -a`"
fi
echo ""
echo "$0 $quoted_arguments"
) > Installation

if test ! -z ${emacs_beta_version} ; then
  if test -z "${emacs_is_beta}" ; then
	xemacs_betaname=".${emacs_beta_version}"
  else
	xemacs_betaname="-b${emacs_beta_version}"
  fi
else
  xemacs_betaname=""
fi

(
echo "

XEmacs ${emacs_major_version}.${emacs_minor_version}${xemacs_betaname} \"$xemacs_codename\" configured for \`$canonical'.
"
echo "
Compilation / Installation:"
echo "  Source code location:              $srcdir"
echo "  Installation prefix:               $prefix"
if test -n "$site_includes"; then
  echo "  Additional header files:           $site_includes"
fi
if test -n "$site_libraries"; then
  echo "  Additional libraries:              $site_libraries"
fi
if test -n "$site_prefixes"; then
  echo "  Additional prefixes:               $site_prefixes"
fi
if test -n "$runpath"; then
  echo "  Runtime library search path:       $runpath"
fi

if test -n "$opsysfile"
then echo "  Operating system description file: \`$opsysfile'"
else echo "  Not using any operating system description file"
fi
if test -n "$machfile"
then echo "  Machine description file:          \`$machfile'"
else echo "  Not using any machine description file"
fi

echo "  Compiler:                          $CC $CFLAGS"
case "$CC" in
  gcc*)	echo "  Compiler version:                  `$CC --version | sed 1q`"
        echo "  Compiler specs file:               `$CC -v 2>&1 | sed 's/.* \([^ ]\)/\1/' | sed 1q`"
	;;
  *) case "$canonical" in
	*-*-aix*   ) 
          	  realcc=`which $CC`
	  	  if test -L $realcc ; then
	    ccdir=`dirname $realcc`
	    ccprog=`/bin/ls -l $realcc | sed 's/.* \([^ ]\)/\1/'`
	    	    case $ccprog in
		*/*) realcc=$ccprog;;
		*) realcc=$ccdir/$ccprog;;
	    esac
	  fi
	  lpp=`lslpp -wqc $realcc | cut -f2 -d:`
	  if test ! -z "$lpp" ; then
	    lppstr=`lslpp -Lqc $lpp`
	    lpplev=`echo "$lppstr" | cut -f3 -d:`
	    lppdesc=`echo "$lppstr" | cut -f8 -d:`
	  fi
	  if test ! -z "$lpplev" ; then
	    echo "  Compiler version:                  $lpp $lpplev - $lppdesc"
	  else
	    echo "  Compiler version:                  (unknown version)"
	  fi
	;;
	
	*-*-solaris*)
	  ccvers=`$CC -V 2>&1 | sed 1q`
	  if test ! -z "$ccvers" ; then
	    echo "  Compiler version:                  $ccvers"
	  fi
	;;

	alpha*-dec-osf*)
	  ccvers=`$CC -V | tr '\n' ' '`
	  if test ! -z "$ccvers" ; then
	    echo "  Compiler version:                  $ccvers"
	  fi
	;;

	mips-sgi-irix*)
	  ccvers=`$CC -version`
	  if test ! -z "$ccvers" ; then
	    echo "  Compiler version:                  $ccvers"
	  fi
	;;

		i[3-9]86-pc-linux)
	  ccvers=`$CC -V 2>&1 | sed -n 's@^Intel.*Version @@'p`
	  if test ! -z "$ccvers" ; then
	    echo "  Compiler version:                  $ccvers"
	  fi
	;;
	  
	*) echo "  Compiler version:                  $CC on $canonical";;
  esac
esac

echo "  Relocating allocator for buffers:  $rel_alloc"
echo "  GNU version of malloc:             ${GNU_MALLOC}${GNU_MALLOC_reason}"
case "$ld_switch_site" in
  *nocombreloc*) echo "  Linking with \`-z nocombreloc'.
    - Consider configuring with --pdump." ;;
esac

case "$canonical" in
	*-*-linux*) 
	  if test -f /etc/redhat-release ; then
	    echo "  libc:                              `rpm -q glibc`";
          else
	    echo "Need to guess glibc1/2/etc here";
          fi
	;;

	*-*-aix*) 
	  echo "  libc:                              bos.rte.libc `lslpp -Lqc bos.rte.libc | cut -f3 -d:`" 
	;;

	*-*-solaris*)
	  libc=`pkginfo -l SUNWcsl | grep VERSION: | awk '{print $2}'`
	  echo "  libc:                              SUNWcsl $libc"

	;;

	mips-sgi-irix*)
	  echo "  IRIX version:                      `uname -sRm`'"
	;;
	  

	alpha*-dec-osf*)
		  (cd /usr/.smdb.;
		libc=` grep -h libc.so *.inv | awk '$9 == "f" {print $12}' | tr '\n' ','`
		echo "  libc:                              $libc"
		
	  )
	;;

	*) echo "  libc:                              system-provided libc on $canonical" ;;
esac


echo "
Window System:"
if test "$with_msw" = "yes"; then
  echo "  Compiling in support for the Microsoft window system."
fi
if test "$with_x11" = "yes"; then
  echo "  Compiling in support for the X window system:"
  echo "    - X Windows headers location:                 $x_includes"
  echo "    - X Windows libraries location:               $x_libraries"
  if test "$with_xauth" != yes; then
    echo "    - Xau (X authority) not available."
  fi
  if test "$with_xmu" != yes; then
    echo "    - Xmu library not available; substituting equivalent routines."
  fi
  if test "$with_wmcommand" != no; then
    echo "    - Handling WM_COMMAND properly."
  fi
fi
if test "$need_motif" = "yes" ; then
  echo "  Compiling in support for Motif."
  if test "$have_lesstif" = "yes"; then
    echo "    - Using LessTif implementation."
  fi
  echo "  *WARNING*  Many versions of Motif are buggy, requiring workarounds."
  echo "             You are likely to experience slow redisplay."
  echo "             You may need to install vendor patches to Motif."
  echo "             See PROBLEMS for more information."
fi
if test "$need_athena" = "yes"; then
  echo "  Compiling in support for the Athena widget set:"
  echo "    - Athena headers location:                    $athena_h_path"
  echo "    - Athena library to link:                     $athena_lib"
fi
case "$with_menubars" in
  gtk   ) echo "  Using GTK menubars."   ;;
  lucid ) echo "  Using Lucid menubars." ;;
  motif ) echo "  Using Motif menubars."
          echo "  *WARNING*  The Motif menubar implementation is currently buggy."
          echo "             We recommend using the Lucid menubar instead."
          echo "             Re-run configure with --with-menubars='lucid'." ;;
    msw ) echo "  Using MS-Windows menubars." ;;
esac
case "$with_scrollbars" in
  gtk    ) echo "  Using GTK scrollbars."        ;;
  lucid  ) echo "  Using Lucid scrollbars."      ;;
  motif  ) echo "  Using Motif scrollbars."      ;;
  athena ) echo "  Using Athena scrollbars."     ;;
     msw ) echo "  Using MS-Windows scrollbars." ;;
esac
case "$with_dialogs" in
  gtk    ) echo "  Using GTK dialog boxes." ;;
  motif  ) echo "  Using Motif dialog boxes."
           if test "$unexec" = "unexaix.o"; then if test "`uname -v`" = 4 -a "`uname -r`" -ge 3; then
             echo "  *WARNING*  The Motif dialog boxes cause problems on AIX 4.3 and higher."
             echo "             We recommend using the Athena dialog boxes instead."
             echo "             Install libXaw and re-run configure with --with-dialogs='athena'."
             echo "             Read the PROBLEMS file for more information."
           fi; fi ;;
  athena ) echo "  Using Athena dialog boxes."     ;;
     msw ) echo "  Using MS-Windows dialog boxes." ;;
esac
case "$with_widgets" in
  gtk    ) echo "  Using GTK native widgets."        ;;
  motif  ) echo "  Using Motif native widgets."      ;;
  athena ) echo "  Using Athena native widgets."     ;;
     msw ) echo "  Using MS-Windows native widgets." ;;
esac
if test "$with_dragndrop" = yes; then
  echo "  Compiling in support for Drag'n'Drop (EXPERIMENTAL)."
  echo "    -  Drag'n'Drop prototype:                             $dragndrop_proto."
fi

echo "
TTY:"
test "$with_ncurses" = yes && echo "  Compiling in support for ncurses."
test "$with_gpm" = yes && echo "  Compiling in support for GPM (General Purpose Mouse)."

echo "
Images:"
test "$with_gif" = yes && echo "  Compiling in support for GIF  images (builtin)."
if test "$with_xpm" = yes; then
  echo "  Compiling in support for XPM  images."
elif test "$with_x11" = yes; then
  echo "  WARNING: -----------------------------------------------------------"
  echo "  WARNING: Compiling without XPM image support."
  if test "$xpm_problem" != ""; then
    echo "  Reason: $xpm_problem"
  fi
  echo "  WARNING: You should strongly consider installing XPM."
  echo "  WARNING: Otherwise toolbars and other graphics will look suboptimal."
  echo "  WARNING: (a copy may be found in ftp://ftp.xemacs.org/pub/xemacs/aux)"
  echo "  WARNING: -----------------------------------------------------------"
fi
if test "$with_png" = yes; then
  echo "  Compiling in support for PNG  images."
elif test "$window_system" != "none"; then
  echo "  WARNING: -----------------------------------------------------------"
  echo "  WARNING: Compiling without PNG image support."
  if test "$png_problem" != ""; then
    echo "  Reason: $png_problem"
  fi
  echo "  WARNING: You should strongly consider installing the PNG libraries."
  echo "  WARNING: Otherwise certain images and glyphs may not display."
  echo "  WARNING: (a copy may be found in ftp://ftp.xemacs.org/pub/xemacs/aux)"
  echo "  WARNING: -----------------------------------------------------------"
fi
test "$with_jpeg" = yes && echo "  Compiling in support for JPEG images."
test "$with_tiff" = yes && echo "  Compiling in support for TIFF images."
test "$with_xface" = yes && echo "  Compiling in support for X-Face message headers."

echo "
Sound:"
test "$with_native_sound" = yes && echo "  Compiling in support for sound (native)."
test "$with_nas_sound" = yes && echo "  Compiling in support for NAS (network audio system)."
test "$old_nas" = yes && echo "    - NAS library lacks error trapping; will play synchronously."
test "$with_esd_sound" = yes && echo "  Compiling in support for ESD (Enlightened Sound Daemon)."

echo "
Databases:"
test "$with_database_berkdb" = yes && echo "  Compiling in support for Berkeley database."
test "$with_database_dbm"    = yes && echo "  Compiling in support for DBM."
test "$with_database_gdbm"   = yes && echo "  Compiling in support for GNU DBM."
test "$with_ldap" = yes && echo "  Compiling in support for LDAP."
if test "$with_postgresql" = yes; then
  echo "  Compiling in support for PostgreSQL."
  echo "    - Using PostgreSQL header file:  $libpq_fe_h_file"
  test "$with_postgresqlv7" = yes && echo "    - Using PostgreSQL V7 bindings."
fi
if test "$with_concord" = yes; then
  echo "  Compiling in support for CONCORD."
fi

echo "
Multiscriptization / Multilingualization / Internationalization:"
test "$with_mule" = yes && echo "  Compiling in support for Mule (multi-lingual Emacs)."
test "$with_chise" = yes && echo "  Using CHISE (CHaracter Information Service Environment) support."
test "$with_utf_2000" = yes && echo "  Using UTF-2000 (UTF-8) buffer/string representation."
test "$with_text_coding" = yes && echo "  Compiling in support for text coding."
test "$with_file_coding" = yes && echo "  Compiling in support for file coding."
test "$with_xim" != no && echo "  Compiling in support for XIM (X11R5+ I18N input method)."
test "$with_xim" = motif && echo "    - Using Motif to provide XIM support."
test "$with_xim" = xlib && echo "    - Using raw Xlib to provide XIM support."
test "$with_xfs" = yes && echo "    - Using XFontSet to provide bilingual menubar."
test "$with_canna" = yes && echo "  Compiling in support for Canna on Mule."
if test "$with_wnn" = yes; then
  echo "  Compiling in support for the WNN input method on Mule."
  test "$with_wnn6" = yes && echo "    - Using WNN version 6."
fi
test "$with_i18n3" = yes && echo "  Compiling in support for I18N level 3 (doesn't currently work)."

echo "
Mail:"
test "$with_pop" = yes && echo "  Compiling in support for POP mail retrieval."
test "$with_kerberos" = yes && echo "  Compiling in support for Kerberos POP authentication."
test "$with_hesiod" = yes && echo "  Compiling in support for Hesiod POP server access."
test -n "$mail_locking" && echo "  Compiling in support for \"$mail_locking\" mail spool file locking method."

echo "
Other Features:"
test "$with_ipv6_cname" = no && echo "  Inhibiting IPv6 canonicalization at startup."
test "$with_tooltalk" = yes && echo "  Compiling in support for ToolTalk."
test "$with_workshop" = yes && echo "  Compiling in support for Sun WorkShop."
test "$with_socks" = yes && echo "  Compiling in support for SOCKS."
test "$with_dnet" = yes && echo "  Compiling in support for DNET."
test "$with_modules" = "yes" && echo "  Compiling in support for dynamic shared object modules."
if test "$use_union_type" = yes; then
  echo "  WARNING: ---------------------------------------------------------"
  echo "  Using the union type for Lisp_Objects."
  echo "  Union type has been implicated in hard-to-debug runtime crashes."
  echo "  Do NOT use this build of XEmacs for ordinary work.  See PROBLEMS."
  echo "  WARNING: ---------------------------------------------------------"
fi
if test "$use_regex_malloc" = no; then
  echo "  WARNING: -----------------------------------------------------------"
  echo "  Using alloca to allocate the failure stack."
  echo "  It may be impossible to detect stack exhaustion, and you will crash."
  echo "  Do NOT use this build of XEmacs for ordinary work."
  echo "  WARNING: -----------------------------------------------------------"
fi
test "$pdump" = yes && echo "  Using the new portable dumper."
test "$debug" = yes && echo "  Compiling in support for extra debugging code."
test "$usage_tracking" = yes && echo "  Compiling in support for active usage tracking (Sun internal)."
if test "$error_check_extents $error_check_typecheck $error_check_bufpos $error_check_gc $error_check_malloc $error_check_glyphs" \
  != "no no no no no no"; then
  echo "  WARNING: ---------------------------------------------------------"
  echo "  WARNING: Compiling in support for runtime error checking."
  echo "  WARNING: XEmacs will run noticeably more slowly as a result."
  echo "  WARNING: Error checking is on by default for XEmacs beta releases."
  echo "  WARNING: ---------------------------------------------------------"
fi
echo ""
) | tee -a Installation
echo ""


# Remove any trailing slashes in these variables.
test -n "$prefix" &&
  prefix=`echo '' "$prefix" | sed -e 's:^ ::' -e 's,\([^/]\)/*$,\1,'`
test -n "$exec_prefix" &&
  exec_prefix=`echo '' "$exec_prefix" | sed -e 's:^ ::' -e 's,\([^/]\)/*$,\1,'`


for file in $internal_makefile_list; do
  test "$file" = src/Makefile.in && \
    file="src/Makefile.in:src/Makefile.in.in:src/depend"
  ac_output_files="$ac_output_files $file" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"$file\" to \$ac_output_files"; fi
done
ac_output_files="$ac_output_files src/paths.h lib-src/config.values"
test "$with_modules" = "yes" && ac_output_files="$ac_output_files lib-src/ellcc.h" &&  if test "$extra_verbose" = "yes"; then echo "    Appending \"lib-src/ellcc.h\" to \$ac_output_files"; fi

trap '' 1 2 15

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.13"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "$ac_output_files src/config.h lwlib/config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@SHELL@%$SHELL%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@FFLAGS@%$FFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@LN_S@%$LN_S%g
s%@blddir@%$blddir%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@start_flags@%$start_flags%g
s%@ld_switch_shared@%$ld_switch_shared%g
s%@start_files@%$start_files%g
s%@ld@%$ld%g
s%@lib_gcc@%$lib_gcc%g
s%@RANLIB@%$RANLIB%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@YACC@%$YACC%g
s%@SET_MAKE@%$SET_MAKE%g
s%@GTK_CONFIG@%$GTK_CONFIG%g
s%@X_CFLAGS@%$X_CFLAGS%g
s%@X_PRE_LIBS@%$X_PRE_LIBS%g
s%@X_LIBS@%$X_LIBS%g
s%@X_EXTRA_LIBS@%$X_EXTRA_LIBS%g
s%@install_pp@%$install_pp%g
s%@libs_xauth@%$libs_xauth%g
s%@dnd_objs@%$dnd_objs%g
s%@lwlib_objs@%$lwlib_objs%g
s%@ALLOCA@%$ALLOCA%g
s%@have_esd_config@%$have_esd_config%g
s%@dll_ld@%$dll_ld%g
s%@dll_cflags@%$dll_cflags%g
s%@dll_ldflags@%$dll_ldflags%g
s%@dll_post@%$dll_post%g
s%@dll_ldo@%$dll_ldo%g
s%@ld_dynamic_link_flags@%$ld_dynamic_link_flags%g
s%@SRC_SUBDIR_DEPS@%$SRC_SUBDIR_DEPS%g
s%@INSTALL_ARCH_DEP_SUBDIR@%$INSTALL_ARCH_DEP_SUBDIR%g
s%@MAKE_SUBDIR@%$MAKE_SUBDIR%g
s%@SUBDIR_MAKEFILES@%$SUBDIR_MAKEFILES%g
s%@PROGNAME@%$PROGNAME%g
s%@version@%$version%g
s%@configuration@%$configuration%g
s%@canonical@%$canonical%g
s%@inststaticdir@%$inststaticdir%g
s%@instvardir@%$instvardir%g
s%@srcdir@%$srcdir%g
s%@pkgdir@%$pkgdir%g
s%@statedir@%$statedir%g
s%@extra_includes@%$extra_includes%g
s%@PREFIX_USER_DEFINED@%$PREFIX_USER_DEFINED%g
s%@PREFIX@%$PREFIX%g
s%@EXEC_PREFIX_USER_DEFINED@%$EXEC_PREFIX_USER_DEFINED%g
s%@EXEC_PREFIX@%$EXEC_PREFIX%g
s%@INFODIR_USER_DEFINED@%$INFODIR_USER_DEFINED%g
s%@INFODIR@%$INFODIR%g
s%@infopath@%$infopath%g
s%@INFOPATH_USER_DEFINED@%$INFOPATH_USER_DEFINED%g
s%@INFOPATH@%$INFOPATH%g
s%@package_path@%$package_path%g
s%@PACKAGE_PATH_USER_DEFINED@%$PACKAGE_PATH_USER_DEFINED%g
s%@PACKAGE_PATH@%$PACKAGE_PATH%g
s%@lispdir@%$lispdir%g
s%@LISPDIR_USER_DEFINED@%$LISPDIR_USER_DEFINED%g
s%@LISPDIR@%$LISPDIR%g
s%@moduledir@%$moduledir%g
s%@MODULEDIR_USER_DEFINED@%$MODULEDIR_USER_DEFINED%g
s%@MODULEDIR@%$MODULEDIR%g
s%@sitelispdir@%$sitelispdir%g
s%@SITELISPDIR_USER_DEFINED@%$SITELISPDIR_USER_DEFINED%g
s%@SITELISPDIR@%$SITELISPDIR%g
s%@sitemoduledir@%$sitemoduledir%g
s%@SITEMODULEDIR_USER_DEFINED@%$SITEMODULEDIR_USER_DEFINED%g
s%@SITEMODULEDIR@%$SITEMODULEDIR%g
s%@etcdir@%$etcdir%g
s%@ETCDIR_USER_DEFINED@%$ETCDIR_USER_DEFINED%g
s%@ETCDIR@%$ETCDIR%g
s%@docdir@%$docdir%g
s%@DOCDIR_USER_DEFINED@%$DOCDIR_USER_DEFINED%g
s%@DOCDIR@%$DOCDIR%g
s%@archlibdir@%$archlibdir%g
s%@ARCHLIBDIR_USER_DEFINED@%$ARCHLIBDIR_USER_DEFINED%g
s%@ARCHLIBDIR@%$ARCHLIBDIR%g
s%@bitmapdir@%$bitmapdir%g
s%@extra_objs@%$extra_objs%g
s%@machfile@%$machfile%g
s%@opsysfile@%$opsysfile%g
s%@c_switch_general@%$c_switch_general%g
s%@c_switch_window_system@%$c_switch_window_system%g
s%@c_switch_all@%$c_switch_all%g
s%@ld_switch_general@%$ld_switch_general%g
s%@ld_switch_window_system@%$ld_switch_window_system%g
s%@ld_switch_all@%$ld_switch_all%g
s%@ld_libs_general@%$ld_libs_general%g
s%@ld_libs_window_system@%$ld_libs_window_system%g
s%@ld_libs_all@%$ld_libs_all%g
s%@RECURSIVE_MAKE_ARGS@%$RECURSIVE_MAKE_ARGS%g
s%@native_sound_lib@%$native_sound_lib%g
s%@sound_cflags@%$sound_cflags%g
s%@dynodump_arch@%$dynodump_arch%g
s%@XEMACS_CC@%$XEMACS_CC%g
s%@internal_makefile_list@%$internal_makefile_list%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ac_output_files"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac

  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="src/config.h lwlib/config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF
CPP="$CPP"
 top_srcdir="$srcdir"
 MAKE_SUBDIR="$MAKE_SUBDIR"

EOF
cat >> $CONFIG_STATUS <<\EOF
for dir in . $MAKE_SUBDIR; do
  (
    cd $dir
    rm -f junk.c
    < Makefile.in \
      sed -e '/^# Generated/d' \
          -e 's%/\*\*/#.*%%' \
          -e 's/^ *# */#/' \
          -e '/^##/d' \
          -e '/^#/ {
p
d
}'        \
	  -e '/./ {
s/\([\"]\)/\\\1/g
s/^/"/
s/$/"/
}'  > junk.c;



    echo creating $dir/Makefile
$CPP -I. -I${top_srcdir}/src  junk.c \
  | sed -e 's/^\#.*//'		\
	-e 's/^[ 	][ 	]*$//'\
	-e 's/^ /	/'		\
	-e '/^[ ]*$/d'	\
	-e '/^\"/ {
	s/\\\([\"]\)/\1/g
	s/^[ 	]*\"//
	s/\"[ 	]*$//
}' > Makefile.new
    chmod 444 Makefile.new
    mv -f Makefile.new Makefile

    echo creating $dir/GNUmakefile
$CPP -I. -I${top_srcdir}/src -DUSE_GNU_MAKE junk.c \
  | sed -e 's/^\#.*//'		\
	-e 's/^[ 	][ 	]*$//'\
	-e 's/^ /	/'		\
	-e '/^[ ]*$/d'	\
	-e '/^\"/ {
	s/\\\([\"]\)/\1/g
	s/^[ 	]*\"//
	s/\"[ 	]*$//
}' > Makefile.new
    chmod 444 Makefile.new
    mv -f Makefile.new GNUmakefile

    rm -f junk.c
  )
done

sed < config.status >> lib-src/config.values \
  -e '/{ac_dA}.*{ac_dB}.*{ac_dC}.*{ac_dD}$/!d' \
  -e 's/\${ac_dA}\(.*\)\${ac_dB}.*\${ac_dC}\(.*\)\${ac_dD}/\1 \2/' \
  -e 's/^\([^ ]*\) $/\1 ""/' \
  -e 's/ 1$/ t/'


exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1
